(this["webpackJsonpaws-northstar-demo"]=this["webpackJsonpaws-northstar-demo"]||[]).push([[0],{1185:function(e,t,n){},1199:function(e,t,n){},1225:function(e,t,n){},1226:function(e,t,n){},1227:function(e,t,n){},1228:function(e,t,n){},1229:function(e,t,n){},1230:function(e,t,n){},1231:function(e,t,n){},1232:function(e,t,n){},1233:function(e,t,n){},1234:function(e,t,n){},1235:function(e,t,n){},1236:function(e,t,n){},1237:function(e,t,n){},1238:function(e,t,n){},1239:function(e,t,n){},1244:function(e,t){},1245:function(e,t){},1253:function(e,t){},1261:function(e,t){},1262:function(e,t,n){},1263:function(e,t,n){},1284:function(e,t,n){},1285:function(e,t,n){},1286:function(e,t,n){},1287:function(e,t,n){},1288:function(e,t,n){},1289:function(e,t,n){},1290:function(e,t,n){},1291:function(e,t,n){},1292:function(e,t,n){},1293:function(e,t,n){},1294:function(e,t,n){},1295:function(e,t,n){},1296:function(e,t,n){},1297:function(e,t,n){},1298:function(e,t,n){},1299:function(e,t,n){},1300:function(e,t,n){},1301:function(e,t,n){},1305:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Lo}));var a,i,o=n(0),r=n.n(o),l=n(62),c=n.n(l),s=n(19),u=n(100),d=n(106),b=n(601),h=n.n(b),g=n(602),m=n.n(g),p=n(604),j=n.n(p),f=n(148),O=n.n(f),v=n(605),x=n.n(v),y=n(2),I=function(e){var t=e.children,n=Object(o.useMemo)((function(){return Object(y.jsx)(j.a,{title:"All-In-One AI",logoPath:"/ml.jpg"})}),[]),a=Object(o.useMemo)((function(){return Object(y.jsx)(x.a,{rootPath:"Home"})}),[]),i=Object(o.useMemo)((function(){return Object(y.jsx)(O.a,{header:{text:"Home",href:"/"},items:[{type:f.SideNavigationItemType.SECTION,text:"Scenarios",items:[{text:"PPE Detector",type:f.SideNavigationItemType.LINK,href:"/scenarios/ppe"},{text:"Track maintenance",type:f.SideNavigationItemType.LINK,href:"/scenarios/ppe"},{text:"Intelligent steaming videos",type:f.SideNavigationItemType.LINK,href:"/scenarios/ppe"},{text:"Shelf recognition",type:f.SideNavigationItemType.LINK,href:"/scenarios/ppe"}]},{type:f.SideNavigationItemType.SECTION,text:"Use cases",items:[{text:"Track detection",type:f.SideNavigationItemType.LINK,href:"/case/track/demo"},{text:"Mask detection",type:f.SideNavigationItemType.LINK,href:"/case/mask/demo"},{text:"Helmet detection",type:f.SideNavigationItemType.LINK,href:"/case/helmet/demo"},{text:"Receipt recognition",type:f.SideNavigationItemType.LINK,href:"/case/receipt/demo"},{text:"Insurance report recogniton",type:f.SideNavigationItemType.LINK,href:"/case/insurance/demo"}]},{type:f.SideNavigationItemType.SECTION,text:"Models",items:[{text:"Yolov5",type:f.SideNavigationItemType.LINK,href:"/model/yolov5"},{text:"Paddle",type:f.SideNavigationItemType.LINK,href:"/model/yolov5"}]}]})}),[]);return Object(y.jsx)(m.a,{header:n,navigation:i,breadcrumbs:a,children:t})},C=n(20),A=function(){return Object(y.jsx)(C.Paper,{children:Object(y.jsx)(C.Box,{p:1,width:"100%",children:Object(y.jsxs)(C.Stack,{spacing:"xs",children:[Object(y.jsx)(C.Heading,{variant:"h1",children:"All-In-One AI"}),Object(y.jsx)(C.Text,{children:Object(y.jsx)("b",{children:"Introduction"})}),Object(y.jsx)(C.Text,{variant:"p",children:"2022 Gartner Survey\xa0revealed a 3.6% year-over-year growth rate, the fastest in more than a decade. In terms of specific technologies driving this surge in expenditure would be artificial intelligence (AI) and machine learning (ML), accounting for a whopping 48% of the whole pie. The survey also highlights the relative immaturity of AI technologies compared to the other innovation areas. Just over half of respondents report significant target customer adoption of their AI-enabled products and services. 41% of respondents cited AI emerging technologies as still being in development or early adoption stages, meaning there is a wave of potential adoption as new or augmented AI products and services enter general availability. Technology immaturity is cited as a top reason among AI-investing organizations leading to failure when integrating an emerging technology. Furthermore, product leaders investing in AI whose implementations are progressing slower than expected reported product complexity and a lack of skills as the main hindrances to their progress. There are a couple of industry AI/ML models built on top of AWS SageMaker as the supplement of AWS managed AI/ML services. Those AI/ML models are scattered, lack of web visualization, and not ready to present to customer directly, especially for the customers\u2019 business staff. The customers may not aware of the existing matured AI/ML models which can solve their complex business problems. It will be nice to allow the customers to get aware of the matured AI/ML models existing in AWS for specific industry AI/ML scenarios and experience the AI/ML models in an intuitive way and adopt directly or after customization."}),Object(y.jsx)(C.Text,{children:Object(y.jsx)("b",{children:"Who are the customers, their persona, and their pain points"})}),Object(y.jsx)(C.Text,{variant:"p",children:"The customers can be defined as business related (business owner and business operation) and IT related (data scientist and application developer). Business owner is more focused on the business impact in general and usually it is the decision-maker. Business operation is more focused on daily business operation and usually it is the end-user of the business operation system. Data scientist is more focused on the creation, fine-tuning and performance measurement of the AI/ML model which will be used in the business operation system. Application developer is more focused on the engineering implementation of the business operation system. To be simplified, term \u201cBusiness\u201d will represent the business owner and business operation in short and term \u201cIT\u201d will represent the data scientist and application developer in short."}),Object(y.jsx)(C.Text,{children:Object(y.jsx)("b",{children:"What will our solution look like?"})}),Object(y.jsx)(C.Text,{variant:"p",children:"Our solution will sort out all the existing industry AI/ML models, figure out the specific AI/ML scenario and underlying AI/ML models, facilitate the pipeline from model training, endpoint deployment and data inference in the cloud and in the edge device, visualize the whole process, and present to the customers\u2019 Business and IT. Typically our solution will consist of some specific industry AI/ML scenarios, underlying AI/ML models packaged as bundle, common AI/ML pipeline framework, common visualization framework, and demo website.                     "}),Object(y.jsx)(C.Text,{children:Object(y.jsx)("b",{children:"What\u2019s the to-be customer/partner/AWS journey?"})}),Object(y.jsx)(C.Text,{variant:"p",children:"AWS builds this solution for some specific industry AI/ML scenarios with underlying AI/ML models packaged as bundle, common AI/ML pipeline framework, common visualization framework, and demo website. AWS promote this solution internally and externally. AWS sorts out suitable partners and co-works with partners to host the demo website and promote the solution to market. Customers hope to achieve business growth and data safety, reduce human efforts via AI/ML capability with lower cost and easy to use to solve complex business problem in specific industry AI/ML scenarios. Customers get aware of our solution from social media, marketing events, SEO, open-source project, technical blogs, and demo websites hosted by partners and AWS. Customers experience the demo websites and then contact partners or AWS. AWS invite partners to be involved in the opportunities. Partner co-works with customers to collect business requirement, identify the pain point, clarify the budget and project scope, and figure out the core technical problems. Customers deploy this solution into their AWS account. Customers may adopt the AI/ML models directly or customize with fine-tuned versions by themselves or co-working with partners or even AWS. The fine-tuned AI/ML models get integrated with this solution to accumulate AI/ML capabilities.  Customers evaluate the business impact. Customers co-work with partners and AWS on marketing promotion. Customers may move more workloads to AWS. Partners may extend their product lines after acquiring more AI/ML capabilities by integrating with this solution.                    "})]})})})},P=n(612),E=n.n(P),L=n(9),T=n(181),w=n.n(T),S=n(266),R=n.n(S),D=n(56),k=n(618),_=n.n(k),N=n(132),M=n.n(N),B=n(301),F=n.n(B),U=n(7),V=n(6),z=n(27),H=n(33),G=n(258),W=n(139),Y=["#ff3838","#ff9d97","#ff701f","#ffb21d","#cff231","#48f90a","#92cc17","#3ddb86","#1a9334","#00d4bb","#2c99a8","#00c2ff","#344593","#6473ff","#0018ec","#8438ff","#520085","#cb38ff","#ff95c8","#ff37c7"],Z=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={image:null,width:0,height:0},e.handleLoad=function(){e.setState({image:e.image,width:e.image.width,height:e.image.height})},e}return Object(V.a)(n,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e=this;return 0===this.props.label.length?Object(y.jsx)(G.d,{width:this.state.width,height:this.state.height,children:Object(y.jsx)(G.b,{children:Object(y.jsx)(G.a,{x:this.props.x,y:this.props.y,image:this.state.image,ref:function(t){e.imageNode=t}})})}):Object(y.jsx)(G.d,{width:this.state.width+500,height:this.state.height,children:Object(y.jsxs)(G.b,{children:[Object(y.jsx)(G.a,{x:this.props.x,y:this.props.y,image:this.state.image,ref:function(t){e.imageNode=t}}),this.props.bbox.map((function(t,n){return Object(y.jsx)(G.c,{x:Math.floor((parseFloat(t[0])-parseFloat(t[2])/2)*e.state.width),y:Math.floor((parseFloat(t[1])-parseFloat(t[3])/2)*e.state.height),width:Math.floor(parseFloat(t[2])*e.state.width),height:Math.floor(parseFloat(t[3])*e.state.height),stroke:Y[n]},W.v4())})),this.props.bbox.map((function(t,n){return Object(y.jsx)(G.c,{x:e.state.width+60,y:20*n+5,width:30,height:10,fill:Y[n%Y.length]})})),this.props.bbox.map((function(t,n){return Object(y.jsx)(G.e,{text:e.props.label[n],x:e.state.width+100,y:20*n,fontFamily:"Times New Roman",fontSize:18})}))]})})}}]),n}(r.a.Component),X=Z,K=n(37),J=n.n(K),q=n(70),Q=n.n(q),$=function(){var e=Object(o.useState)(""),t=Object(L.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)([]),r=Object(L.a)(i,2),l=r[0],c=r[1],s=Object(o.useState)([]),u=Object(L.a)(s,2),d=u[0],b=u[1],h=function(e){F.a.post("/image",e[0]).then((function(e){var t=e.data;a("/image/"+t),c([])}),(function(e){console.log(e)}))},g=function(){F.a.get("/inference"+n).then((function(e){var t,n=[],a=[],i=Object(D.a)(e.data);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(o.label);var r=o.bbox.toString().split(",");a.push(r)}}catch(l){i.e(l)}finally{i.f()}c(n),b(a)}),(function(e){console.log(e)}))};return""===n?Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(M.a,{title:"Select image file from local disk",children:Object(y.jsx)(_.a,{controlId:"file1",onChange:h})}),Object(y.jsx)(M.a,{title:"Start inference",children:Object(y.jsx)(J.a,{controlId:"button",children:Object(y.jsx)(Q.a,{variant:"primary",onClick:g,children:"Inference"})})})]}):Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(M.a,{title:"Select image file from local disk",children:Object(y.jsx)(_.a,{controlId:"file1",onChange:h})}),Object(y.jsxs)(M.a,{title:"Start inference",children:[Object(y.jsx)(J.a,{controlId:"button",children:Object(y.jsx)(X,{src:n,label:l,bbox:d})}),Object(y.jsx)(J.a,{controlId:"button",children:Object(y.jsx)(Q.a,{variant:"primary",onClick:g,children:"Inference"})})]})]})},ee=n(140),te=n.n(ee),ne=n(81),ae=n.n(ne),ie=n(55),oe=n.n(ie),re=n(473),le=n.n(re),ce=function(e){var t=r.a.useState(),n=Object(L.a)(t,2),a=n[0],i=n[1];return Object(y.jsx)(le.a,{placeholder:e.placeholder,options:e.options,selectedOption:a,onChange:function(t){i({value:t.target.value}),e.onChange(e.name,t.target.value)}})},se=n(113),ue=n.n(se),de=[{label:"S3Prefix",value:"S3Prefix"},{label:"ManifestFile",value:"ManifestFile"}],be=[{label:"image/png",value:"image/png"},{label:"image/jpg",value:"image/jpg"},{label:"image/jpeg",value:"image/jpeg"}],he=[{label:"moodel-1",value:"model-1"}],ge=[{label:"Standard",options:[{label:"ml.m5.large",value:"ml.m5.large"},{label:"ml.m5.2large",value:"ml.m5.xlarge"},{label:"ml.m5.2large",value:"ml.m5.2xlarge"},{label:"ml.m5.4large",value:"ml.m5.4xlarge"},{label:"ml.m5.12large",value:"ml.m5.12xlarge"},{label:"ml.m5.24large",value:"ml.m5.24xlarge"}]},{label:"Compute optimized",options:[{label:"ml.c5.xlarge",value:"ml.c5.xlarge"},{label:"ml.c5.2xlarge",value:"ml.c5.2xlarge"},{label:"ml.c5.4xlarge",value:"ml.c5.4xlarge"},{label:"ml.c5.9xlarge",value:"ml.c5.9xlarge"},{label:"ml.c5.18xlarge",value:"ml.c5.18xlarge"}]}],me=function(){var e=r.a.useState(""),t=Object(L.a)(e,2),n=(t[0],t[1]),a=r.a.useState(""),i=Object(L.a)(a,2),o=(i[0],i[1]),l=r.a.useState(""),c=Object(L.a)(l,2),s=(c[0],c[1]),u=function(e,t){"data"===e&&n(t),"content"===e&&o(t),"instance"===e&&s(t)};return Object(y.jsxs)(te.a,{spacing:"s",children:[Object(y.jsxs)(ae.a,{header:"Job configuration",children:[Object(y.jsx)(J.a,{label:"Model",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"model",options:he,onChange:u})}),Object(y.jsx)(J.a,{label:"Instance Type",controlId:"formFieldId3",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"content",options:ge,onChange:u})}),Object(y.jsx)(J.a,{label:"Instance count",controlId:"formFieldId3",children:Object(y.jsx)(oe.a,{value:"1",children:" "})}),Object(y.jsx)(J.a,{label:"Max concurrent transforms",controlId:"formFieldId3",children:Object(y.jsx)(oe.a,{value:"1",children:" "})})]}),Object(y.jsxs)(ae.a,{header:"Input configuration",children:[Object(y.jsx)(J.a,{label:"Data type",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"data",options:de,onChange:u})}),Object(y.jsx)(J.a,{label:"S3 input path",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId2",placeholder:"S3Uri"})}),Object(y.jsx)(J.a,{label:"Content type",controlId:"formFieldId3",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"content",options:be,onChange:u})})]}),Object(y.jsx)(ae.a,{header:"Output configuration",children:Object(y.jsx)(J.a,{label:"S3 output path",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId2",placeholder:"S3Uri"})})}),Object(y.jsx)(J.a,{controlId:"button",children:Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{children:"Cancel"}),Object(y.jsx)(Q.a,{variant:"primary",children:"Start"})]})})]})},pe=n(1407),je=n(1405),fe=n(30),Oe=n(18),ve=n.n(Oe),xe=(n(1185),n(51));!function(e){e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT",e.TOP_RIGHT="TOP_RIGHT",e.TOP_LEFT="TOP_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.CENTER="CENTER"}(a||(a={})),function(e){e.LOAD_LABEL_NAMES="LOAD_LABEL_NAMES",e.UPDATE_LABEL="UPDATE_LABEL",e.SUGGEST_LABEL_NAMES="SUGGEST_LABEL_NAMES",e.IMPORT_IMAGES="IMPORT_IMAGES",e.LOAD_AI_MODEL="LOAD_AI_MODEL",e.EXPORT_ANNOTATIONS="EXPORT_ANNOTATIONS",e.IMPORT_ANNOTATIONS="IMPORT_ANNOTATIONS",e.INSERT_LABEL_NAMES="INSERT_LABEL_NAMES",e.EXIT_PROJECT="EXIT_PROJECT",e.LOADER="LOADER"}(i||(i={}));var ye,Ie=Object(V.a)((function e(){Object(U.a)(this,e)}));Ie.GITHUB_URL="https://github.com/SkalskiP",Ie.MEDIUM_URL="https://medium.com/@piotr.skalski92",Ie.PATREON_URL="https://www.patreon.com/make_sense",Ie.TOP_NAVIGATION_BAR_HEIGHT_PX=35,Ie.EDITOR_BOTTOM_NAVIGATION_BAR_HEIGHT_PX=41,Ie.EDITOR_TOP_NAVIGATION_BAR_HEIGHT_PX=41,Ie.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX=24,Ie.SIDE_NAVIGATION_BAR_WIDTH_OPEN_PX=Ie.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX+300+1,Ie.TOOLKIT_TAB_HEIGHT_PX=40,Ie.TOOLBOX_PANEL_WIDTH_PX=51,Ie.EDITOR_MIN_WIDTH=900,Ie.EDITOR_MIN_HEIGHT=500,Ie.PRIMARY_COLOR="#2af598",Ie.SECONDARY_COLOR="#009efd",Ie.DARK_THEME_FIRST_COLOR="#171717",Ie.DARK_THEME_SECOND_COLOR="#282828",Ie.DARK_THEME_THIRD_COLOR="#4c4c4c",Ie.DARK_THEME_FORTH_COLOR="#262c2f",Ie.CROSS_HAIR_THICKNESS_PX=1,Ie.CROSS_HAIR_COLOR="#fff",Ie.RESIZE_HANDLE_DIMENSION_PX=8,Ie.RESIZE_HANDLE_HOVER_DIMENSION_PX=16,Ie.CLOSEABLE_POPUPS=[i.IMPORT_IMAGES,i.EXPORT_ANNOTATIONS,i.IMPORT_ANNOTATIONS,i.EXIT_PROJECT,i.UPDATE_LABEL],Ie.LABEL_COLORS_PALETTE=["#ff3838","#ff9d97","#ff701f","#ffb21d","#cff231","#48f90a","#92cc17","#3ddb86","#1a9334","#00d4bb","#2c99a8","#00c2ff","#344593","#6473ff","#0018ec","#8438ff","#520085","#cb38ff","#ff95c8","#ff37c7"],function(e){e.IMAGE_RECOGNITION="IMAGE RECOGNITION",e.POINT="POINT",e.RECT="RECT",e.POLYGON="POLYGON",e.LINE="LINE"}(ye||(ye={}));var Ce=n(123),Ae=n.n(Ce),Pe=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"calculateGridSize",value:function(e,t,n){var a=Math.floor(e.width/t.width);return{width:a,height:Math.ceil(n/a)}}},{key:"calculateContentSize",value:function(e,t,n){var a={width:t.width*n.width,height:t.height*n.height};return{width:Math.max(e.width,a.width),height:a.height}}},{key:"calculateAnchorPoints",value:function(t,n,a){for(var i=e.calculateGridSize(t,n,a),o=(e.calculateContentSize(t,n,i).width-i.width*n.width)/(i.width+1),r=[],l=0;l<a;l++){var c=Math.floor(l/i.width),s={x:c*o+l%i.width*n.width,y:c*n.height};r.push(s)}return r}}]),e}(),Ee=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"snapValueToRange",value:function(e,t,n){return e<t?t:e>n?n:e}},{key:"isValueInRange",value:function(e,t,n){return e>=t&&e<=n}}]),e}(),Le=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getRatio",value:function(e){return e?e.width/e.height:null}},{key:"intersect",value:function(e,t){return e&&t?!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y):null}},{key:"isPointInside",value:function(e,t){return e&&t?e.x<t.x&&e.x+e.width>t.x&&e.y<t.y&&e.y+e.height>t.y:null}},{key:"getRectWithCenterAndSize",value:function(e,t){return Object(s.a)({x:e.x-.5*t.width,y:e.y-.5*t.height},t)}},{key:"fitInsideRectWithRatio",value:function(t,n){if(e.getRatio(t)<n){var a=t.width/n;return{x:t.x,y:t.y+(t.height-a)/2,width:t.width,height:a}}var i=t.height*n;return{x:t.x+(t.width-i)/2,y:t.y,width:i,height:t.height}}},{key:"resizeRect",value:function(e,t,n){var i=Object(s.a)({},e);switch(t){case a.RIGHT:i.width+=n.x;break;case a.BOTTOM_RIGHT:i.width+=n.x,i.height+=n.y;break;case a.BOTTOM:i.height+=n.y;break;case a.TOP_RIGHT:i.width+=n.x,i.y+=n.y,i.height-=n.y;break;case a.TOP:i.y+=n.y,i.height-=n.y;break;case a.TOP_LEFT:i.x+=n.x,i.width-=n.x,i.y+=n.y,i.height-=n.y;break;case a.LEFT:i.x+=n.x,i.width-=n.x;break;case a.BOTTOM_LEFT:i.x+=n.x,i.width-=n.x,i.height+=n.y}return i.width<0&&(i.x=i.x+i.width,i.width=-i.width),i.height<0&&(i.y=i.y+i.height,i.height=-i.height),i}},{key:"translate",value:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{x:e.x+t.x,y:e.y+t.y})}},{key:"expand",value:function(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width+2*t.x,height:e.height+2*t.y}}},{key:"scaleRect",value:function(e,t){return{x:e.x*t,y:e.y*t,width:e.width*t,height:e.height*t}}},{key:"mapRectToAnchors",value:function(e){return[{type:a.TOP_LEFT,position:{x:e.x,y:e.y}},{type:a.TOP,position:{x:e.x+.5*e.width,y:e.y}},{type:a.TOP_RIGHT,position:{x:e.x+e.width,y:e.y}},{type:a.LEFT,position:{x:e.x,y:e.y+.5*e.height}},{type:a.RIGHT,position:{x:e.x+e.width,y:e.y+.5*e.height}},{type:a.BOTTOM_LEFT,position:{x:e.x,y:e.y+e.height}},{type:a.BOTTOM,position:{x:e.x+.5*e.width,y:e.y+e.height}},{type:a.BOTTOM_RIGHT,position:{x:e.x+e.width,y:e.y+e.height}}]}},{key:"snapPointToRect",value:function(t,n){return e.isPointInside(n,t)?t:{x:Ee.snapValueToRange(t.x,n.x,n.x+n.width),y:Ee.snapValueToRange(t.y,n.y,n.y+n.height)}}},{key:"getCenter",value:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getSize",value:function(e){return{width:e.width,height:e.height}}}]),e}(),Te=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).gridSize=void 0,a.contentSize=void 0,a.childAnchors=void 0,a.scrollbars=void 0,a.calculate=function(e,t,n){a.gridSize=Pe.calculateGridSize(e,t,n),a.contentSize=Pe.calculateContentSize(e,t,a.gridSize),a.childAnchors=Pe.calculateAnchorPoints(e,t,n)},a.getVirtualListStyle=function(){return{position:"relative",width:a.props.size.width,height:a.props.size.height}},a.getVirtualListContentStyle=function(){return{width:a.contentSize.width,height:a.contentSize.height}},a.onScrollStart=function(){a.setState({isScrolling:!0})},a.onScrollStop=function(){a.setState({isScrolling:!1})},a.onScroll=function(e){a.setState({viewportRect:{x:e.scrollLeft,y:e.scrollTop,width:a.props.size.width,height:a.props.size.height}})},a.getChildren=function(){var e=a.state,t=e.viewportRect,n=e.isScrolling,i=a.props,o=i.overScanHeight,r=i.childSize,l=o||0,c={x:t.x,y:t.y-l,width:t.width,height:t.height+2*l};return a.childAnchors.reduce((function(e,t,i){var o=Object.assign(t,r),l=Le.intersect(c,o);if(l){var s={position:"absolute",left:t.x,top:t.y,width:r.width,height:r.height};return e.concat(a.props.childRender(i,n,l,s))}return e}),[])},a.state={viewportRect:null,isScrolling:!1},a}return Object(V.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.size,n=e.childSize,a=e.childCount;this.calculate(t,n,a),this.setState({viewportRect:{x:0,y:0,width:this.props.size.width,height:this.props.size.height}})}},{key:"componentWillUpdate",value:function(e,t,n){var a=e.size,i=e.childSize,o=e.childCount;this.props.size.height===a.height&&this.props.size.width===a.width&&this.props.childCount===o||(this.calculate(a,i,o),this.setState({viewportRect:{x:this.scrollbars.getValues().scrollLeft,y:this.scrollbars.getValues().scrollTop,width:a.width,height:a.height}}))}},{key:"render",value:function(){var e=this,t=!!this.props.size&&!!this.props.childSize&&!!this.gridSize;return Object(y.jsx)("div",{className:"VirtualList",style:this.getVirtualListStyle(),children:Object(y.jsx)(Ae.a,{ref:function(t){return e.scrollbars=t},onScrollFrame:this.onScroll,onScrollStart:this.onScrollStart,onScrollStop:this.onScrollStop,autoHide:!0,children:t&&Object(y.jsx)("div",{className:"VirtualListContent",style:this.getVirtualListContentStyle(),children:this.getChildren()})})})}}]),n}(r.a.Component),we=n(38),Se=n.n(we),Re=n(375),De=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"add",value:function(t){e.queue.push(Object(fe.a)(ve.a.mark((function e(){return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))}},{key:"run",value:function(){setTimeout((function(){return e.runQueue()}),10)}},{key:"addAndRun",value:function(t){e.add(t),e.run()}},{key:"runQueue",value:function(){var t=Object(fe.a)(ve.a.mark((function t(){return ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isRunning){t.next=5;break}return e.isRunning=!0,t.next=4,e.runTasks();case 4:e.isRunning=!1;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"runTasks",value:function(){var t=Object(fe.a)(ve.a.mark((function t(){var n;return ve.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.queue.length>0)){t.next=6;break}return n=e.queue.shift(),t.next=4,n();case 4:t.next=0;break;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),e}();De.queue=[],De.isRunning=!1;var ke,_e=n(26),Ne=n(42),Me=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"storeImage",value:function(t,n){e.repository[t]=n}},{key:"storeImages",value:function(t,n){Object(Ne.zip)(t,n).forEach((function(t){e.storeImage.apply(e,Object(_e.a)(t))}))}},{key:"getById",value:function(t){return e.repository[t]}}]),e}();function Be(e){return{type:ke.UPDATE_ACTIVE_IMAGE_INDEX,payload:{activeImageIndex:e}}}function Fe(e){return{type:ke.UPDATE_ACTIVE_LABEL_NAME_ID,payload:{activeLabelNameId:e}}}function Ue(e){return{type:ke.UPDATE_ACTIVE_LABEL_ID,payload:{activeLabelId:e}}}function Ve(e){return{type:ke.UPDATE_HIGHLIGHTED_LABEL_ID,payload:{highlightedLabelId:e}}}function ze(e){return{type:ke.UPDATE_ACTIVE_LABEL_TYPE,payload:{activeLabelType:e}}}function He(e,t){return{type:ke.UPDATE_IMAGE_DATA_BY_ID,payload:{id:e,newImageData:t}}}function Ge(e){return{type:ke.ADD_IMAGES_DATA,payload:{imageData:e}}}function We(e){return{type:ke.UPDATE_IMAGES_DATA,payload:{imageData:e}}}function Ye(e){return{type:ke.UPDATE_LABEL_NAMES,payload:{labels:e}}}function Ze(e){return{type:ke.UPDATE_FIRST_LABEL_CREATED_FLAG,payload:{firstLabelCreatedFlag:e}}}Me.repository={},function(e){e.UPDATE_SUGGESTED_LABEL_LIST="@@UPDATE_SUGGESTED_LABEL_LIST",e.UPDATE_REJECTED_SUGGESTED_LABEL_LIST="@@UPDATE_REJECTED_SUGGESTED_LABEL_LIST",e.UPDATE_OBJECT_DETECTOR_STATUS="@@UPDATE_OBJECT_DETECTOR_STATUS",e.UPDATE_POSE_DETECTOR_STATUS="@@UPDATE_POSE_DETECTOR_STATUS",e.UPDATE_DISABLED_AI_FLAG="@@UPDATE_DISABLED_AI_FLAG",e.UPDATE_PROJECT_DATA="@@UPDATE_PROJECT_DATA",e.UPDATE_WINDOW_SIZE="@@UPDATE_WINDOW_SIZE",e.UPDATE_ACTIVE_POPUP_TYPE="@@UPDATE_ACTIVE_POPUP_TYPE",e.UPDATE_CUSTOM_CURSOR_STYLE="@@UPDATE_CUSTOM_CURSOR_STYLE",e.UPDATE_CONTEXT="@@UPDATE_CONTEXT",e.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS="@@UPDATE_PREVENT_CUSTOM_CURSOR_STATUS",e.UPDATE_IMAGE_DRAG_MODE_STATUS="@@UPDATE_IMAGE_DRAG_MODE_STATUS",e.UPDATE_CROSS_HAIR_VISIBLE_STATUS="@@UPDATE_CROSS_HAIR_VISIBLE_STATUS",e.UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS="@@UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS",e.UPDATE_ZOOM="@@UPDATE_ZOOM",e.UPDATE_ACTIVE_IMAGE_INDEX="@@UPDATE_ACTIVE_IMAGE_INDEX",e.UPDATE_IMAGE_DATA_BY_ID="@@UPDATE_IMAGE_DATA_BY_ID",e.ADD_IMAGES_DATA="@@ADD_IMAGES_DATA",e.UPDATE_IMAGES_DATA="@@UPDATE_IMAGES_DATA",e.UPDATE_ACTIVE_LABEL_NAME_ID="@@UPDATE_ACTIVE_LABEL_NAME_ID",e.UPDATE_ACTIVE_LABEL_TYPE="@@UPDATE_ACTIVE_LABEL_TYPE",e.UPDATE_ACTIVE_LABEL_ID="@@UPDATE_ACTIVE_LABEL_ID",e.UPDATE_HIGHLIGHTED_LABEL_ID="@@UPDATE_HIGHLIGHTED_LABEL_ID",e.UPDATE_LABEL_NAMES="@@UPDATE_LABEL_NAMES",e.UPDATE_FIRST_LABEL_CREATED_FLAG="@@UPDATE_FIRST_LABEL_CREATED_FLAG",e.SUBMIT_NEW_NOTIFICATION="@@SUBMIT_NEW_NOTIFICATION",e.DELETE_NOTIFICATION_BY_ID="@@DELETE_NOTIFICATION_BY_ID"}(ke||(ke={}));var Xe,Ke=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"loadImage",value:function(e){return new Promise((function(t,n){var a=URL.createObjectURL(e),i=new Image;i.src=a,i.onload=function(){return t(i)},i.onerror=n}))}},{key:"loadImages",value:function(t){return new Promise((function(n,a){var i=t.map((function(t){return e.loadImage(t)}));Promise.all(i).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))}},{key:"readFile",value:function(e){return new Promise((function(t,n){var a=new FileReader;a.onloadend=function(e){t(e.target.result)},a.onerror=n,a.readAsText(e)}))}},{key:"readFiles",value:function(t){return new Promise((function(n,a){var i=t.map((function(t){return e.readFile(t)}));Promise.all(i).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))}},{key:"extractFileExtension",value:function(e){var t=e.split(".");return t.length>1?t[t.length-1]:null}},{key:"extractFileName",value:function(e){var t,n=e.split("."),a="",i=Object(D.a)(Array(n.length-1).keys());try{for(i.s();!(t=i.n()).done;){var o=t.value;a+=""===a?n[o]:"."+n[o]}}catch(r){i.e(r)}finally{i.f()}return a}}]),e}(),Je=(n(1199),function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getSuggestedLabelList",value:function(){return Lo.getState().ai.suggestedLabelList}},{key:"getRejectedSuggestedLabelList",value:function(){return Lo.getState().ai.rejectedSuggestedLabelList}},{key:"isAIObjectDetectorModelLoaded",value:function(){return Lo.getState().ai.isObjectDetectorLoaded}},{key:"isAIPoseDetectorModelLoaded",value:function(){return Lo.getState().ai.isPoseDetectorLoaded}},{key:"isAIDisabled",value:function(){return Lo.getState().ai.isAIDisabled}}]),e}()),qe=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getLeadingColor",value:function(){return Je.isAIObjectDetectorModelLoaded()||Je.isAIPoseDetectorModelLoaded()?Ie.PRIMARY_COLOR:Ie.SECONDARY_COLOR}}]),e}(),Qe=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).isLoading=!1,a.loadImage=function(){var e=Object(fe.a)(ve.a.mark((function e(t,n){var i,o;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadStatus?(i=Me.getById(t.id),a.state.image!==i&&a.setState({image:i})):n&&a.isLoading||(a.isLoading=!0,o=function(e){return a.saveLoadedImage(e,t)},Ke.loadImage(t.fileData).then((function(e){return o(e)})).catch((function(e){return a.handleLoadImageError()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.saveLoadedImage=function(e,t){t.loadStatus=!0,a.props.updateImageDataById(t.id,t),Me.storeImage(t.id,e),t.id===a.props.imageData.id&&(a.setState({image:e}),a.isLoading=!1)},a.getStyle=function(){var e=a.props.size,t={x:.15*e.width,y:.15*e.height,width:.7*e.width,height:.7*e.height},n={x:0,y:0,width:a.state.image.width,height:a.state.image.height},i=Le.getRatio(n),o=Le.fitInsideRectWithRatio(t,i);return{width:o.width,height:o.height,left:o.x,top:o.y}},a.handleLoadImageError=function(){},a.getClassName=function(){return Se()("ImagePreview",{selected:a.props.isSelected})},a.state={image:null},a}return Object(V.a)(n,[{key:"componentDidMount",value:function(){De.addAndRun(this.loadImage(this.props.imageData,this.props.isScrolling))}},{key:"componentWillUpdate",value:function(e,t,n){this.props.imageData.id!==e.imageData.id&&(e.imageData.loadStatus?De.addAndRun(this.loadImage(e.imageData,e.isScrolling)):this.setState({image:null})),this.props.isScrolling&&!e.isScrolling&&De.addAndRun(this.loadImage(e.imageData,!1))}},{key:"shouldComponentUpdate",value:function(e,t,n){return this.props.imageData.id!==e.imageData.id||this.state.image!==t.image||this.props.isSelected!==e.isSelected||this.props.isChecked!==e.isChecked}},{key:"render",value:function(){var e=this.props,t=e.isChecked,n=e.style,a=e.onClick;return Object(y.jsx)("div",{className:this.getClassName(),style:n,onClick:a||void 0,children:this.state.image?[Object(y.jsxs)("div",{className:"Foreground",style:this.getStyle(),children:[Object(y.jsx)("img",{className:"Image",draggable:!1,src:this.state.image.src,alt:this.state.image.alt,style:Object(s.a)(Object(s.a)({},this.getStyle()),{},{left:0,top:0})}),t&&Object(y.jsx)("img",{className:"CheckBox",draggable:!1,src:"/ico/ok.png",alt:"checkbox"})]},"Foreground"),Object(y.jsx)("div",{className:"Background",style:this.getStyle()},"Background")]:Object(y.jsx)(Re.ClipLoader,{size:30,color:qe.getLeadingColor(),loading:!0})})}}]),n}(r.a.Component),$e={updateImageDataById:He},et=Object(xe.b)((function(e){return{}}),$e)(Qe);n(1225);function tt(e){return{type:ke.UPDATE_ACTIVE_POPUP_TYPE,payload:{activePopupType:e}}}function nt(e){return{type:ke.UPDATE_CUSTOM_CURSOR_STYLE,payload:{customCursorStyle:e}}}function at(e){return{type:ke.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS,payload:{preventCustomCursor:e}}}function it(e){return{type:ke.UPDATE_PROJECT_DATA,payload:{projectData:e}}}!function(e){e.EDITOR="EDITOR",e.LEFT_NAVBAR="LEFT_NAVBAR",e.RIGHT_NAVBAR="RIGHT_NAVBAR",e.POPUP="POPUP",e.DROPDOWN="DROPDOWN"}(Xe||(Xe={}));var ot=Object(V.a)((function e(){Object(U.a)(this,e)}));ot.editor=void 0,ot.canvas=void 0,ot.mousePositionIndicator=void 0,ot.cursor=void 0,ot.viewPortScrollbars=void 0,ot.image=void 0,ot.primaryRenderingEngine=void 0,ot.supportRenderingEngine=void 0,ot.viewPortHelper=void 0,ot.isLoading=!1,ot.viewPortActionsDisabled=!1,ot.mousePositionOnViewPortContent=void 0,ot.viewPortSize=void 0,ot.defaultRenderImageRect=void 0;var rt,lt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"deg2rad",value:function(e){return e*Math.PI/180}},{key:"rad2deg",value:function(e){return 180*e/Math.PI}}]),e}(),ct=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"clearCanvas",value:function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}},{key:"drawLine",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#111111",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=e.getContext("2d");o.save(),o.strokeStyle=a,o.lineWidth=i,o.lineCap="round",o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(n.x+1,n.y+1),o.stroke(),o.restore()}},{key:"drawRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.getContext("2d");i.save(),i.strokeStyle=n,i.lineWidth=a,i.beginPath(),i.rect(t.x,t.y,t.width,t.height),i.stroke(),i.restore()}},{key:"drawRectWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",a=e.getContext("2d");a.save(),a.fillStyle=n,a.beginPath(),a.rect(t.x,t.y,t.width,t.height),a.fill(),a.restore()}},{key:"shadeEverythingButRect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(0, 0, 0, 0.7)",a=e.getContext("2d");a.save(),a.fillStyle=n,a.fillRect(0,0,e.width,e.height),a.globalCompositeOperation="destination-out",a.fillRect(t.x,t.y,t.width,t.height),a.restore()}},{key:"drawCircleWithFill",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ffffff",i=e.getContext("2d");i.save();var o=lt.deg2rad(0),r=lt.deg2rad(360);i.fillStyle=a,i.beginPath(),i.arc(t.x,t.y,n,o,r,!1),i.fill(),i.restore()}},{key:"drawCircle",value:function(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#ffffff",l=e.getContext("2d"),c=lt.deg2rad(a),s=lt.deg2rad(i);l.save(),l.strokeStyle=r,l.lineWidth=o,l.beginPath(),l.arc(t.x,t.y,n,c,s,!1),l.stroke(),l.restore()}},{key:"drawPolygon",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.getContext("2d");i.save(),i.strokeStyle=n,i.lineWidth=a,i.beginPath(),i.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)i.lineTo(t[o].x,t[o].y);i.closePath(),i.stroke(),i.restore()}},{key:"drawPolygonWithFill",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#fff",a=e.getContext("2d");a.save(),a.fillStyle=n,a.beginPath(),a.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i++)a.lineTo(t[i].x,t[i].y);a.closePath(),a.fill(),a.restore()}},{key:"drawText",value:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ffffff",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"center",l=e.getContext("2d");l.save(),l.fillStyle=i,l.textAlign=r,l.textBaseline="middle",l.font=(o?"bold ":"")+n+"px Arial",l.fillText(t,a.x,a.y),l.restore()}},{key:"hexToRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return null!==t?"rgba("+n+", "+a+", "+i+", "+t+")":"rgb("+n+", "+a+", "+i+")"}}]),e}(),st=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"equals",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"add",value:function(e,t){return{x:e.x+t.x,y:e.y+t.y}}},{key:"subtract",value:function(e,t){return{x:e.x-t.x,y:e.y-t.y}}},{key:"multiply",value:function(e,t){return{x:e.x*t,y:e.y*t}}}]),e}(),ut=Object(V.a)((function e(){Object(U.a)(this,e)}));ut.LINE_THICKNESS=2,ut.lineActiveColor=Ie.PRIMARY_COLOR,ut.defaultLineColor="#ffffff",ut.CROSS_HAIR_LINE_COLOR="#ffffff",ut.crossHairPadding=25,ut.anchorSize={width:Ie.RESIZE_HANDLE_DIMENSION_PX,height:Ie.RESIZE_HANDLE_DIMENSION_PX},ut.anchorHoverSize={width:Ie.RESIZE_HANDLE_HOVER_DIMENSION_PX,height:Ie.RESIZE_HANDLE_HOVER_DIMENSION_PX},ut.suggestedAnchorDetectionSize={width:100,height:100},ut.defaultAnchorColor="#ffffff",ut.inactiveAnchorColor=Ie.DARK_THEME_SECOND_COLOR,ut.DEFAULT_ANCHOR_COLOR="#ffffff",ut.ACTIVE_ANCHOR_COLOR=Ie.SECONDARY_COLOR,ut.INACTIVE_ANCHOR_COLOR=Ie.DARK_THEME_SECOND_COLOR,ut.DEFAULT_LINE_COLOR="#ffffff",ut.ACTIVE_LINE_COLOR=Ie.PRIMARY_COLOR,ut.INACTIVE_LINE_COLOR="#ffffff",function(e){e.DEFAULT="DEFAULT",e.MOVE="MOVE",e.RESIZE="RESIZE",e.ADD="ADD",e.CANCEL="CANCEL",e.CLOSE="CLOSE",e.GRAB="GRAB",e.GRABBING="GRABBING"}(rt||(rt={}));var dt,bt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getLabelNames",value:function(){return Lo.getState().labels.labels}},{key:"getLabelNameById",value:function(t){var n=e.getLabelNames();return Object(Ne.find)(n,{id:t})}},{key:"getActiveLabelNameId",value:function(){return Lo.getState().labels.activeLabelNameId}},{key:"getActiveLabelType",value:function(){return Lo.getState().labels.activeLabelType}},{key:"getImagesData",value:function(){return Lo.getState().labels.imagesData}},{key:"getActiveImageIndex",value:function(){return Lo.getState().labels.activeImageIndex}},{key:"getActiveImageData",value:function(){var t=e.getActiveImageIndex();return null===t?null:e.getImageDataByIndex(t)}},{key:"getImageDataByIndex",value:function(t){return e.getImagesData()[t]}},{key:"getImageDataById",value:function(t){var n=e.getImagesData();return Object(Ne.find)(n,{id:t})}},{key:"getActiveLabelId",value:function(){return Lo.getState().labels.activeLabelId}},{key:"getHighlightedLabelId",value:function(){return Lo.getState().labels.highlightedLabelId}},{key:"getActiveRectLabel",value:function(){var t=e.getActiveLabelId();return null===t?null:Object(Ne.find)(e.getActiveImageData().labelRects,{id:t})}},{key:"getActivePointLabel",value:function(){var t=e.getActiveLabelId();return null===t?null:Object(Ne.find)(e.getActiveImageData().labelPoints,{id:t})}},{key:"getActivePolygonLabel",value:function(){var t=e.getActiveLabelId();return null===t?null:Object(Ne.find)(e.getActiveImageData().labelPolygons,{id:t})}},{key:"getActiveLineLabel",value:function(){var t=e.getActiveLabelId();return null===t?null:Object(Ne.find)(e.getActiveImageData().labelLines,{id:t})}}]),e}();!function(e){e.RESIZE="resize",e.MOUSE_UP="mouseup",e.MOUSE_DOWN="mousedown",e.MOUSE_MOVE="mousemove",e.MOUSE_WHEEL="wheel",e.KEY_DOWN="keydown",e.KEY_PRESS="keypress",e.KEY_UP="keyup",e.FOCUS="focus"}(dt||(dt={}));var ht,gt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getEventType",value:function(e){if(!e)return null;switch(e.type){case dt.MOUSE_DOWN:return dt.MOUSE_DOWN;case dt.MOUSE_UP:return dt.MOUSE_UP;case dt.MOUSE_MOVE:return dt.MOUSE_MOVE;default:return null}}}]),e}(),mt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getActivePopupType",value:function(){return Lo.getState().general.activePopupType}},{key:"getActiveContext",value:function(){return Lo.getState().general.activeContext}},{key:"getPreventCustomCursorStatus",value:function(){return Lo.getState().general.preventCustomCursor}},{key:"getImageDragModeStatus",value:function(){return Lo.getState().general.imageDragMode}},{key:"getCrossHairVisibleStatus",value:function(){return Lo.getState().general.crossHairVisible}},{key:"getCustomCursorStyle",value:function(){return Lo.getState().general.customCursorStyle}},{key:"getProjectName",value:function(){return Lo.getState().general.projectData.name}},{key:"getProjectType",value:function(){return Lo.getState().general.projectData.type}},{key:"getZoom",value:function(){return Lo.getState().general.zoom}},{key:"getEnablePerClassColorationStatus",value:function(){return Lo.getState().general.enablePerClassColoration}}]),e}(),pt=function(){function e(t){Object(U.a)(this,e),this.canvas=void 0,this.labelType=void 0,this.canvas=t}return Object(V.a)(e,[{key:"update",value:function(e){if(e.event)switch(gt.getEventType(e.event)){case dt.MOUSE_MOVE:this.mouseMoveHandler(e);break;case dt.MOUSE_UP:this.mouseUpHandler(e);break;case dt.MOUSE_DOWN:this.mouseDownHandler(e)}}}],[{key:"resolveLabelLineColor",value:function(e,t){if(mt.getEnablePerClassColorationStatus()){var n=bt.getLabelNameById(e);return n?n.color:ut.DEFAULT_LINE_COLOR}return t?ut.ACTIVE_LINE_COLOR:ut.INACTIVE_LINE_COLOR}},{key:"resolveLabelAnchorColor",value:function(e){return mt.getEnablePerClassColorationStatus()?ut.DEFAULT_ANCHOR_COLOR:e?ut.ACTIVE_ANCHOR_COLOR:ut.INACTIVE_ANCHOR_COLOR}}]),e}(),jt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getDistanceFromLine",value:function(e,t){return e.start.x!==e.end.x||e.start.y!==e.end.y?Math.abs((e.end.y-e.start.y)*t.x-(e.end.x-e.start.x)*t.y+e.end.x*e.start.y-e.end.y*e.start.x)/Math.sqrt(Math.pow(e.end.y-e.start.y,2)+Math.pow(e.end.x-e.start.x,2)):null}},{key:"getCenter",value:function(e){return{x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2}}},{key:"getPoints",value:function(e){return[e.start,e.end]}}]),e}(),ft=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"calculateImageScale",value:function(e){return e.realImageSize.width/e.viewPortContentImageRect.width}},{key:"isMouseOverImage",value:function(e){return Le.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)}},{key:"isMouseOverCanvas",value:function(e){return Le.isPointInside(Object(s.a)({x:0,y:0},e.viewPortContentSize),e.mousePositionOnViewPortContent)}},{key:"transferPointFromImageToViewPortContent",value:function(t,n){var a=e.calculateImageScale(n);return st.add(st.multiply(t,1/a),n.viewPortContentImageRect)}},{key:"transferPolygonFromImageToViewPortContent",value:function(t,n){return t.map((function(t){return e.transferPointFromImageToViewPortContent(t,n)}))}},{key:"transferLineFromImageToViewPortContent",value:function(t,n){return{start:e.transferPointFromImageToViewPortContent(t.start,n),end:e.transferPointFromImageToViewPortContent(t.end,n)}}},{key:"transferPointFromViewPortContentToImage",value:function(t,n){var a=e.calculateImageScale(n);return st.multiply(st.subtract(t,n.viewPortContentImageRect),a)}},{key:"transferPolygonFromViewPortContentToImage",value:function(t,n){return t.map((function(t){return e.transferPointFromViewPortContentToImage(t,n)}))}},{key:"transferLineFromViewPortContentToImage",value:function(t,n){return{start:e.transferPointFromViewPortContentToImage(t.start,n),end:e.transferPointFromViewPortContentToImage(t.end,n)}}},{key:"transferRectFromViewPortContentToImage",value:function(t,n){var a=e.calculateImageScale(n);return Le.translate(Le.scaleRect(t,1/a),n.viewPortContentImageRect)}},{key:"transferRectFromImageToViewPortContent",value:function(t,n){var a=e.calculateImageScale(n),i={x:-n.viewPortContentImageRect.x,y:-n.viewPortContentImageRect.y};return Le.scaleRect(Le.translate(t,i),a)}},{key:"wrapDefaultCursorStyleInCancel",value:function(e){Le.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)?Lo.dispatch(nt(rt.DEFAULT)):Lo.dispatch(nt(rt.CANCEL))}},{key:"setValueBetweenPixels",value:function(e){return Math.floor(e)+.5}},{key:"setPointBetweenPixels",value:function(t){return{x:e.setValueBetweenPixels(t.x),y:e.setValueBetweenPixels(t.y)}}},{key:"setRectBetweenPixels",value:function(t){var n={x:t.x,y:t.y},a={x:t.x+t.width,y:t.y+t.height},i=e.setPointBetweenPixels(n),o=e.setPointBetweenPixels(a);return{x:i.x,y:i.y,width:o.x-i.x,height:o.y-i.y}}},{key:"isMouseOverLine",value:function(e,t,n){var a=Math.min(t.start.x,t.end.x),i=Math.max(t.start.x,t.end.x),o=Math.min(t.start.y,t.end.y),r=Math.max(t.start.y,t.end.y);return a-n<=e.x&&i+n>=e.x&&o-n<=e.y&&r+n>=e.y&&jt.getDistanceFromLine(t,e)<n}},{key:"isMouseOverAnchor",value:function(e,t,n){return e&&t?Le.isPointInside(Le.getRectWithCenterAndSize(t,n),e):null}}]),e}();!function(e){e.ACCEPTED="ACCEPTED",e.REJECTED="REJECTED",e.UNDECIDED="UNDECIDED"}(ht||(ht={}));var Ot=n(649),vt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"createLabelName",value:function(e){return{id:Object(Ot.a)(),name:e,color:Object(Ne.sample)(Ie.LABEL_COLORS_PALETTE)}}},{key:"createLabelRect",value:function(e,t){return{id:Object(Ot.a)(),labelId:e,rect:t,isCreatedByAI:!1,status:ht.ACCEPTED,suggestedLabel:null}}},{key:"createLabelPolygon",value:function(e,t){return{id:Object(Ot.a)(),labelId:e,vertices:t}}},{key:"labelNamesIdsDiff",value:function(e,t){return e.reduce((function(e,n){return Object(Ne.find)(t,{id:n.id})||e.push(n.id),e}),[])}}]),e}(),xt=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).startCreateRectPoint=void 0,a.startResizeRectAnchor=void 0,a.mouseDownHandler=function(e){var t=ft.isMouseOverImage(e);if(ft.isMouseOverCanvas(e)){var n=a.getRectUnderMouse(e);if(n){var i=a.calculateRectRelativeToActiveImage(n.rect,e),o=a.getAnchorUnderMouseByRect(i,e.mousePositionOnViewPortContent,e.viewPortContentImageRect);o&&n.status===ht.ACCEPTED?(Lo.dispatch(Ue(n.id)),a.startRectResize(o)):bt.getHighlightedLabelId()?Lo.dispatch(Ue(bt.getHighlightedLabelId())):a.startRectCreation(e.mousePositionOnViewPortContent)}else t&&a.startRectCreation(e.mousePositionOnViewPortContent)}},a.mouseUpHandler=function(e){if(e.viewPortContentImageRect){var t=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),n=bt.getActiveRectLabel();if(a.startCreateRectPoint&&!st.equals(a.startCreateRectPoint,t)){var i=Math.min(a.startCreateRectPoint.x,t.x),o=Math.min(a.startCreateRectPoint.y,t.y),r={x:i,y:o,width:Math.max(a.startCreateRectPoint.x,t.x)-i,height:Math.max(a.startCreateRectPoint.y,t.y)-o};a.addRectLabel(ft.transferRectFromImageToViewPortContent(r,e))}if(a.startResizeRectAnchor&&n){var l=a.calculateRectRelativeToActiveImage(n.rect,e),c=st.add(a.startResizeRectAnchor.position,e.viewPortContentImageRect),u=st.subtract(t,c),d=Le.resizeRect(l,a.startResizeRectAnchor.type,u),b=ft.calculateImageScale(e),h=Le.scaleRect(d,b),g=bt.getActiveImageData();g.labelRects=g.labelRects.map((function(e){return e.id===n.id?Object(s.a)(Object(s.a)({},e),{},{rect:h}):e})),Lo.dispatch(He(g.id,g))}}a.endRectTransformation()},a.mouseMoveHandler=function(e){if(e.viewPortContentImageRect&&e.mousePositionOnViewPortContent&&(ft.isMouseOverImage(e)&&!a.startResizeRectAnchor)){var t=a.getRectUnderMouse(e);t&&!a.isInProgress()?bt.getHighlightedLabelId()!==t.id&&Lo.dispatch(Ve(t.id)):null!==bt.getHighlightedLabelId()&&Lo.dispatch(Ve(null))}},a.addRectLabel=function(e){var t=bt.getActiveLabelNameId(),n=bt.getActiveImageData(),a=vt.createLabelRect(t,e);n.labelRects.push(a),Lo.dispatch(He(n.id,n)),Lo.dispatch(Ze(!0)),Lo.dispatch(Ue(a.id))},a.labelType=ye.RECT,a}return Object(V.a)(n,[{key:"render",value:function(e){var t=this,n=bt.getActiveLabelId(),a=bt.getActiveImageData();a&&(a.labelRects.forEach((function(a){a.status===ht.ACCEPTED&&a.id===n?t.drawActiveRect(a,e):t.drawInactiveRect(a,e)})),this.drawCurrentlyCreatedRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),this.updateCursorStyle(e))}},{key:"drawCurrentlyCreatedRect",value:function(e,t){if(this.startCreateRectPoint){var n=Le.snapPointToRect(e,t),a={x:this.startCreateRectPoint.x,y:this.startCreateRectPoint.y,width:n.x-this.startCreateRectPoint.x,height:n.y-this.startCreateRectPoint.y},i=ft.setRectBetweenPixels(a),o=pt.resolveLabelLineColor(null,!0);ct.drawRect(this.canvas,i,o,ut.LINE_THICKNESS)}}},{key:"drawInactiveRect",value:function(e,t){var n=ft.transferRectFromViewPortContentToImage(e.rect,t),a=bt.getHighlightedLabelId(),i=e.status===ht.ACCEPTED&&e.id===a,o=pt.resolveLabelLineColor(e.labelId,i),r=pt.resolveLabelAnchorColor(i);this.renderRect(n,i,o,r)}},{key:"drawActiveRect",value:function(e,t){var n=this.calculateRectRelativeToActiveImage(e.rect,t);if(this.startResizeRectAnchor){var a=st.add(this.startResizeRectAnchor.position,t.viewPortContentImageRect),i=Le.snapPointToRect(t.mousePositionOnViewPortContent,t.viewPortContentImageRect),o=st.subtract(i,a);n=Le.resizeRect(n,this.startResizeRectAnchor.type,o)}var r=Le.translate(n,t.viewPortContentImageRect),l=pt.resolveLabelLineColor(e.labelId,!0),c=pt.resolveLabelAnchorColor(!0);this.renderRect(r,!0,l,c)}},{key:"renderRect",value:function(e,t,n,a){var i=this,o=ft.setRectBetweenPixels(e);(ct.drawRectWithFill(this.canvas,o,ct.hexToRGB(n,.2)),ct.drawRect(this.canvas,o,n,ut.LINE_THICKNESS),t)&&Le.mapRectToAnchors(e).map((function(e){return e.position})).forEach((function(e){var t=Le.getRectWithCenterAndSize(e,ut.anchorSize),n=ft.setRectBetweenPixels(t);ct.drawRectWithFill(i.canvas,n,a)}))}},{key:"updateCursorStyle",value:function(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!mt.getImageDragModeStatus()){var t=this.getRectUnderMouse(e);if(this.getAnchorUnderMouse(e)&&t&&t.status===ht.ACCEPTED||this.startResizeRectAnchor)return void Lo.dispatch(nt(rt.MOVE));ft.isMouseOverCanvas(e)?(!ft.isMouseOverImage(e)&&this.startCreateRectPoint?Lo.dispatch(nt(rt.MOVE)):ft.wrapDefaultCursorStyleInCancel(e),this.canvas.style.cursor="none"):this.canvas.style.cursor="default"}}},{key:"isInProgress",value:function(){return!!this.startCreateRectPoint||!!this.startResizeRectAnchor}},{key:"calculateRectRelativeToActiveImage",value:function(e,t){var n=ft.calculateImageScale(t);return Le.scaleRect(e,1/n)}},{key:"getRectUnderMouse",value:function(e){var t=bt.getActiveRectLabel();if(t&&this.isMouseOverRectEdges(t.rect,e))return t;for(var n=bt.getActiveImageData().labelRects,a=0;a<n.length;a++)if(this.isMouseOverRectEdges(n[a].rect,e))return n[a];return null}},{key:"isMouseOverRectEdges",value:function(e,t){var n=Le.translate(this.calculateRectRelativeToActiveImage(e,t),t.viewPortContentImageRect),a={x:ut.anchorHoverSize.width/2,y:ut.anchorHoverSize.height/2},i=Le.expand(n,a),o={x:-ut.anchorHoverSize.width/2,y:-ut.anchorHoverSize.height/2},r=Le.expand(n,o);return Le.isPointInside(i,t.mousePositionOnViewPortContent)&&!Le.isPointInside(r,t.mousePositionOnViewPortContent)}},{key:"getAnchorUnderMouseByRect",value:function(e,t,n){for(var a=Le.mapRectToAnchors(e),i=0;i<a.length;i++){var o=Le.translate(Le.getRectWithCenterAndSize(a[i].position,ut.anchorHoverSize),n);if(t&&Le.isPointInside(o,t))return a[i]}return null}},{key:"getAnchorUnderMouse",value:function(e){for(var t=bt.getActiveImageData().labelRects,n=0;n<t.length;n++){var a=this.calculateRectRelativeToActiveImage(t[n].rect,e),i=this.getAnchorUnderMouseByRect(a,e.mousePositionOnViewPortContent,e.viewPortContentImageRect);if(i)return i}return null}},{key:"startRectCreation",value:function(e){this.startCreateRectPoint=e,Lo.dispatch(Ue(null)),_t.setViewPortActionsDisabledStatus(!0)}},{key:"startRectResize",value:function(e){this.startResizeRectAnchor=e,_t.setViewPortActionsDisabledStatus(!0)}},{key:"endRectTransformation",value:function(){this.startCreateRectPoint=null,this.startResizeRectAnchor=null,_t.setViewPortActionsDisabledStatus(!1)}}]),n}(pt),yt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getMousePositionOnCanvasFromEvent",value:function(e,t){if(t&&e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}return null}},{key:"getClientRect",value:function(e){if(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,width:t.width,height:t.height}}return null}},{key:"getSize",value:function(e){if(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height}}return null}}]),e}(),It=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).addPointLabel=function(e){var t=bt.getActiveLabelNameId(),n=bt.getActiveImageData(),a={id:Object(Ot.a)(),labelId:t,point:e,isCreatedByAI:!1,status:ht.ACCEPTED,suggestedLabel:null};n.labelPoints.push(a),Lo.dispatch(He(n.id,n)),Lo.dispatch(Ze(!0)),Lo.dispatch(Ue(a.id))},a.labelType=ye.POINT,a}return Object(V.a)(n,[{key:"mouseDownHandler",value:function(e){var t=ft.isMouseOverImage(e);if(ft.isMouseOverCanvas(e)){var n=this.getLabelPointUnderMouse(e.mousePositionOnViewPortContent,e);if(n){var a=ft.transferPointFromImageToViewPortContent(n.point,e),i=ft.setPointBetweenPixels(a),o=Le.getRectWithCenterAndSize(i,ut.anchorHoverSize);if(Le.isPointInside(o,e.mousePositionOnViewPortContent))return Lo.dispatch(Ue(n.id)),void _t.setViewPortActionsDisabledStatus(!0);Lo.dispatch(Ue(null));var r=ft.transferPointFromViewPortContentToImage(e.mousePositionOnViewPortContent,e);this.addPointLabel(r)}else if(t){var l=ft.transferPointFromViewPortContentToImage(e.mousePositionOnViewPortContent,e);this.addPointLabel(l)}}}},{key:"mouseUpHandler",value:function(e){if(this.isInProgress()){var t=bt.getActivePointLabel(),n=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=ft.transferPointFromViewPortContentToImage(n,e),i=bt.getActiveImageData();i.labelPoints=i.labelPoints.map((function(e){return e.id===t.id?Object(s.a)(Object(s.a)({},e),{},{point:a}):e})),Lo.dispatch(He(i.id,i))}_t.setViewPortActionsDisabledStatus(!1)}},{key:"mouseMoveHandler",value:function(e){if(ft.isMouseOverImage(e)){var t=this.getLabelPointUnderMouse(e.mousePositionOnViewPortContent,e);t?bt.getHighlightedLabelId()!==t.id&&Lo.dispatch(Ve(t.id)):null!==bt.getHighlightedLabelId()&&Lo.dispatch(Ve(null))}}},{key:"render",value:function(e){var t=this,n=bt.getActiveLabelId(),a=bt.getHighlightedLabelId(),i=bt.getActiveImageData();i&&i.labelPoints.forEach((function(i){if(i.id===n)if(t.isInProgress()){var o=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),r=ft.setPointBetweenPixels(o),l=pt.resolveLabelAnchorColor(!0);ct.drawCircleWithFill(t.canvas,r,Ie.RESIZE_HANDLE_DIMENSION_PX/2,l)}else t.renderPoint(i,!0,e);else t.renderPoint(i,i.id===n||i.id===a,e)})),this.updateCursorStyle(e)}},{key:"renderPoint",value:function(e,t,n){var a=ft.transferPointFromImageToViewPortContent(e.point,n),i=ft.setPointBetweenPixels(a),o=pt.resolveLabelAnchorColor(t);ct.drawCircleWithFill(this.canvas,i,Ie.RESIZE_HANDLE_DIMENSION_PX/2,o)}},{key:"updateCursorStyle",value:function(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!mt.getImageDragModeStatus()){var t=this.getLabelPointUnderMouse(e.mousePositionOnViewPortContent,e);if(t&&t.status===ht.ACCEPTED){var n=ft.transferPointFromImageToViewPortContent(t.point,e),a=ft.setPointBetweenPixels(n),i=Le.getRectWithCenterAndSize(a,ut.anchorHoverSize);if(Le.isPointInside(i,e.mousePositionOnViewPortContent))return void Lo.dispatch(nt(rt.MOVE))}else if(this.isInProgress())return void Lo.dispatch(nt(rt.MOVE));Le.isPointInside(Object(s.a)({x:0,y:0},yt.getSize(this.canvas)),e.mousePositionOnViewPortContent)?(ft.wrapDefaultCursorStyleInCancel(e),this.canvas.style.cursor="none"):this.canvas.style.cursor="default"}}},{key:"isInProgress",value:function(){return ot.viewPortActionsDisabled}},{key:"getLabelPointUnderMouse",value:function(e,t){for(var n=bt.getActiveImageData().labelPoints,a=0;a<n.length;a++){var i=ft.transferPointFromImageToViewPortContent(n[a].point,t),o=Le.getRectWithCenterAndSize(i,ut.anchorHoverSize);if(Le.isPointInside(o,e))return n[a]}return null}}]),n}(pt),Ct=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).activePath=[],a.resizeAnchorIndex=null,a.suggestedAnchorPositionOnCanvas=null,a.suggestedAnchorIndexInPolygon=null,a.labelType=ye.POLYGON,a}return Object(V.a)(n,[{key:"update",value:function(e){if(e.event)switch(gt.getEventType(e.event)){case dt.MOUSE_MOVE:this.mouseMoveHandler(e);break;case dt.MOUSE_UP:this.mouseUpHandler(e);break;case dt.MOUSE_DOWN:this.mouseDownHandler(e)}}},{key:"mouseDownHandler",value:function(e){var t=this;if(ft.isMouseOverCanvas(e))if(this.isCreationInProgress()){ft.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.activePath[0],ut.anchorSize)?this.addLabelAndFinishCreation(e):this.updateActivelyCreatedLabel(e)}else{var n=this.getPolygonUnderMouse(e);if(n){var a=n.vertices.reduce((function(n,a,i){if(null===n){var o=ft.transferPointFromImageToViewPortContent(a,e);if(t.isMouseOverAnchor(e.mousePositionOnViewPortContent,o))return i}return n}),null);if(null!==a)this.startExistingLabelResize(e,n.id,a);else Lo.dispatch(Ue(n.id)),this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.suggestedAnchorPositionOnCanvas)&&this.addSuggestedAnchorToPolygonLabel(e)}else this.updateActivelyCreatedLabel(e)}}},{key:"mouseUpHandler",value:function(e){this.isResizeInProgress()&&this.endExistingLabelResize(e)}},{key:"mouseMoveHandler",value:function(e){if(e.viewPortContentImageRect&&e.mousePositionOnViewPortContent&&(ft.isMouseOverImage(e)&&!this.isCreationInProgress())){var t=this.getPolygonUnderMouse(e);if(t&&!this.isResizeInProgress()){bt.getHighlightedLabelId()!==t.id&&Lo.dispatch(Ve(t.id));for(var n=ft.transferPolygonFromImageToViewPortContent(t.vertices,e),a=this.mapPointsToLines(n.concat(n[0])),i=0;i<a.length;i++){if(ft.isMouseOverLine(e.mousePositionOnViewPortContent,a[i],ut.anchorHoverSize.width/2)){this.suggestedAnchorPositionOnCanvas=jt.getCenter(a[i]),this.suggestedAnchorIndexInPolygon=i+1;break}}}else null!==bt.getHighlightedLabelId()&&(Lo.dispatch(Ve(null)),this.discardSuggestedPoint())}}},{key:"render",value:function(e){bt.getActiveImageData()&&(this.drawExistingLabels(e),this.drawActivelyCreatedLabel(e),this.drawActivelyResizeLabel(e),this.updateCursorStyle(e),this.drawSuggestedAnchor(e))}},{key:"updateCursorStyle",value:function(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!mt.getImageDragModeStatus())if(ft.isMouseOverCanvas(e)){if(this.isCreationInProgress()){this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.activePath[0])&&this.activePath.length>2?Lo.dispatch(nt(rt.CLOSE)):Lo.dispatch(nt(rt.DEFAULT))}else{var t=this.getAnchorUnderMouse(e);this.isMouseOverAnchor(e.mousePositionOnViewPortContent,this.suggestedAnchorPositionOnCanvas)?Lo.dispatch(nt(rt.ADD)):this.isResizeInProgress()||t?Lo.dispatch(nt(rt.MOVE)):ft.wrapDefaultCursorStyleInCancel(e)}this.canvas.style.cursor="none"}else this.canvas.style.cursor="default"}},{key:"drawActivelyCreatedLabel",value:function(e){var t=this,n=this.activePath.map((function(e){return ft.setPointBetweenPixels(e)})),a=n.concat(e.mousePositionOnViewPortContent),i=this.mapPointsToLines(a),o=pt.resolveLabelLineColor(null,!0),r=pt.resolveLabelAnchorColor(!0);ct.drawPolygonWithFill(this.canvas,a,ct.hexToRGB(o,.2)),i.forEach((function(e){ct.drawLine(t.canvas,e.start,e.end,o,ut.LINE_THICKNESS)})),n.forEach((function(e){ct.drawCircleWithFill(t.canvas,e,Ie.RESIZE_HANDLE_DIMENSION_PX/2,r)}))}},{key:"drawActivelyResizeLabel",value:function(e){var t=this,n=bt.getActivePolygonLabel();if(n&&this.isResizeInProgress()){var a=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),i=n.vertices.map((function(n,i){return i===t.resizeAnchorIndex?a:ft.transferPointFromImageToViewPortContent(n,e)}));this.drawPolygon(n.labelId,i,!0)}}},{key:"drawExistingLabels",value:function(e){var t=this,n=bt.getActiveLabelId(),a=bt.getHighlightedLabelId();bt.getActiveImageData().labelPolygons.forEach((function(i){var o=i.id===n||i.id===a,r=ft.transferPolygonFromImageToViewPortContent(i.vertices,e);i.id===n&&t.isResizeInProgress()||t.drawPolygon(i.labelId,r,o)}))}},{key:"drawPolygon",value:function(e,t,n){var a=this,i=pt.resolveLabelLineColor(e,!0),o=pt.resolveLabelAnchorColor(!0),r=t.map((function(e){return ft.setPointBetweenPixels(e)}));n&&ct.drawPolygonWithFill(this.canvas,r,ct.hexToRGB(i,.2)),ct.drawPolygon(this.canvas,r,i,ut.LINE_THICKNESS),n&&r.forEach((function(e){ct.drawCircleWithFill(a.canvas,e,Ie.RESIZE_HANDLE_DIMENSION_PX/2,o)}))}},{key:"drawSuggestedAnchor",value:function(e){var t=pt.resolveLabelAnchorColor(!0);if(this.suggestedAnchorPositionOnCanvas){var n=Le.getRectWithCenterAndSize(this.suggestedAnchorPositionOnCanvas,ut.suggestedAnchorDetectionSize);Le.isPointInside(n,e.mousePositionOnViewPortContent)&&ct.drawCircleWithFill(this.canvas,this.suggestedAnchorPositionOnCanvas,Ie.RESIZE_HANDLE_DIMENSION_PX/2,t)}}},{key:"updateActivelyCreatedLabel",value:function(e){if(this.isCreationInProgress()){var t=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect);this.activePath.push(t)}else{Le.isPointInside(e.viewPortContentImageRect,e.mousePositionOnViewPortContent)&&(_t.setViewPortActionsDisabledStatus(!0),this.activePath.push(e.mousePositionOnViewPortContent),Lo.dispatch(Ue(null)))}}},{key:"cancelLabelCreation",value:function(){this.activePath=[],_t.setViewPortActionsDisabledStatus(!1)}},{key:"finishLabelCreation",value:function(){this.activePath=[],_t.setViewPortActionsDisabledStatus(!1)}},{key:"addLabelAndFinishCreation",value:function(e){if(this.isCreationInProgress()&&this.activePath.length>2){var t=ft.transferPolygonFromViewPortContentToImage(this.activePath,e);this.addPolygonLabel(t),this.finishLabelCreation()}}},{key:"addPolygonLabel",value:function(e){var t=bt.getActiveLabelNameId(),n=bt.getActiveImageData(),a=vt.createLabelPolygon(t,e);n.labelPolygons.push(a),Lo.dispatch(He(n.id,n)),Lo.dispatch(Ze(!0)),Lo.dispatch(Ue(a.id))}},{key:"startExistingLabelResize",value:function(e,t,n){Lo.dispatch(Ue(t)),this.resizeAnchorIndex=n,_t.setViewPortActionsDisabledStatus(!0)}},{key:"endExistingLabelResize",value:function(e){this.applyResizeToPolygonLabel(e),this.resizeAnchorIndex=null,_t.setViewPortActionsDisabledStatus(!1)}},{key:"applyResizeToPolygonLabel",value:function(e){var t=this,n=bt.getActiveImageData(),a=bt.getActivePolygonLabel();n.labelPolygons=n.labelPolygons.map((function(n){return n.id!==a.id?n:Object(s.a)(Object(s.a)({},n),{},{vertices:n.vertices.map((function(n,a){if(a!==t.resizeAnchorIndex)return n;var i=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect);return ft.transferPointFromViewPortContentToImage(i,e)}))})})),Lo.dispatch(He(n.id,n)),Lo.dispatch(Ue(a.id))}},{key:"discardSuggestedPoint",value:function(){this.suggestedAnchorIndexInPolygon=null,this.suggestedAnchorPositionOnCanvas=null}},{key:"addSuggestedAnchorToPolygonLabel",value:function(e){var t=this,n=bt.getActiveImageData(),a=bt.getActivePolygonLabel(),i=ft.transferPointFromViewPortContentToImage(this.suggestedAnchorPositionOnCanvas,e),o=Object(s.a)(Object(s.a)({},n),{},{labelPolygons:n.labelPolygons.map((function(e){return e.id!==a.id?e:Object(s.a)(Object(s.a)({},e),{},{vertices:(n=e.vertices,o=t.suggestedAnchorIndexInPolygon,r=i,[].concat(Object(_e.a)(n.slice(0,o)),[r],Object(_e.a)(n.slice(o))))});var n,o,r}))});Lo.dispatch(He(o.id,o)),this.startExistingLabelResize(e,a.id,this.suggestedAnchorIndexInPolygon),this.discardSuggestedPoint()}},{key:"isInProgress",value:function(){return this.isCreationInProgress()||this.isResizeInProgress()}},{key:"isCreationInProgress",value:function(){return null!==this.activePath&&0!==this.activePath.length}},{key:"isResizeInProgress",value:function(){return null!==this.resizeAnchorIndex}},{key:"isMouseOverAnchor",value:function(e,t){return e&&t?Le.isPointInside(Le.getRectWithCenterAndSize(t,ut.anchorSize),e):null}},{key:"mapPointsToLines",value:function(e){for(var t=[],n=0;n<e.length-1;n++)t.push({start:e[n],end:e[n+1]});return t}},{key:"getPolygonUnderMouse",value:function(e){for(var t=bt.getActiveImageData().labelPolygons,n=0;n<t.length;n++){for(var a=ft.transferPolygonFromImageToViewPortContent(t[n].vertices,e),i=this.mapPointsToLines(a.concat(a[0])),o=0;o<i.length;o++){if(ft.isMouseOverLine(e.mousePositionOnViewPortContent,i[o],ut.anchorHoverSize.width/2))return t[n]}for(var r=0;r<a.length;r++)if(this.isMouseOverAnchor(e.mousePositionOnViewPortContent,a[r]))return t[n]}return null}},{key:"getAnchorUnderMouse",value:function(e){for(var t=bt.getActiveImageData().labelPolygons,n=0;n<t.length;n++)for(var a=ft.transferPolygonFromImageToViewPortContent(t[n].vertices,e),i=0;i<a.length;i++)if(this.isMouseOverAnchor(e.mousePositionOnViewPortContent,a[i]))return a[i];return null}}]),n}(pt),At=Object(V.a)((function e(){Object(U.a)(this,e)}));At.CANVAS_MIN_MARGIN_PX=20,At.MIN_ZOOM=1,At.MAX_ZOOM=4,At.ZOOM_STEP=.1,At.TRANSLATION_STEP_PX=20;var Pt,Et=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getSize",value:function(e){return e?{width:e.width,height:e.height}:null}}]),e}(),Lt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"scale",value:function(e,t){return{width:e.width*t,height:e.height*t}}}]),e}(),Tt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"convertDirectionToVector",value:function(e){switch(e){case a.RIGHT:return{x:1,y:0};case a.LEFT:return{x:-1,y:0};case a.TOP:return{x:0,y:1};case a.BOTTOM:return{x:0,y:-1};case a.TOP_RIGHT:return{x:1,y:1};case a.TOP_LEFT:return{x:-1,y:1};case a.BOTTOM_RIGHT:return{x:1,y:-1};case a.BOTTOM_LEFT:return{x:-1,y:-1};case a.CENTER:return{x:0,y:0};default:return null}}}]),e}(),wt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"updateViewPortSize",value:function(){ot.editor&&(ot.viewPortSize={width:ot.editor.offsetWidth,height:ot.editor.offsetHeight})}},{key:"updateDefaultViewPortImageRect",value:function(){if(ot.viewPortSize&&ot.image){var e={x:At.CANVAS_MIN_MARGIN_PX,y:At.CANVAS_MIN_MARGIN_PX},t=Object(s.a)({x:0,y:0},Et.getSize(ot.image)),n=Object(s.a)({x:0,y:0},ot.viewPortSize),a=Le.expand(n,st.multiply(e,-1));ot.defaultRenderImageRect=Le.fitInsideRectWithRatio(a,Le.getRatio(t))}}},{key:"calculateViewPortContentSize",value:function(){if(ot.viewPortSize&&ot.image){var e=ot.defaultRenderImageRect,t=Lt.scale(ot.defaultRenderImageRect,mt.getZoom());return{width:t.width+2*e.x,height:t.height+2*e.y}}return null}},{key:"calculateViewPortContentImageRect",value:function(){if(ot.viewPortSize&&ot.image){var t=ot.defaultRenderImageRect,n=e.calculateViewPortContentSize();return Object(s.a)(Object(s.a)({},t),{},{width:n.width-2*t.x,height:n.height-2*t.y})}return null}},{key:"resizeCanvas",value:function(e){e&&ot.canvas&&(ot.canvas.width=e.width,ot.canvas.height=e.height)}},{key:"resizeViewPortContent",value:function(){var t=e.calculateViewPortContentSize();t&&e.resizeCanvas(t)}},{key:"calculateAbsoluteScrollPosition",value:function(t){var n=e.calculateViewPortContentSize(),a=ot.viewPortSize;return{x:t.x*(n.width-a.width),y:t.y*(n.height-a.height)}}},{key:"getRelativeScrollPosition",value:function(){if(ot.viewPortScrollbars){var e=ot.viewPortScrollbars.getValues();return{x:e.left,y:e.top}}return null}},{key:"getAbsoluteScrollPosition",value:function(){if(ot.viewPortScrollbars){var e=ot.viewPortScrollbars.getValues();return{x:e.scrollLeft,y:e.scrollTop}}return null}},{key:"setScrollPosition",value:function(e){ot.viewPortScrollbars.scrollLeft(e.x),ot.viewPortScrollbars.scrollTop(e.y)}},{key:"translateViewPortPosition",value:function(t){if(!ot.viewPortActionsDisabled&&mt.getZoom()!==At.MIN_ZOOM){var n=Tt.convertDirectionToVector(t),a=st.multiply(n,At.TRANSLATION_STEP_PX),i=e.getAbsoluteScrollPosition(),o=st.add(i,a);e.setScrollPosition(o),ot.mousePositionOnViewPortContent=st.add(ot.mousePositionOnViewPortContent,a),_t.fullRender()}}},{key:"zoomIn",value:function(){if(!ot.viewPortActionsDisabled){var t=mt.getZoom(),n=e.getRelativeScrollPosition(),a=1===t?{x:.5,y:.5}:n;e.setZoom(t+At.ZOOM_STEP),e.resizeViewPortContent(),e.setScrollPosition(e.calculateAbsoluteScrollPosition(a)),_t.fullRender()}}},{key:"zoomOut",value:function(){if(!ot.viewPortActionsDisabled){var t=mt.getZoom(),n=e.getRelativeScrollPosition();e.setZoom(t-At.ZOOM_STEP),e.resizeViewPortContent(),e.setScrollPosition(e.calculateAbsoluteScrollPosition(n)),_t.fullRender()}}},{key:"setDefaultZoom",value:function(){var t=e.getRelativeScrollPosition();e.setZoom(At.MIN_ZOOM),e.resizeViewPortContent(),e.setScrollPosition(e.calculateAbsoluteScrollPosition(t)),_t.fullRender()}},{key:"setOneForOneZoom",value:function(){var t=mt.getZoom(),n=e.getRelativeScrollPosition(),a=1===t?{x:.5,y:.5}:n,i=ot.image.width/ot.defaultRenderImageRect.width;e.setZoom(i),e.resizeViewPortContent(),e.setScrollPosition(e.calculateAbsoluteScrollPosition(a)),_t.fullRender()}},{key:"setZoom",value:function(e){var t,n=mt.getZoom();Ee.isValueInRange(e,At.MIN_ZOOM,At.MAX_ZOOM)&&e!==n&&Lo.dispatch((t=e,{type:ke.UPDATE_ZOOM,payload:{zoom:t}}))}}]),e}();!function(e){e.IMAGE_RECOGNITION="IMAGE_RECOGNITION",e.OBJECT_DETECTION="OBJECT_DETECTION"}(Pt||(Pt={}));var St,Rt=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){return Object(U.a)(this,n),t.call(this,e)}return Object(V.a)(n,[{key:"mouseMoveHandler",value:function(e){}},{key:"mouseDownHandler",value:function(e){}},{key:"mouseUpHandler",value:function(e){}},{key:"render",value:function(e){this.drawImage(ot.image,wt.calculateViewPortContentImageRect()),this.renderCrossHair(e)}},{key:"renderCrossHair",value:function(e){var t=this;if(this.shouldRenderCrossHair(e)){var n=ft.setPointBetweenPixels(e.mousePositionOnViewPortContent),a=function(e,n){ct.drawLine(t.canvas,e,n,ut.CROSS_HAIR_LINE_COLOR,2)};a({x:n.x,y:0},{x:n.x-1,y:n.y-ut.crossHairPadding}),a({x:n.x,y:n.y+ut.crossHairPadding},{x:n.x-1,y:e.viewPortContentSize.height}),a({x:0,y:n.y},{x:n.x-ut.crossHairPadding,y:n.y-1}),a({x:n.x+ut.crossHairPadding,y:n.y},{x:e.viewPortContentSize.width,y:n.y-1})}}},{key:"shouldRenderCrossHair",value:function(e){var t=mt.getCrossHairVisibleStatus(),n=mt.getImageDragModeStatus(),a=mt.getProjectType(),i=mt.getActivePopupType(),o=ft.isMouseOverCanvas(e),r=mt.getPreventCustomCursorStatus();return[!!this.canvas,t,!n,a!==Pt.IMAGE_RECOGNITION,!i,o,!r].every(Boolean)}},{key:"drawImage",value:function(e,t){e&&this.canvas&&this.canvas.getContext("2d").drawImage(e,t.x,t.y,t.width,t.height)}},{key:"isInProgress",value:function(){return!1}}]),n}(pt),Dt=function(){function e(){Object(U.a)(this,e),this.startScrollPosition=void 0,this.mouseStartPosition=void 0}return Object(V.a)(e,[{key:"update",value:function(e){if(e.event)switch(gt.getEventType(e.event)){case dt.MOUSE_MOVE:this.mouseMoveHandler(e);break;case dt.MOUSE_UP:this.mouseUpHandler(e);break;case dt.MOUSE_DOWN:this.mouseDownHandler(e)}}},{key:"mouseDownHandler",value:function(e){var t=e.event;this.startScrollPosition=e.absoluteViewPortContentScrollPosition,this.mouseStartPosition={x:t.screenX,y:t.screenY},Lo.dispatch(nt(rt.GRABBING)),ot.canvas.style.cursor="none"}},{key:"mouseUpHandler",value:function(e){this.startScrollPosition=null,this.mouseStartPosition=null,Lo.dispatch(nt(rt.GRAB)),ot.canvas.style.cursor="none"}},{key:"mouseMoveHandler",value:function(e){if(this.startScrollPosition&&this.mouseStartPosition){var t=e.event,n={x:t.screenX,y:t.screenY},a=st.subtract(n,this.mouseStartPosition),i=st.subtract(this.startScrollPosition,a);wt.setScrollPosition(i),Lo.dispatch(nt(rt.GRABBING))}else Lo.dispatch(nt(rt.GRAB));ot.canvas.style.cursor="none"}}]),e}();!function(e){e.START="START",e.END="END"}(St||(St={}));var kt=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).lineCreationStartPoint=void 0,a.lineUpdateAnchorType=void 0,a.startNewLabelCreation=function(e){a.lineCreationStartPoint=ft.setPointBetweenPixels(e.mousePositionOnViewPortContent),_t.setViewPortActionsDisabledStatus(!0)},a.finishNewLabelCreation=function(e){var t=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),n={start:a.lineCreationStartPoint,end:t},i=ft.transferLineFromViewPortContentToImage(n,e),o=bt.getActiveLabelNameId(),r=bt.getActiveImageData(),l={id:Object(Ot.a)(),labelId:o,line:i};r.labelLines.push(l),Lo.dispatch(He(r.id,r)),Lo.dispatch(Ze(!0)),Lo.dispatch(Ue(l.id)),a.lineCreationStartPoint=null,_t.setViewPortActionsDisabledStatus(!1)},a.labelType=ye.LINE,a}return Object(V.a)(n,[{key:"mouseDownHandler",value:function(e){var t=ft.isMouseOverImage(e),n=ft.isMouseOverCanvas(e),a=this.getAnchorTypeUnderMouse(e),i=this.getLineUnderMouse(e);if(n)if(a&&!this.isResizeInProgress()){var o=this.getLineUnderMouse(e);this.startExistingLabelUpdate(o.id,a)}else i?Lo.dispatch(Ue(i.id)):!this.isInProgress()&&t?this.startNewLabelCreation(e):this.isInProgress()&&this.finishNewLabelCreation(e)}},{key:"mouseUpHandler",value:function(e){this.isResizeInProgress()&&this.endExistingLabelUpdate(e)}},{key:"mouseMoveHandler",value:function(e){if(ft.isMouseOverImage(e)){var t=this.getLineUnderMouse(e);t?bt.getHighlightedLabelId()!==t.id&&Lo.dispatch(Ve(t.id)):null!==bt.getHighlightedLabelId()&&Lo.dispatch(Ve(null))}}},{key:"render",value:function(e){this.drawExistingLabels(e),this.drawActivelyCreatedLabel(e),this.drawActivelyResizeLabel(e),this.updateCursorStyle(e)}},{key:"drawExistingLabels",value:function(e){var t=this,n=bt.getActiveLabelId(),a=bt.getHighlightedLabelId();bt.getActiveImageData().labelLines.forEach((function(i){var o=i.id===n||i.id===a,r=ft.transferLineFromImageToViewPortContent(i.line,e);i.id===n&&t.isResizeInProgress()||t.drawLine(i.labelId,r,o)}))}},{key:"drawActivelyCreatedLabel",value:function(e){if(this.isInProgress()){var t={start:this.lineCreationStartPoint,end:e.mousePositionOnViewPortContent};ct.drawLine(this.canvas,t.start,t.end,ut.lineActiveColor,ut.LINE_THICKNESS),ct.drawCircleWithFill(this.canvas,this.lineCreationStartPoint,Ie.RESIZE_HANDLE_DIMENSION_PX/2,ut.defaultAnchorColor)}}},{key:"drawActivelyResizeLabel",value:function(e){var t=bt.getActiveLineLabel();if(t&&this.isResizeInProgress()){var n=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),a=ft.transferLineFromImageToViewPortContent(t.line,e),i={start:this.lineUpdateAnchorType===St.START?n:a.start,end:this.lineUpdateAnchorType===St.END?n:a.end};this.drawLine(t.labelId,i,!0)}}},{key:"updateCursorStyle",value:function(e){if(this.canvas&&e.mousePositionOnViewPortContent&&!mt.getImageDragModeStatus())if(ft.isMouseOverCanvas(e)){var t=this.getAnchorTypeUnderMouse(e);!this.isInProgress()&&t||this.isResizeInProgress()?Lo.dispatch(nt(rt.MOVE)):ft.wrapDefaultCursorStyleInCancel(e),this.canvas.style.cursor="none"}else this.canvas.style.cursor="default"}},{key:"drawLine",value:function(e,t,n){var a=this,i=pt.resolveLabelLineColor(e,n),o=pt.resolveLabelAnchorColor(n),r={start:ft.setPointBetweenPixels(t.start),end:ft.setPointBetweenPixels(t.end)};ct.drawLine(this.canvas,r.start,r.end,i,ut.LINE_THICKNESS),n&&jt.getPoints(t).forEach((function(e){return ct.drawCircleWithFill(a.canvas,e,Ie.RESIZE_HANDLE_DIMENSION_PX/2,o)}))}},{key:"isInProgress",value:function(){return!!this.lineCreationStartPoint}},{key:"isResizeInProgress",value:function(){return!!this.lineUpdateAnchorType}},{key:"isMouseOverAnchor",value:function(e,t){return e&&t?Le.isPointInside(Le.getRectWithCenterAndSize(t,ut.anchorSize),e):null}},{key:"cancelLabelCreation",value:function(){this.lineCreationStartPoint=null,_t.setViewPortActionsDisabledStatus(!1)}},{key:"startExistingLabelUpdate",value:function(e,t){Lo.dispatch(Ue(e)),this.lineUpdateAnchorType=t,_t.setViewPortActionsDisabledStatus(!0)}},{key:"endExistingLabelUpdate",value:function(e){this.applyUpdateToLineLabel(e),this.lineUpdateAnchorType=null,_t.setViewPortActionsDisabledStatus(!1)}},{key:"applyUpdateToLineLabel",value:function(e){var t=this,n=bt.getActiveImageData(),a=bt.getActiveLineLabel();n.labelLines=n.labelLines.map((function(n){if(n.id!==a.id)return n;var i=Le.snapPointToRect(e.mousePositionOnViewPortContent,e.viewPortContentImageRect),o=ft.transferPointFromViewPortContentToImage(i,e);return Object(s.a)(Object(s.a)({},n),{},{line:{start:t.lineUpdateAnchorType===St.START?o:n.line.start,end:t.lineUpdateAnchorType===St.END?o:n.line.end}})})),Lo.dispatch(He(n.id,n)),Lo.dispatch(Ue(a.id))}},{key:"getLineUnderMouse",value:function(e){for(var t=bt.getActiveImageData().labelLines,n=0;n<t.length;n++){var a=ft.transferLineFromImageToViewPortContent(t[n].line,e);if(ft.isMouseOverLine(e.mousePositionOnViewPortContent,a,ut.anchorHoverSize.width/2))return t[n]}return null}},{key:"getAnchorTypeUnderMouse",value:function(e){for(var t=bt.getActiveImageData().labelLines,n=0;n<t.length;n++){var a=ft.transferLineFromImageToViewPortContent(t[n].line,e);if(this.isMouseOverAnchor(e.mousePositionOnViewPortContent,a.start))return St.START;if(this.isMouseOverAnchor(e.mousePositionOnViewPortContent,a.end))return St.END}return null}}]),n}(pt),_t=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"mountSupportRenderingEngine",value:function(e){switch(e){case ye.RECT:ot.supportRenderingEngine=new xt(ot.canvas);break;case ye.POINT:ot.supportRenderingEngine=new It(ot.canvas);break;case ye.LINE:ot.supportRenderingEngine=new kt(ot.canvas);break;case ye.POLYGON:ot.supportRenderingEngine=new Ct(ot.canvas);break;default:ot.supportRenderingEngine=null}}},{key:"swapSupportRenderingEngine",value:function(t){e.mountSupportRenderingEngine(t)}},{key:"mountRenderEnginesAndHelpers",value:function(t){ot.viewPortHelper=new Dt,ot.primaryRenderingEngine=new Rt(ot.canvas),e.mountSupportRenderingEngine(t)}},{key:"fullRender",value:function(){ct.clearCanvas(ot.canvas),ot.primaryRenderingEngine.render(e.getEditorData()),ot.supportRenderingEngine&&ot.supportRenderingEngine.render(e.getEditorData())}},{key:"setLoadingStatus",value:function(e){ot.isLoading=e}},{key:"setActiveImage",value:function(e){ot.image=e}},{key:"setViewPortActionsDisabledStatus",value:function(e){ot.viewPortActionsDisabled=e}},{key:"getEditorData",value:function(e){return{mousePositionOnViewPortContent:ot.mousePositionOnViewPortContent,viewPortContentSize:yt.getSize(ot.canvas),activeKeyCombo:Wt.getActiveCombo(),event:e,zoom:mt.getZoom(),viewPortSize:ot.viewPortSize,defaultRenderImageRect:ot.defaultRenderImageRect,viewPortContentImageRect:wt.calculateViewPortContentImageRect(),realImageSize:Et.getSize(ot.image),absoluteViewPortContentScrollPosition:wt.getAbsoluteScrollPosition()}}},{key:"updateMousePositionIndicator",value:function(e){if(!ot.image||!ot.canvas)return ot.mousePositionIndicator.style.display="none",void(ot.cursor.style.display="none");var t=yt.getMousePositionOnCanvasFromEvent(e,ot.canvas),n=wt.getAbsoluteScrollPosition(),a=wt.calculateViewPortContentImageRect(),i=st.subtract(t,n),o=Le.isPointInside(a,t);if(Le.isPointInside(Object(s.a)({x:0,y:0},ot.viewPortSize),i)&&!mt.getPreventCustomCursorStatus())if(ot.cursor.style.left=i.x+"px",ot.cursor.style.top=i.y+"px",ot.cursor.style.display="block",o&&![rt.GRAB,rt.GRABBING].includes(mt.getCustomCursorStyle())){var r=Et.getSize(ot.image).width/a.width,l=st.multiply(st.subtract(t,a),r),c="x: "+Math.round(l.x)+", y: "+Math.round(l.y);ot.mousePositionIndicator.innerHTML=c,ot.mousePositionIndicator.style.left=i.x+15+"px",ot.mousePositionIndicator.style.top=i.y+15+"px",ot.mousePositionIndicator.style.display="block"}else ot.mousePositionIndicator.style.display="none";else ot.cursor.style.display="none",ot.mousePositionIndicator.style.display="none"}}]),e}(),Nt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getActions",value:function(){return this.actions}}]),e}();Nt.actions=[];var Mt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getPreviousImage",value:function(){var t=bt.getActiveImageIndex();e.getImageByIndex(t-1)}},{key:"getNextImage",value:function(){var t=bt.getActiveImageIndex();e.getImageByIndex(t+1)}},{key:"getImageByIndex",value:function(e){if(!ot.viewPortActionsDisabled){var t=bt.getImagesData().length;e<0||e>t-1||(wt.setZoom(1),Lo.dispatch(Be(e)),Lo.dispatch(Ue(null)))}}},{key:"setActiveLabelOnActiveImage",value:function(t){var n=bt.getLabelNames();if(!(n.length<t+1)){var a=bt.getActiveImageData();Lo.dispatch(He(a.id,e.mapNewImageData(a,t))),Lo.dispatch(Fe(n[1].id))}}},{key:"mapNewImageData",value:function(e,t){var n=bt.getActiveLabelType(),a=bt.getLabelNames(),i=Object(s.a)({},e);switch(n){case ye.POINT:var o=bt.getActivePointLabel();i.labelPoints=e.labelPoints.map((function(e){return e.id===o.id?Object(s.a)(Object(s.a)({},e),{},{labelId:a[t].id,status:ht.ACCEPTED}):e})),Lo.dispatch(Ue(o.id));break;case ye.LINE:var r=bt.getActiveLineLabel();i.labelLines=e.labelLines.map((function(e){return e.id===r.id?Object(s.a)(Object(s.a)({},e),{},{labelId:a[t].id,status:ht.ACCEPTED}):e})),Lo.dispatch(Ue(r.id));break;case ye.RECT:var l=bt.getActiveRectLabel();i.labelRects=e.labelRects.map((function(e){return e.id===l.id?Object(s.a)(Object(s.a)({},e),{},{labelId:a[t].id,status:ht.ACCEPTED}):e})),Lo.dispatch(Ue(l.id));break;case ye.POLYGON:var c=bt.getActivePolygonLabel();i.labelPolygons=e.labelPolygons.map((function(e){return e.id===c.id?Object(s.a)(Object(s.a)({},e),{},{labelId:a[t].id,status:ht.ACCEPTED}):e})),Lo.dispatch(Ue(c.id));break;case ye.IMAGE_RECOGNITION:var u=a[t].id;e.labelNameIds.includes(u)?i.labelNameIds=Object(Ne.remove)(e.labelNameIds,(function(e){return e!==u})):i.labelNameIds=e.labelNameIds.concat(u)}return i}}]),e}(),Bt=n(820),Ft=n.n(Bt),Ut=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getMobileDeviceData",value:function(e){var t=new Ft.a(e);return{manufacturer:t.mobile(),browser:t.userAgent(),os:t.os()}}},{key:"isMac",value:function(e){return!!e.toLowerCase().match("mac")}},{key:"isSafari",value:function(e){return!!e.toLowerCase().match("safari")}},{key:"isFirefox",value:function(e){return!!e.toLowerCase().match("firefox")}}]),e}(),Vt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"deleteActiveLabel",value:function(){var t=bt.getActiveImageData(),n=bt.getActiveLabelId();e.deleteImageLabelById(t.id,n)}},{key:"deleteImageLabelById",value:function(t,n){switch(bt.getActiveLabelType()){case ye.POINT:e.deletePointLabelById(t,n);break;case ye.RECT:e.deleteRectLabelById(t,n);break;case ye.POLYGON:e.deletePolygonLabelById(t,n)}}},{key:"deleteRectLabelById",value:function(e,t){var n=bt.getImageDataById(e),a=Object(s.a)(Object(s.a)({},n),{},{labelRects:Object(Ne.filter)(n.labelRects,(function(e){return e.id!==t}))});Lo.dispatch(He(n.id,a))}},{key:"deletePointLabelById",value:function(e,t){var n=bt.getImageDataById(e),a=Object(s.a)(Object(s.a)({},n),{},{labelPoints:Object(Ne.filter)(n.labelPoints,(function(e){return e.id!==t}))});Lo.dispatch(He(n.id,a))}},{key:"deleteLineLabelById",value:function(e,t){var n=bt.getImageDataById(e),a=Object(s.a)(Object(s.a)({},n),{},{labelLines:Object(Ne.filter)(n.labelLines,(function(e){return e.id!==t}))});Lo.dispatch(He(n.id,a))}},{key:"deletePolygonLabelById",value:function(e,t){var n=bt.getImageDataById(e),a=Object(s.a)(Object(s.a)({},n),{},{labelPolygons:Object(Ne.filter)(n.labelPolygons,(function(e){return e.id!==t}))});Lo.dispatch(He(n.id,a))}},{key:"removeLabelNames",value:function(t){var n=bt.getImagesData().map((function(n){return e.removeLabelNamesFromImageData(n,t)}));Lo.dispatch(We(n))}},{key:"removeLabelNamesFromImageData",value:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{labelRects:e.labelRects.map((function(e){return t.includes(e.id)?Object(s.a)(Object(s.a)({},e),{},{id:null}):e})),labelPoints:e.labelPoints.map((function(e){return t.includes(e.id)?Object(s.a)(Object(s.a)({},e),{},{id:null}):e})),labelPolygons:e.labelPolygons.map((function(e){return t.includes(e.id)?Object(s.a)(Object(s.a)({},e),{},{id:null}):e})),labelNameIds:e.labelNameIds.filter((function(e){return!t.includes(e)}))})}},{key:"labelExistsInLabelNames",value:function(e){return bt.getLabelNames().map((function(e){return e.name})).includes(e)}}]),e}(),zt=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n)}(Nt);zt.actions=[{keyCombo:["Enter"],action:function(e){if(ot.supportRenderingEngine&&ot.supportRenderingEngine.labelType===ye.POLYGON){var t=_t.getEditorData();ot.supportRenderingEngine.addLabelAndFinishCreation(t)}_t.fullRender()}},{keyCombo:["Escape"],action:function(e){if(ot.supportRenderingEngine)switch(ot.supportRenderingEngine.labelType){case ye.POLYGON:case ye.LINE:ot.supportRenderingEngine.cancelLabelCreation()}_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","ArrowLeft"]:["Control","ArrowLeft"],action:function(e){Mt.getPreviousImage()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","ArrowRight"]:["Control","ArrowRight"],action:function(e){Mt.getNextImage()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","+"]:["Control","+"],action:function(e){wt.zoomIn()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","-"]:["Control","-"],action:function(e){wt.zoomOut()}},{keyCombo:["ArrowRight"],action:function(e){e.preventDefault(),wt.translateViewPortPosition(a.RIGHT)}},{keyCombo:["ArrowLeft"],action:function(e){e.preventDefault(),wt.translateViewPortPosition(a.LEFT)}},{keyCombo:["ArrowUp"],action:function(e){e.preventDefault(),wt.translateViewPortPosition(a.BOTTOM)}},{keyCombo:["ArrowDown"],action:function(e){e.preventDefault(),wt.translateViewPortPosition(a.TOP)}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Backspace"]:["Delete"],action:function(e){Vt.deleteActiveLabel()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","0"]:["Control","0"],action:function(e){Mt.setActiveLabelOnActiveImage(0),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","1"]:["Control","1"],action:function(e){Mt.setActiveLabelOnActiveImage(1),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","2"]:["Control","2"],action:function(e){Mt.setActiveLabelOnActiveImage(2),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","3"]:["Control","3"],action:function(e){Mt.setActiveLabelOnActiveImage(3),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","4"]:["Control","4"],action:function(e){Mt.setActiveLabelOnActiveImage(4),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","5"]:["Control","5"],action:function(e){Mt.setActiveLabelOnActiveImage(5),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","6"]:["Control","6"],action:function(e){Mt.setActiveLabelOnActiveImage(6),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","7"]:["Control","7"],action:function(e){Mt.setActiveLabelOnActiveImage(7),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","8"]:["Control","8"],action:function(e){Mt.setActiveLabelOnActiveImage(8),_t.fullRender()}},{keyCombo:Ut.isMac(window.navigator.userAgent)?["Alt","9"]:["Control","9"],action:function(e){Mt.setActiveLabelOnActiveImage(9),_t.fullRender()}}];var Ht=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"close",value:function(){Lo.dispatch(tt(null)),Wt.restoreCtx()}}]),e}(),Gt=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n)}(Nt);Gt.actions=[{keyCombo:["Escape"],action:function(e){var t=mt.getActivePopupType();Ie.CLOSEABLE_POPUPS.includes(t)&&Ht.close()}}];var Wt=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getActiveCombo",value:function(){return e.activeCombo}},{key:"init",value:function(){window.addEventListener(dt.KEY_DOWN,e.onDown),window.addEventListener(dt.KEY_UP,e.onUp),window.addEventListener(dt.FOCUS,e.onFocus)}},{key:"switchCtx",value:function(t){var n=mt.getActiveContext();n!==t&&(e.contextHistory.push(n),e.updateCtx(t))}},{key:"updateCtx",value:function(t){var n;switch(Lo.dispatch((n=t,{type:ke.UPDATE_CONTEXT,payload:{activeContext:n}})),t){case Xe.EDITOR:e.actions=zt.getActions();break;case Xe.POPUP:e.actions=Gt.getActions();break;default:e.actions=[]}}},{key:"restoreCtx",value:function(){e.updateCtx(e.contextHistory.pop())}},{key:"onDown",value:function(t){var n=e.getKeyCodeFromEvent(t);e.isInCombo(n)||e.addToCombo(n),e.execute(t)}},{key:"onUp",value:function(t){var n=e.getKeyCodeFromEvent(t);e.removeFromCombo(n)}},{key:"onFocus",value:function(){e.activeCombo=[]}},{key:"execute",value:function(t){for(var n=0;n<e.actions.length;n++){var a=e.actions[n];e.matchCombo(e.activeCombo,a.keyCombo)&&a.action(t)}}},{key:"isInCombo",value:function(t){return e.activeCombo.indexOf(t)>=0}},{key:"addToCombo",value:function(t){e.activeCombo.push(t)}},{key:"removeFromCombo",value:function(t){var n=e.activeCombo.indexOf(t);n>=0&&e.activeCombo.splice(n,1)}},{key:"getKeyCodeFromEvent",value:function(e){return e.key}},{key:"matchCombo",value:function(e,t){return Object(Ne.isEmpty)(Object(Ne.xor)(e,t))}}]),e}();Wt.activeCombo=[],Wt.actions=[],Wt.contextHistory=[];var Yt=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).imagesListRef=void 0,a.updateListSize=function(){if(a.imagesListRef){var e=a.imagesListRef.getBoundingClientRect();a.setState({size:{width:e.width,height:e.height}})}},a.isImageChecked=function(e){var t=a.props.imagesData[e];switch(a.props.activeLabelType){case ye.LINE:return t.labelLines.length>0;case ye.IMAGE_RECOGNITION:return t.labelNameIds.length>0;case ye.POINT:return t.labelPoints.filter((function(e){return e.status===ht.ACCEPTED})).length>0;case ye.POLYGON:return t.labelPolygons.length>0;case ye.RECT:return t.labelRects.filter((function(e){return e.status===ht.ACCEPTED})).length>0}},a.onClickHandler=function(e){Mt.getImageByIndex(e)},a.renderImagePreview=function(e,t,n,i){return Object(y.jsx)(et,{style:i,size:{width:150,height:150},isScrolling:t,isChecked:a.isImageChecked(e),imageData:a.props.imagesData[e],onClick:function(){return a.onClickHandler(e)},isSelected:a.props.activeImageIndex===e},e)},a.state={size:null},a}return Object(V.a)(n,[{key:"componentDidMount",value:function(){this.updateListSize(),window.addEventListener(dt.RESIZE,this.updateListSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener(dt.RESIZE,this.updateListSize)}},{key:"render",value:function(){var e=this,t=this.state.size;return Object(y.jsx)("div",{className:"ImagesList",ref:function(t){return e.imagesListRef=t},onClick:function(){return Wt.switchCtx(Xe.LEFT_NAVBAR)},children:!!t&&Object(y.jsx)(Te,{size:t,childSize:{width:150,height:150},childCount:this.props.imagesData.length,childRender:this.renderImagePreview,overScanHeight:200})})}}]),n}(r.a.Component),Zt=Object(xe.b)((function(e){return{activeImageIndex:e.labels.activeImageIndex,imagesData:e.labels.imagesData,activeLabelType:e.labels.activeLabelType}}),{})(Yt),Xt=(n(1226),[{labelType:ye.IMAGE_RECOGNITION,headerText:"Image recognition",imageSrc:"/ico/object.png",imageAlt:"object",projectType:Pt.IMAGE_RECOGNITION},{labelType:ye.RECT,headerText:"Rect",imageSrc:"/ico/rectangle.png",imageAlt:"rectangle",projectType:Pt.OBJECT_DETECTION},{labelType:ye.POINT,headerText:"Point",imageSrc:"/ico/point.png",imageAlt:"point",projectType:Pt.OBJECT_DETECTION},{labelType:ye.LINE,headerText:"Line",imageSrc:"/ico/line.png",imageAlt:"line",projectType:Pt.OBJECT_DETECTION},{labelType:ye.POLYGON,headerText:"Polygon",imageSrc:"/ico/polygon.png",imageAlt:"polygon",projectType:Pt.OBJECT_DETECTION}]),Kt=(n(1227),n(1228),n(1229),o.forwardRef((function(e,t){var n=e.buttonSize,a=e.padding,i=e.image,o=e.imageAlt,r=e.href,l=e.onClick,c=e.style,u=e.isActive,d=e.isDisabled,b=e.externalClassName,h=a||10,g=Object(s.a)(Object(s.a)({},c),{},{width:n.width,height:n.height}),m={maxWidth:n.width-h,maxHeight:n.height-h};return Object(y.jsxs)("div",{className:Se()("ImageButton",b,{active:u,disabled:d}),style:g,onClick:function(e){e.stopPropagation(),l&&l()},ref:t,children:[!!r&&Object(y.jsx)("a",{href:r,style:m,target:"_blank",rel:"noopener noreferrer",children:Object(y.jsx)("img",{draggable:!1,alt:o,src:i,style:m})}),!r&&Object(y.jsx)("img",{draggable:!1,alt:o,src:i,style:m})]})}))),Jt=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).dropdownOptionHeight=30,a.dropdownOptionCount=6,a.dropdownMargin=4,a.dropdownLabel=void 0,a.dropdown=void 0,a.openDropdown=function(){0===bt.getLabelNames().length?a.props.updateActivePopupType(i.UPDATE_LABEL):(a.setState({isOpen:!0}),window.addEventListener(dt.MOUSE_DOWN,a.closeDropdown))},a.closeDropdown=function(e){var t={x:e.clientX,y:e.clientY},n=a.dropdown.getBoundingClientRect(),i={x:n.left,y:n.top,width:n.width,height:n.height};Le.isPointInside(i,t)||(a.setState({isOpen:!1}),window.removeEventListener(dt.MOUSE_DOWN,a.closeDropdown))},a.getDropdownStyle=function(){var e=a.dropdownLabel.getBoundingClientRect(),t=Math.min(a.props.options.length,a.dropdownOptionCount)*a.dropdownOptionHeight,n={width:e.width,height:t,left:e.left};return 2*window.innerHeight/3<e.top?Object.assign(n,{top:e.top-a.dropdownMargin-t}):Object.assign(n,{top:e.bottom+a.dropdownMargin})},a.getDropdownOptions=function(){return a.props.options.map((function(e){return Object(y.jsx)("div",{className:"DropdownOption",style:{height:a.dropdownOptionHeight},onClick:function(t){return function(e,t){a.setState({isOpen:!1}),window.removeEventListener(dt.MOUSE_DOWN,a.closeDropdown),a.props.onSelectLabel(a.props.id,e),a.props.updateHighlightedLabelId(null),a.props.updateActiveLabelId(a.props.id),t.stopPropagation()}(e.id,t)},children:e.name},e.id)}))},a.mouseEnterHandler=function(){a.props.updateHighlightedLabelId(a.props.id)},a.mouseLeaveHandler=function(){a.props.updateHighlightedLabelId(null)},a.onClickHandler=function(){a.props.updateActiveLabelId(a.props.id)},a.state={animate:!1,isOpen:!1},a}return Object(V.a)(n,[{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame((function(){e.setState({animate:!0})}))}},{key:"getClassName",value:function(){return Se()("LabelInputField",{loaded:this.state.animate,active:this.props.isActive,highlighted:this.props.isHighlighted})}},{key:"render",value:function(){var e=this,t=this.props,n=t.size,a=t.id,i=t.value,o=t.onDelete;return Object(y.jsx)("div",{className:this.getClassName(),style:{width:n.width,height:n.height},onMouseEnter:this.mouseEnterHandler,onMouseLeave:this.mouseLeaveHandler,onClick:this.onClickHandler,children:Object(y.jsxs)("div",{className:"LabelInputFieldWrapper",style:{width:n.width,height:n.height},children:[Object(y.jsx)("div",{className:"Marker"}),Object(y.jsxs)("div",{className:"Content",children:[Object(y.jsxs)("div",{className:"ContentWrapper",children:[Object(y.jsx)("div",{className:"DropdownLabel",ref:function(t){return e.dropdownLabel=t},onClick:this.openDropdown,children:i?i.name:"Select label"}),this.state.isOpen&&Object(y.jsx)("div",{className:"Dropdown",style:this.getDropdownStyle(),ref:function(t){return e.dropdown=t},children:Object(y.jsx)(Ae.a,{renderTrackHorizontal:function(e){return Object(y.jsx)("div",Object(s.a)(Object(s.a)({},e),{},{className:"track-horizontal"}))},children:Object(y.jsx)("div",{children:this.getDropdownOptions()})})})]}),Object(y.jsx)("div",{className:"ContentWrapper",children:Object(y.jsx)(Kt,{externalClassName:"trash",image:"/ico/trash.png",imageAlt:"remove_rect",buttonSize:{width:30,height:30},onClick:function(){return o(a)}})})]})]})},a)}}]),n}(r.a.Component),qt={updateHighlightedLabelId:Ve,updateActiveLabelId:Ue,updateActivePopupType:tt},Qt=Object(xe.b)((function(e){return{}}),qt)(Jt),$t=(n(1230),Object(xe.b)((function(e){return{firstLabelCreatedFlag:e.labels.firstLabelCreatedFlag}}),{})((function(e){var t=e.firstLabelCreatedFlag,n=e.labelBefore,a=e.labelAfter,i=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{draggable:!1,alt:"lets_start",src:"/ico/rocket.png"}),Object(y.jsx)("p",{className:"extraBold",children:n})]}),o=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{draggable:!1,alt:"no_labels",src:"/ico/box-opened.png"}),Object(y.jsx)("p",{className:"extraBold",children:a})]});return Object(y.jsx)("div",{className:"EmptyLabelList",children:t?o:i})}))),en={updateImageDataById:He,updateActiveLabelNameId:Fe,updateActiveLabelId:Ue},tn=Object(xe.b)((function(e){return{activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}}),en)((function(e){var t=e.size,n=e.imageData,a=e.updateImageDataById,i=e.labelNames,o=e.updateActiveLabelNameId,r=e.activeLabelId,l=e.highlightedLabelId,c=e.updateActiveLabelId,u={width:t.width,height:t.height},d={width:t.width,height:40*n.labelRects.length},b=function(e){Vt.deleteRectLabelById(n.id,e)},h=function(e,t){var i=Object(s.a)(Object(s.a)({},n),{},{labelRects:n.labelRects.map((function(n){return n.id===e?Object(s.a)(Object(s.a)({},n),{},{labelId:t,status:ht.ACCEPTED}):n}))});a(n.id,i),o(t)};return Object(y.jsx)("div",{className:"RectLabelsList",style:u,onClickCapture:function(){c(null)},children:0===n.labelRects.filter((function(e){return e.status===ht.ACCEPTED})).length?Object(y.jsx)($t,{labelBefore:"draw your first bounding box",labelAfter:"no labels created for this image yet"}):Object(y.jsx)(Ae.a,{children:Object(y.jsx)("div",{className:"RectLabelsListContent",style:d,children:n.labelRects.filter((function(e){return e.status===ht.ACCEPTED})).map((function(e){return Object(y.jsx)(Qt,{size:{width:t.width,height:40},isActive:e.id===r,isHighlighted:e.id===l,id:e.id,onDelete:b,value:null!==e.labelId?Object(Ne.findLast)(i,{id:e.labelId}):null,options:i,onSelectLabel:h},e.id)}))})})})})),nn=(n(1231),{updateImageDataById:He,updateActiveLabelNameId:Fe,updateActiveLabelId:Ue}),an=Object(xe.b)((function(e){return{activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}}),nn)((function(e){var t=e.size,n=e.imageData,a=e.updateImageDataById,i=e.labelNames,o=e.updateActiveLabelNameId,r=e.activeLabelId,l=e.highlightedLabelId,c=e.updateActiveLabelId,u={width:t.width,height:t.height},d={width:t.width,height:40*n.labelPoints.length},b=function(e){Vt.deletePointLabelById(n.id,e)},h=function(e,t){var i=Object(s.a)(Object(s.a)({},n),{},{labelPoints:n.labelPoints.map((function(n){return n.id===e?Object(s.a)(Object(s.a)({},n),{},{labelId:t}):n}))});a(n.id,i),o(t)};return Object(y.jsx)("div",{className:"PointLabelsList",style:u,onClickCapture:function(){c(null)},children:0===n.labelPoints.filter((function(e){return e.status===ht.ACCEPTED})).length?Object(y.jsx)($t,{labelBefore:"mark your first point",labelAfter:"no labels created for this image yet"}):Object(y.jsx)(Ae.a,{children:Object(y.jsx)("div",{className:"PointLabelsListContent",style:d,children:n.labelPoints.filter((function(e){return e.status===ht.ACCEPTED})).map((function(e){return Object(y.jsx)(Qt,{size:{width:t.width,height:40},isActive:e.id===r,isHighlighted:e.id===l,id:e.id,onDelete:b,value:null!==e.labelId?Object(Ne.findLast)(i,{id:e.labelId}):null,options:i,onSelectLabel:h},e.id)}))})})})})),on=(n(1232),{updateImageDataById:He,updateActiveLabelNameId:Fe,updateActiveLabelId:Ue}),rn=Object(xe.b)((function(e){return{activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}}),on)((function(e){var t=e.size,n=e.imageData,a=e.updateImageDataById,i=e.labelNames,o=e.updateActiveLabelNameId,r=e.activeLabelId,l=e.highlightedLabelId,c=e.updateActiveLabelId,u={width:t.width,height:t.height},d={width:t.width,height:40*n.labelPolygons.length},b=function(e){Vt.deletePolygonLabelById(n.id,e)},h=function(e,t){var i=Object(s.a)(Object(s.a)({},n),{},{labelPolygons:n.labelPolygons.map((function(n){return n.id===e?Object(s.a)(Object(s.a)({},n),{},{labelId:t}):n}))});a(n.id,i),o(t)};return Object(y.jsx)("div",{className:"PolygonLabelsList",style:u,onClickCapture:function(){c(null)},children:0===n.labelPolygons.length?Object(y.jsx)($t,{labelBefore:"draw your first polygon",labelAfter:"no labels created for this image yet"}):Object(y.jsx)(Ae.a,{children:Object(y.jsx)("div",{className:"PolygonLabelsListContent",style:d,children:n.labelPolygons.map((function(e){return Object(y.jsx)(Qt,{size:{width:t.width,height:40},isActive:e.id===r,isHighlighted:e.id===l,id:e.id,onDelete:b,value:null!==e.labelId?Object(Ne.findLast)(i,{id:e.labelId}):null,options:i,onSelectLabel:h},e.id)}))})})})})),ln=(n(1233),{updateImageDataById:He,updateActiveLabelNameId:Fe,updateActiveLabelId:Ue}),cn=Object(xe.b)((function(e){return{activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId,labelNames:e.labels.labels}}),ln)((function(e){var t=e.size,n=e.imageData,a=e.updateImageDataById,i=e.labelNames,o=e.updateActiveLabelNameId,r=e.activeLabelId,l=e.highlightedLabelId,c=e.updateActiveLabelId,u={width:t.width,height:t.height},d={width:t.width,height:40*n.labelLines.length},b=function(e){Vt.deleteLineLabelById(n.id,e)},h=function(e,t){var i=Object(s.a)(Object(s.a)({},n),{},{labelLines:n.labelLines.map((function(n){return n.id===e?Object(s.a)(Object(s.a)({},n),{},{labelId:t}):n}))});a(n.id,i),o(t)};return Object(y.jsx)("div",{className:"LineLabelsList",style:u,onClickCapture:function(){c(null)},children:0===n.labelLines.length?Object(y.jsx)($t,{labelBefore:"draw your first line",labelAfter:"no labels created for this image yet"}):Object(y.jsx)(Ae.a,{children:Object(y.jsx)("div",{className:"LineLabelsListContent",style:d,children:n.labelLines.map((function(e){return Object(y.jsx)(Qt,{size:{width:t.width,height:40},isActive:e.id===r,isHighlighted:e.id===l,id:e.id,onDelete:b,value:null!==e.labelId?Object(Ne.findLast)(i,{id:e.labelId}):null,options:i,onSelectLabel:h},e.id)}))})})})})),sn=(n(1234),{updateImageDataById:He,updateActivePopupType:tt}),un=Object(xe.b)((function(e){return{labelNames:e.labels.labels}}),sn)((function(e){var t=e.size,n=e.imageData,a=e.updateImageDataById,o=e.labelNames,r=e.updateActivePopupType,l={width:t.width,height:t.height},c={width:t.width,height:40*n.labelPolygons.length},u=function(){r(i.UPDATE_LABEL)};return Object(y.jsx)("div",{className:"TagLabelsList",style:l,children:0===o.length?Object(y.jsxs)("div",{className:"EmptyLabelList",onClick:u,children:[Object(y.jsx)("img",{draggable:!1,alt:"upload",src:"/ico/type-writer.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Your label list is empty"})]},"empty-label-list"):Object(y.jsx)(Ae.a,{children:Object(y.jsx)("div",{className:"TagLabelsListContent",style:c,children:[].concat(Object(_e.a)(o.map((function(e){return Object(y.jsx)("div",{className:(t=e.id,Se()("TagItem",{active:n.labelNameIds.includes(t)})),onClickCapture:function(){return function(e){n.labelNameIds.includes(e)?a(n.id,Object(s.a)(Object(s.a)({},n),{},{labelNameIds:Object(Ne.remove)(n.labelNameIds,(function(t){return t!==e}))})):a(n.id,Object(s.a)(Object(s.a)({},n),{},{labelNameIds:n.labelNameIds.concat(e)}))}(e.id)},children:e.name},e.id);var t}))),[Object(y.jsx)(Kt,{image:"/ico/plus.png",imageAlt:"plus",buttonSize:{width:32,height:32},onClick:u})])},"tag-labels-list-content")})},"tag-labels-list")})),dn=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;Object(U.a)(this,n),(a=t.call(this,e)).labelsToolkitRef=void 0,a.tabs=void 0,a.updateToolkitSize=function(){if(a.labelsToolkitRef){var e=a.labelsToolkitRef.getBoundingClientRect();a.setState({size:{width:e.width,height:e.height}})}},a.headerClickHandler=function(e){a.props.updateActiveLabelType(e),a.props.updateActiveLabelId(null)},a.renderChildren=function(){var e=a.state.size,t=a.props,n=t.activeImageIndex,i=t.imagesData,o=t.activeLabelType;return a.tabs.reduce((function(t,r,l){var c=r===o,s=Object(Ne.find)(Xt,{labelType:r}),u=e.height-a.tabs.length*Ie.TOOLKIT_TAB_HEIGHT_PX,d=function(e){return Se()(e,{active:c})},b=Object(y.jsxs)("div",{className:d("Header"),onClick:function(){return a.headerClickHandler(r)},style:{height:Ie.TOOLKIT_TAB_HEIGHT_PX},children:[Object(y.jsx)("div",{className:"Marker"}),Object(y.jsxs)("div",{className:"HeaderGroupWrapper",children:[Object(y.jsx)("img",{draggable:!1,className:"Ico",src:s.imageSrc,alt:s.imageAlt}),s.headerText]}),Object(y.jsx)("div",{className:"HeaderGroupWrapper",children:Object(y.jsx)("img",{draggable:!1,className:"Arrow",src:"/ico/down.png",alt:"down_arrow"})})]},"Header_"+l),h=Object(y.jsxs)("div",{className:d("Content"),style:{height:c?u:0},children:[r===ye.RECT&&Object(y.jsx)(tn,{size:{width:e.width-20,height:u-20},imageData:i[n]}),r===ye.POINT&&Object(y.jsx)(an,{size:{width:e.width-20,height:u-20},imageData:i[n]}),r===ye.LINE&&Object(y.jsx)(cn,{size:{width:e.width-20,height:u-20},imageData:i[n]}),r===ye.POLYGON&&Object(y.jsx)(rn,{size:{width:e.width-20,height:u-20},imageData:i[n]}),r===ye.IMAGE_RECOGNITION&&Object(y.jsx)(un,{size:{width:e.width-20,height:u-20},imageData:i[n]})]},"Content_"+l);return t.push([b,h]),t}),[])},a.state={size:null},a.tabs=e.projectType===Pt.IMAGE_RECOGNITION?[ye.IMAGE_RECOGNITION]:[ye.RECT,ye.POINT,ye.LINE,ye.POLYGON];var i=e.activeLabelType?e.activeLabelType:a.tabs[0];return e.updateActiveLabelType(i),a}return Object(V.a)(n,[{key:"componentDidMount",value:function(){this.updateToolkitSize(),window.addEventListener(dt.RESIZE,this.updateToolkitSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener(dt.RESIZE,this.updateToolkitSize)}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{className:"LabelsToolkit",ref:function(t){return e.labelsToolkitRef=t},onClick:function(){return Wt.switchCtx(Xe.RIGHT_NAVBAR)},children:this.state.size&&this.renderChildren()})}}]),n}(r.a.Component),bn={updateImageDataById:He,updateActiveLabelType:ze,updateActiveLabelId:Ue},hn=Object(xe.b)((function(e){return{activeImageIndex:e.labels.activeImageIndex,activeLabelType:e.labels.activeLabelType,imagesData:e.labels.imagesData,projectType:e.general.projectData.type}}),bn)(dn),gn=(n(1235),function(e){var t=e.direction,n=e.isOpen,i=e.isWithContext,o=e.renderContent,r=e.renderCompanion;return Object(y.jsxs)("div",{className:Se()("SideNavigationBar",{left:t===a.LEFT,right:t===a.RIGHT,"with-context":i,closed:!n}),children:[Object(y.jsx)("div",{className:"CompanionBar",children:r&&r()}),n&&Object(y.jsx)("div",{className:"NavigationBarContentWrapper",children:o&&o()})]})}),mn=(n(1236),function(e){var t=e.key,n=e.label,a=e.onClick,i=e.style,o=e.isActive,r=e.isDisabled,l=e.image,c=e.imageAlt;return Object(y.jsxs)("div",{className:Se()("VerticalEditorButton",{active:o,disabled:r}),onClick:a||void 0,style:i,children:[l&&Object(y.jsx)("img",{draggable:!1,alt:c,src:l}),n]},t)}),pn=(n(1237),n(1238),Object(V.a)((function e(){Object(U.a)(this,e)})));pn.getIndicator=function(e){switch(e){case rt.ADD:return"/ico/plus.png";case rt.RESIZE:return"/ico/resize.png";case rt.CLOSE:return"/ico/close.png";case rt.MOVE:return"/ico/move.png";case rt.CANCEL:return"/ico/cancel.png";case rt.GRAB:return"/ico/hand-fill.png";case rt.GRABBING:return"/ico/hand-fill-grab.png";default:return null}},pn.getCursorStyle=function(e){return Se()("Cursor",{move:e===rt.MOVE,add:e===rt.ADD,resize:e===rt.RESIZE,close:e===rt.CLOSE,cancel:e===rt.CANCEL,grab:e===rt.GRAB,grabbing:e===rt.GRABBING})};var jn=Object(V.a)((function e(){Object(U.a)(this,e)}));jn.mobileDeviceData=void 0,jn.isMac=void 0,jn.isSafari=void 0,jn.isFirefox=void 0;n(1239);var fn={updatePreventCustomCursorStatus:at,updateImageDataById:He},On=Object(xe.b)((function(e){return{activeLabelId:e.labels.activeLabelId,highlightedLabelId:e.labels.highlightedLabelId}}),fn)((function(e){var t=e.position,n=e.updatePreventCustomCursorStatus,a=e.activeLabelId,i=e.highlightedLabelId,r=e.labelData,l=e.imageData,c=e.updateImageDataById,u=Object(o.useState)(!1),d=Object(L.a)(u,2),b=d[0],h=d[1],g=function(){return b||r.id===a||r.id===i};return Object(y.jsx)("div",{className:Se()("LabelControlPanel",{"is-active":g()}),style:{top:t.y,left:t.x},onMouseEnter:function(){n(!0),h(!0)},onMouseLeave:function(){n(!1),h(!1)},children:g()&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Kt,{image:"/ico/plus.png",imageAlt:"plus",buttonSize:{width:30,height:30},padding:15,onClick:function(){var e=Object(s.a)(Object(s.a)({},l),{},{labelRects:l.labelRects.map((function(e){if(e.id===r.id){var t=Object(Ne.findLast)(bt.getLabelNames(),{name:e.suggestedLabel});return Object(s.a)(Object(s.a)({},e),{},{status:ht.ACCEPTED,labelId:t?t.id:e.labelId})}return e})),labelPoints:l.labelPoints.map((function(e){if(e.id===r.id){var t=Object(Ne.findLast)(bt.getLabelNames(),{name:e.suggestedLabel});return Object(s.a)(Object(s.a)({},e),{},{status:ht.ACCEPTED,labelId:t?t.id:e.labelId})}return e}))});c(l.id,e),n(!1)}}),Object(y.jsx)(Kt,{image:"/ico/trash.png",imageAlt:"trash",buttonSize:{width:30,height:30},padding:15,onClick:function(){Vt.deleteImageLabelById(l.id,r.id),n(!1)}}),r.suggestedLabel&&Vt.labelExistsInLabelNames(r.suggestedLabel)?Object(y.jsx)("div",{className:"SuggestedLabel",children:r.suggestedLabel}):null]})})})),vn=(n(1306),n(853));function xn(e){return{type:ke.UPDATE_SUGGESTED_LABEL_LIST,payload:{labelList:e}}}var yn=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"loadModel",value:function(t){vn.load().then((function(n){var a;e.model=n,Lo.dispatch((a=!0,{type:ke.UPDATE_OBJECT_DETECTOR_STATUS,payload:{isObjectDetectorLoaded:a}})),Lo.dispatch(ze(ye.RECT)),bt.getActiveLabelType()===ye.RECT&&In.detectRectsForActiveImage(),t&&t()})).catch((function(e){throw new Error(e)}))}},{key:"predict",value:function(t,n){e.model&&e.model.detect(t).then((function(e){n&&n(e)})).catch((function(e){throw new Error(e)}))}}]),e}();yn.model=void 0;var In=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"detectRectsForActiveImage",value:function(){var t=bt.getActiveImageData();e.detectRects(t.id,Me.getById(t.id))}},{key:"detectRects",value:function(t,n){!bt.getImageDataById(t).isVisitedByObjectDetector&&Je.isAIObjectDetectorModelLoaded()&&(Lo.dispatch(tt(i.LOADER)),yn.predict(n,(function(n){var a=e.extractNewSuggestedLabelNames(bt.getLabelNames(),n),o=Je.getRejectedSuggestedLabelList(),r=Ln.excludeRejectedLabelNames(a,o);r.length>0?(Lo.dispatch(xn(r)),Lo.dispatch(tt(i.SUGGEST_LABEL_NAMES))):Lo.dispatch(tt(null)),e.saveRectPredictions(t,n)})))}},{key:"saveRectPredictions",value:function(t,n){var a=bt.getImageDataById(t),i=e.mapPredictionsToRectLabels(n),o=Object(s.a)(Object(s.a)({},a),{},{labelRects:a.labelRects.concat(i),isVisitedByObjectDetector:!0});Lo.dispatch(He(a.id,o))}},{key:"mapPredictionsToRectLabels",value:function(e){return e.map((function(e){return{id:Object(Ot.a)(),labelIndex:null,labelId:null,rect:{x:e.bbox[0],y:e.bbox[1],width:e.bbox[2],height:e.bbox[3]},isCreatedByAI:!0,status:ht.UNDECIDED,suggestedLabel:e.class}}))}},{key:"extractNewSuggestedLabelNames",value:function(e,t){return t.reduce((function(t,n){return t.includes(n.class)||Object(Ne.findLast)(e,{name:n.class})||t.push(n.class),t}),[])}},{key:"acceptAllSuggestedRectLabels",value:function(e){var t=Object(s.a)(Object(s.a)({},e),{},{labelRects:e.labelRects.map((function(e){var t=Object(Ne.findLast)(bt.getLabelNames(),{name:e.suggestedLabel});return Object(s.a)(Object(s.a)({},e),{},{status:ht.ACCEPTED,labelId:t?t.id:e.labelId})}))});Lo.dispatch(He(t.id,t))}},{key:"rejectAllSuggestedRectLabels",value:function(e){var t=Object(s.a)(Object(s.a)({},e),{},{labelRects:e.labelRects.filter((function(e){return e.status===ht.ACCEPTED}))});Lo.dispatch(He(t.id,t))}}]),e}(),Cn=(n(1303),n(873)),An=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"loadModel",value:function(t){Cn.a({architecture:"ResNet50",outputStride:32,inputResolution:257,quantBytes:2}).then((function(n){var a;e.model=n,Lo.dispatch((a=!0,{type:ke.UPDATE_POSE_DETECTOR_STATUS,payload:{isPoseDetectorLoaded:a}})),Lo.dispatch(ze(ye.POINT)),bt.getActiveLabelType()===ye.POINT&&En.detectPoseForActiveImage(),t&&t()})).catch((function(e){throw new Error(e)}))}},{key:"predict",value:function(t,n){e.model&&e.model.estimateMultiplePoses(t).then((function(e){n&&n(e)})).catch((function(e){throw new Error(e)}))}}]),e}();An.model=void 0;var Pn,En=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"detectPoseForActiveImage",value:function(){var t=bt.getActiveImageData();e.detectPoses(t.id,Me.getById(t.id))}},{key:"detectPoses",value:function(t,n){!bt.getImageDataById(t).isVisitedByPoseDetector&&Je.isAIPoseDetectorModelLoaded()&&(Lo.dispatch(tt(i.LOADER)),An.predict(n,(function(a){var o=e.extractNewSuggestedLabelNames(bt.getLabelNames(),a),r=Je.getRejectedSuggestedLabelList(),l=Ln.excludeRejectedLabelNames(o,r);l.length>0?(Lo.dispatch(xn(l)),Lo.dispatch(tt(i.SUGGEST_LABEL_NAMES))):Lo.dispatch(tt(null)),e.savePosePredictions(t,a,n)})))}},{key:"savePosePredictions",value:function(t,n,a){var i=bt.getImageDataById(t),o=e.mapPredictionsToPointLabels(n).filter((function(e){return Ee.isValueInRange(e.point.x,0,a.width)})).filter((function(e){return Ee.isValueInRange(e.point.y,0,a.height)})),r=Object(s.a)(Object(s.a)({},i),{},{labelPoints:i.labelPoints.concat(o),isVisitedByPoseDetector:!0});Lo.dispatch(He(i.id,r))}},{key:"mapPredictionsToPointLabels",value:function(e){return e.map((function(e){return e.keypoints.map((function(e){return{id:Object(Ot.a)(),labelIndex:null,labelId:null,point:{x:e.position.x,y:e.position.y},isCreatedByAI:!0,status:ht.UNDECIDED,suggestedLabel:e.part}}))})).reduce((function(e,t){return e.concat(t)}),[])}},{key:"extractNewSuggestedLabelNames",value:function(e,t){return t.map((function(e){return e.keypoints})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.part})).reduce((function(t,n){return t.includes(n)||Object(Ne.findLast)(e,{name:n})||t.push(n),t}),[])}},{key:"acceptAllSuggestedPointLabels",value:function(e){var t=Object(s.a)(Object(s.a)({},e),{},{labelPoints:e.labelPoints.map((function(e){var t=Object(Ne.findLast)(bt.getLabelNames(),{name:e.suggestedLabel});return Object(s.a)(Object(s.a)({},e),{},{status:ht.ACCEPTED,labelId:t?t.id:e.labelId})}))});Lo.dispatch(He(t.id,t))}},{key:"rejectAllSuggestedPointLabels",value:function(e){var t=Object(s.a)(Object(s.a)({},e),{},{labelPoints:e.labelPoints.filter((function(e){return e.status===ht.ACCEPTED}))});Lo.dispatch(He(t.id,t))}}]),e}(),Ln=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"excludeRejectedLabelNames",value:function(e,t){return e.reduce((function(e,n){return t.includes(n)||e.push(n),e}),[])}},{key:"detect",value:function(e,t){switch(bt.getActiveLabelType()){case ye.RECT:In.detectRects(e,t);break;case ye.POINT:En.detectPoses(e,t)}}},{key:"rejectAllSuggestedLabels",value:function(e){switch(bt.getActiveLabelType()){case ye.RECT:In.rejectAllSuggestedRectLabels(e);break;case ye.POINT:En.rejectAllSuggestedPointLabels(e)}}},{key:"acceptAllSuggestedLabels",value:function(e){switch(bt.getActiveLabelType()){case ye.RECT:In.acceptAllSuggestedRectLabels(e);break;case ye.POINT:En.acceptAllSuggestedPointLabels(e)}}}]),e}(),Tn=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).loadImage=function(){var e=Object(fe.a)(ve.a.mark((function e(t){var n;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadStatus?(_t.setActiveImage(Me.getById(t.id)),Ln.detect(t.id,Me.getById(t.id)),a.updateModelAndRender()):ot.isLoading||(_t.setLoadingStatus(!0),n=function(e){return a.saveLoadedImage(e,t)},Ke.loadImage(t.fileData).then((function(e){return n(e)})).catch((function(e){return a.handleLoadImageError()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.saveLoadedImage=function(e,t){t.loadStatus=!0,a.props.updateImageDataById(t.id,t),Me.storeImage(t.id,e),_t.setActiveImage(e),Ln.detect(t.id,e),_t.setLoadingStatus(!1),a.updateModelAndRender()},a.handleLoadImageError=function(){},a.updateModelAndRender=function(){wt.updateViewPortSize(),wt.updateDefaultViewPortImageRect(),wt.resizeViewPortContent(),_t.fullRender()},a.update=function(e){var t=_t.getEditorData(e);ot.mousePositionOnViewPortContent=yt.getMousePositionOnCanvasFromEvent(e,ot.canvas),ot.primaryRenderingEngine.update(t),a.props.imageDragMode?ot.viewPortHelper.update(t):ot.supportRenderingEngine&&ot.supportRenderingEngine.update(t),!a.props.activePopupType&&_t.updateMousePositionIndicator(e),_t.fullRender()},a.handleZoom=function(e){if(e.ctrlKey||jn.isMac&&e.metaKey){var t=Math.sign(e.deltaY);jn.isMac&&-1===t||!jn.isMac&&1===t?wt.zoomOut():(jn.isMac&&1===t||!jn.isMac&&-1===t)&&wt.zoomIn()}ot.mousePositionOnViewPortContent=yt.getMousePositionOnCanvasFromEvent(e,ot.canvas)},a.getOptionsPanels=function(){var e=_t.getEditorData();return a.props.activeLabelType===ye.RECT?a.props.imageData.labelRects.filter((function(e){return e.isCreatedByAI&&e.status!==ht.ACCEPTED})).map((function(t){var n={x:t.rect.x,y:t.rect.y},i=ft.transferPointFromImageToViewPortContent(n,e);return Object(y.jsx)(On,{position:i,labelData:t,imageData:a.props.imageData},t.id)})):a.props.activeLabelType===ye.POINT?a.props.imageData.labelPoints.filter((function(e){return e.isCreatedByAI&&e.status!==ht.ACCEPTED})).map((function(t){var n={x:t.point.x,y:t.point.y},i=ft.transferPointFromImageToViewPortContent(n,e);return Object(y.jsx)(On,{position:i,labelData:t,imageData:a.props.imageData},t.id)})):null},a.onScrollbarsUpdate=function(e){var t={width:e.scrollWidth,height:e.scrollHeight};Object(Ne.isEqual)(t,a.state.viewPortSize)||a.setState({viewPortSize:t})},a.state={viewPortSize:{width:0,height:0}},a}return Object(V.a)(n,[{key:"componentDidMount",value:function(){this.mountEventListeners();var e=this.props,t=e.imageData,n=e.activeLabelType;Wt.switchCtx(Xe.EDITOR),_t.mountRenderEnginesAndHelpers(n),De.addAndRun(this.loadImage(t)),wt.resizeCanvas(this.props.size)}},{key:"componentWillUnmount",value:function(){this.unmountEventListeners()}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,i=a.imageData,o=a.activeLabelType;e.imageData.id!==i.id&&De.addAndRun(this.loadImage(i)),e.activeLabelType!==o&&(_t.swapSupportRenderingEngine(o),Ln.detect(i.id,Me.getById(i.id))),this.updateModelAndRender()}},{key:"mountEventListeners",value:function(){window.addEventListener(dt.MOUSE_MOVE,this.update),window.addEventListener(dt.MOUSE_UP,this.update),ot.canvas.addEventListener(dt.MOUSE_DOWN,this.update),ot.canvas.addEventListener(dt.MOUSE_WHEEL,this.handleZoom)}},{key:"unmountEventListeners",value:function(){window.removeEventListener(dt.MOUSE_MOVE,this.update),window.removeEventListener(dt.MOUSE_UP,this.update),ot.canvas.removeEventListener(dt.MOUSE_DOWN,this.update),ot.canvas.removeEventListener(dt.MOUSE_WHEEL,this.handleZoom)}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"Editor",ref:function(e){return ot.editor=e},draggable:!1,children:[Object(y.jsx)(Ae.a,{ref:function(e){return ot.viewPortScrollbars=e},renderTrackHorizontal:function(e){return Object(y.jsx)("div",Object(s.a)(Object(s.a)({},e),{},{className:"track-horizontal"}))},renderTrackVertical:function(e){return Object(y.jsx)("div",Object(s.a)(Object(s.a)({},e),{},{className:"track-vertical"}))},onUpdate:this.onScrollbarsUpdate,children:Object(y.jsxs)("div",{className:"ViewPortContent",children:[Object(y.jsx)("canvas",{className:"ImageCanvas",ref:function(e){return ot.canvas=e},draggable:!1,onContextMenu:function(e){return e.preventDefault()}}),this.getOptionsPanels()]})}),Object(y.jsx)("div",{className:"MousePositionIndicator",ref:function(e){return ot.mousePositionIndicator=e},draggable:!1}),Object(y.jsx)("div",{className:pn.getCursorStyle(this.props.customCursorStyle),ref:function(e){return ot.cursor=e},draggable:!1,children:Object(y.jsx)("img",{draggable:!1,alt:"indicator",src:pn.getIndicator(this.props.customCursorStyle)})})]})}}]),n}(r.a.Component),wn={updateImageDataById:He},Sn=Object(xe.b)((function(e){return{activeLabelType:e.labels.activeLabelType,activePopupType:e.general.activePopupType,activeLabelId:e.labels.activeLabelId,customCursorStyle:e.general.customCursorStyle,imageDragMode:e.general.imageDragMode,zoom:e.general.zoom}}),wn)(Tn),Rn=(n(1262),Object(xe.b)((function(e){return{activeImageIndex:e.labels.activeImageIndex,activeContext:e.general.activeContext}}),{})((function(e){var t=e.size,n=e.imageData,a=e.totalImageCount,i=e.activeImageIndex,o=e.activeContext;return Object(y.jsxs)("div",{className:Se()("EditorBottomNavigationBar",{"with-context":o===Xe.EDITOR}),children:[Object(y.jsx)(Kt,{image:"/ico/left.png",imageAlt:"previous",buttonSize:{width:25,height:25},onClick:function(){return Mt.getPreviousImage()},isDisabled:0===i,externalClassName:"left"}),t.width>400?Object(y.jsxs)("div",{className:"CurrentImageName",children:[" ",n.fileData.name," "]}):Object(y.jsxs)("div",{className:"CurrentImageCount",children:[" ",i+1+" / "+a," "]}),Object(y.jsx)(Kt,{image:"/ico/right.png",imageAlt:"next",buttonSize:{width:25,height:25},onClick:function(){return Mt.getNextImage()},isDisabled:i===a-1,externalClassName:"right"})]})}))),Dn=(n(1263),n(874)),kn=n.n(Dn),_n=n(1398),Nn=n(1397),Mn={width:30,height:30},Bn=kn()((function(e){return{tooltip:{backgroundColor:"#171717",color:"#ffffff",boxShadow:e.shadows[1],fontSize:12,maxWidth:200,textAlign:"center"}}}))(_n.a),Fn=function(e,t,n,a,i,o,r){return Object(y.jsx)(Bn,{disableFocusListener:!0,title:t,TransitionComponent:Nn.a,TransitionProps:{timeout:600},placement:"bottom",children:Object(y.jsx)("div",{children:Object(y.jsx)(Kt,{buttonSize:Mn,padding:10,image:n,imageAlt:a,href:o,onClick:r,isActive:i})})},e)},Un={updateImageDragModeStatusAction:function(e){return{type:ke.UPDATE_IMAGE_DRAG_MODE_STATUS,payload:{imageDragMode:e}}},updateCrossHairVisibleStatusAction:function(e){return{type:ke.UPDATE_CROSS_HAIR_VISIBLE_STATUS,payload:{crossHairVisible:e}}}},Vn=Object(xe.b)((function(e){return{activeContext:e.general.activeContext,imageDragMode:e.general.imageDragMode,crossHairVisible:e.general.crossHairVisible,activeLabelType:e.labels.activeLabelType}}),Un)((function(e){var t=e.activeContext,n=e.updateImageDragModeStatusAction,a=e.updateCrossHairVisibleStatusAction,i=e.imageDragMode,o=e.crossHairVisible,r=e.activeLabelType;return Object(y.jsxs)("div",{className:Se()("EditorTopNavigationBar",{"with-context":t===Xe.EDITOR}),children:[Object(y.jsxs)("div",{className:"ButtonWrapper",children:[Fn("zoom-in","zoom in","/ico/zoom-in.png","zoom-in",!1,void 0,(function(){return wt.zoomIn()})),Fn("zoom-out","zoom out","/ico/zoom-out.png","zoom-out",!1,void 0,(function(){return wt.zoomOut()})),Fn("zoom-fit","fit image to available space","/ico/zoom-fit.png","zoom-fit",!1,void 0,(function(){return wt.setDefaultZoom()})),Fn("zoom-max","maximum allowed image zoom","/ico/zoom-max.png","zoom-max",!1,void 0,(function(){return wt.setOneForOneZoom()}))]}),Object(y.jsxs)("div",{className:"ButtonWrapper",children:[Fn("image-drag-mode",i?"turn-off image drag mode":"turn-on image drag mode - works only when image is zoomed","/ico/hand.png","image-drag-mode",i,void 0,(function(){(i||mt.getZoom()!==At.MIN_ZOOM)&&n(!i)})),Fn("cursor-cross-hair",o?"turn-off cursor cross-hair":"turn-on cursor cross-hair","/ico/cross-hair.png","cross-hair",o,void 0,(function(){a(!o)}))]}),(r===ye.RECT&&Je.isAIObjectDetectorModelLoaded()||r===ye.POINT&&Je.isAIPoseDetectorModelLoaded())&&Object(y.jsxs)("div",{className:"ButtonWrapper",children:[Fn("accept-all","accept all proposed detections","/ico/accept-all.png","accept-all",!1,void 0,(function(){return Ln.acceptAllSuggestedLabels(bt.getActiveImageData())})),Fn("reject-all","reject all proposed detections","/ico/reject-all.png","reject-all",!1,void 0,(function(){return Ln.rejectAllSuggestedLabels(bt.getActiveImageData())}))]})]})})),zn=Object(xe.b)((function(e){return{windowSize:e.general.windowSize,activeImageIndex:e.labels.activeImageIndex,imagesData:e.labels.imagesData,activeContext:e.general.activeContext,projectType:e.general.projectData.type}}))((function(e){var t=e.windowSize,n=e.activeImageIndex,i=e.imagesData,r=e.activeContext,l=e.projectType,c=Object(o.useState)(!0),s=Object(L.a)(c,2),u=s[0],d=s[1],b=Object(o.useState)(!0),h=Object(L.a)(b,2),g=h[0],m=h[1],p=function(){if(t){var e=u?Ie.SIDE_NAVIGATION_BAR_WIDTH_OPEN_PX:Ie.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX,n=g?Ie.SIDE_NAVIGATION_BAR_WIDTH_OPEN_PX:Ie.SIDE_NAVIGATION_BAR_WIDTH_CLOSED_PX;return{width:t.width-e-n,height:t.height-Ie.TOP_NAVIGATION_BAR_HEIGHT_PX-Ie.EDITOR_BOTTOM_NAVIGATION_BAR_HEIGHT_PX-Ie.EDITOR_TOP_NAVIGATION_BAR_HEIGHT_PX}}return null},j=function(){u?u&&r===Xe.LEFT_NAVBAR&&Wt.restoreCtx():Wt.switchCtx(Xe.LEFT_NAVBAR),d(!u)},f=function(){g?g&&r===Xe.RIGHT_NAVBAR&&Wt.restoreCtx():Wt.switchCtx(Xe.RIGHT_NAVBAR),m(!g)};return Object(y.jsxs)("div",{className:"EditorContainer",children:[Object(y.jsx)(gn,{direction:a.LEFT,isOpen:u,isWithContext:r===Xe.LEFT_NAVBAR,renderCompanion:function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(mn,{label:"Images",image:"/ico/camera.png",imageAlt:"images",onClick:j,isActive:u})})},renderContent:function(){return Object(y.jsx)(Zt,{})}},"left-side-navigation-bar"),Object(y.jsxs)("div",{className:"EditorWrapper",onMouseDown:function(){return Wt.switchCtx(Xe.EDITOR)},children:[l===Pt.OBJECT_DETECTION&&Object(y.jsx)(Vn,{},"editor-top-navigation-bar"),Object(y.jsx)(Sn,{size:p(),imageData:i[n]},"editor"),Object(y.jsx)(Rn,{imageData:i[n],size:p(),totalImageCount:i.length},"editor-bottom-navigation-bar")]},"editor-wrapper"),Object(y.jsx)(gn,{direction:a.RIGHT,isOpen:g,isWithContext:r===Xe.RIGHT_NAVBAR,renderCompanion:function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(mn,{label:"Labels",image:"/ico/tags.png",imageAlt:"labels",onClick:f,isActive:g})})},renderContent:function(){return Object(y.jsx)(hn,{})}},"right-side-navigation-bar")]})})),Hn=(n(1284),n(1285),Object(xe.b)((function(e){return{imagesData:e.labels.imagesData,activeLabelType:e.labels.activeLabelType}}),{})((function(e){var t=e.imagesData,n=e.activeLabelType,a=t.reduce((function(e,t){return e+(t.labelPoints.length>0?1:0)}),0),i=t.reduce((function(e,t){return e+(t.labelRects.length>0?1:0)}),0),o=t.reduce((function(e,t){return e+(t.labelPolygons.length>0?1:0)}),0),r=t.reduce((function(e,t){return e+(t.labelLines.length>0?1:0)}),0),l=t.reduce((function(e,t){return e+(0!==t.labelNameIds.length?1:0)}),0);return Object(y.jsx)("div",{className:"StateBar",children:Object(y.jsx)("div",{style:{width:function(){switch(n){case ye.POINT:return 100*a/t.length;case ye.RECT:return 100*i/t.length;case ye.POLYGON:return 100*o/t.length;case ye.LINE:return 100*r/t.length;case ye.IMAGE_RECOGNITION:return 100*l/t.length;default:return 0}}()+"%"},className:"done"})})}))),Gn=(n(1286),function(e){var t=e.label,n=e.isPassword,a=e.onChange,i=e.onFocus,o=e.inputStyle,r=e.labelStyle,l=e.barStyle,c=e.value,s=e.onKeyUp;return Object(y.jsxs)("div",{className:"TextInput",children:[Object(y.jsx)("input",{value:c||void 0,type:n?"password":"text",style:o,onChange:a||void 0,onFocus:i||void 0,onKeyUp:s}),!!t&&Object(y.jsx)("label",{style:r,children:t}),Object(y.jsx)("div",{className:"Bar",style:l})]})}),Wn=(n(1287),[{name:"Actions",imageSrc:"/ico/actions.png",imageAlt:"actions",disabled:!1,children:[{name:"Edit Labels",description:"Modify labels list",imageSrc:"/ico/tags.png",imageAlt:"labels",disabled:!1,onClick:function(){return Lo.dispatch(tt(i.UPDATE_LABEL))}},{name:"Import Images",description:"Load more images",imageSrc:"/ico/camera.png",imageAlt:"images",disabled:!1,onClick:function(){return Lo.dispatch(tt(i.IMPORT_IMAGES))}},{name:"Import Annotations",description:"Import annotations from file",imageSrc:"/ico/import-labels.png",imageAlt:"import-labels",disabled:!1,onClick:function(){return Lo.dispatch(tt(i.IMPORT_ANNOTATIONS))}},{name:"Export Annotations",description:"Export annotations to file",imageSrc:"/ico/export-labels.png",imageAlt:"export-labels",disabled:!1,onClick:function(){return Lo.dispatch(tt(i.EXPORT_ANNOTATIONS))}},{name:"Load AI Model",description:"Load our pre-trained annotation models",imageSrc:"/ico/ai.png",imageAlt:"load-ai-model",disabled:!1,onClick:function(){return Lo.dispatch(tt(i.LOAD_AI_MODEL))}}]}]),Yn={updatePreventCustomCursorStatusAction:at},Zn=Object(xe.b)((function(e){return{}}),Yn)((function(e){var t=e.updatePreventCustomCursorStatusAction,n=Object(o.useState)(null),a=Object(L.a)(n,2),i=a[0],r=a[1],l=Object(o.useState)(null),c=Object(L.a)(l,2),s=c[0],u=c[1],d=function(e){t(!0)},b=function(e){t(!1)},h=function e(t){t.target.classList.contains("DropDownMenuTab")||t.target.classList.contains("DropDownMenuContentOption")||(r(null),document.removeEventListener(dt.MOUSE_DOWN,e))},g=function(e,n){return function(){n||(e&&e(),r(null),t(!1),document.removeEventListener(dt.MOUSE_DOWN,h))}},m=function(e,t){return Object(y.jsxs)("div",{className:(n=t,Se()("DropDownMenuTab",{active:n===i})),onClick:function(e){return function(e,t){null===i&&document.addEventListener(dt.MOUSE_DOWN,h),i===e?(r(null),u(null)):(r(e),u({x:t.target.offsetLeft,y:35}))}(t,e)},onMouseEnter:function(e){return function(e,t){null!==i&&i!==e&&(r(e),u({x:t.target.offsetLeft,y:35}))}(t,e)},children:[Object(y.jsx)("img",{draggable:!1,src:e.imageSrc,alt:e.imageAlt}),e.name]},t);var n};return Object(y.jsx)("div",{className:"DropDownMenuWrapper",children:Object(y.jsxs)(y.Fragment,{children:[Wn.map((function(e,t){return m(e,t)})),function(e){if(null!==i){var t={top:35,left:s.x,height:40*e.children.length+10};return Object(y.jsx)("div",{className:"DropDownMenuContent",style:t,onMouseEnter:d,onMouseLeave:b,children:e.children.map((function(e,t){return Object(y.jsxs)("div",{className:(n=e.disabled,Se()("DropDownMenuContentOption",{active:!n})),onClick:g(e.onClick,e.disabled),children:[Object(y.jsx)("div",{className:"Marker"}),Object(y.jsx)("img",{src:e.imageSrc,alt:e.imageAlt}),e.name]},t);var n}))})}return null}(Wn[i])]})})})),Xn={updateActivePopupTypeAction:tt,updateProjectDataAction:it},Kn=Object(xe.b)((function(e){return{projectData:e.general.projectData}}),Xn)((function(e){return Object(y.jsxs)("div",{className:"TopNavigationBar",children:[Object(y.jsx)(Hn,{}),Object(y.jsxs)("div",{className:"TopNavigationBarWrapper",children:[Object(y.jsx)("div",{className:"NavigationBarGroupWrapper",children:Object(y.jsx)(Zn,{})}),Object(y.jsxs)("div",{className:"NavigationBarGroupWrapper middle",children:[Object(y.jsx)("div",{className:"ProjectName",children:"Project Name:"}),Object(y.jsx)(Gn,{isPassword:!1,value:e.projectData.name,onChange:function(t){var n=t.target.value.toLowerCase().replace(" ","-");e.updateProjectDataAction(Object(s.a)(Object(s.a)({},e.projectData),{},{name:n}))},onFocus:function(e){e.target.setSelectionRange(0,e.target.value.length)}})]})]})]})})),Jn=Object(xe.b)((function(e){return{activePopupType:e.general.activePopupType}}))((function(e){var t=e.activePopupType;return Object(y.jsxs)("div",{className:Se()("EditorView",{withPopup:!!t}),draggable:!1,children:[Object(y.jsx)(Kn,{}),Object(y.jsx)(zn,{})]})})),qn=(n(1288),n(1289),n(1290),n(1291),function(e){var t=e.key,n=e.label,a=e.onClick,i=e.style,o=e.isActive,r=e.isDisabled,l=e.externalClassName;return Object(y.jsx)("div",{className:Se()("TextButton",l,{active:o,disabled:r}),onClick:function(e){e.stopPropagation(),a&&a()},style:i,children:n},t)}),Qn=function(e){var t=e.title,n=e.renderContent,a=e.acceptLabel,i=e.onAccept,r=e.skipAcceptButton,l=e.disableAcceptButton,c=e.rejectLabel,s=e.onReject,u=e.skipRejectButton,d=e.disableRejectButton,b=Object(o.useState)(!1),h=Object(L.a)(b,2),g=h[0],m=h[1];return Object(o.useEffect)((function(){g||(Wt.switchCtx(Xe.POPUP),m(!0))}),[g]),Object(y.jsxs)("div",{className:"GenericYesNoPopup",children:[Object(y.jsx)("div",{className:"Header",children:t}),Object(y.jsx)("div",{className:"Content",children:n()}),Object(y.jsxs)("div",{className:"Footer",children:[!r&&Object(y.jsx)(qn,{label:a||"YES",onClick:i,externalClassName:"accept",isDisabled:l}),!u&&Object(y.jsx)(qn,{label:c||"NO, THANKS",onClick:s,externalClassName:"reject",isDisabled:d})]})]})},$n=n(380);!function(e){e.IMAGE="image/jpeg, image/png",e.TEXT="text/plain",e.JSON="application/json"}(Pn||(Pn={}));var ea,ta=n(302),na=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).name="YOLOAnnotationsLoadingError",a}return Object(V.a)(n)}(Object(ta.a)(Error)),aa=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"For YOLO labels to be loaded correctly, labels.txt file is required")).name="NoLabelNamesFileProvidedError",e}return Object(V.a)(n)}(na),ia=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"Label names listed in labels.txt file should be unique")).name="LabelNamesNotUniqueError",e}return Object(V.a)(n)}(na),oa=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,"Unexpected error occurred during parsing of ".concat(e," annotations file"))).name="AnnotationsParsingError",a}return Object(V.a)(n)}(na),ra=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"parseLabelsNamesFromString",value:function(e){var t=e.split(/[\r\n]/).filter(Boolean).map((function(e){return e.replace(/\s/g,"")}));if(Object(Ne.uniq)(t).length!==t.length)throw new ia;return t.map((function(e){return vt.createLabelName(e)}))}},{key:"loadLabelsList",value:function(t,n,a){var i=new FileReader;i.onloadend=function(t){var a=t.target.result,i=e.parseLabelsNamesFromString(a);n(i)},i.onerror=function(){return a()},i.readAsText(t)}},{key:"parseYOLOAnnotationsFromString",value:function(t,n,a,i){return t.split(/[\r\n]/).filter(Boolean).map((function(t){return e.parseYOLOAnnotationFromString(t,n,a,i)}))}},{key:"parseYOLOAnnotationFromString",value:function(t,n,a,i){var o=t.split(" ");if(!e.validateYOLOAnnotationComponents(o,n.length))throw new oa(i);var r=n[parseInt(o[0])].id,l=parseFloat(o[1]),c=parseFloat(o[2]),s=parseFloat(o[3]),u=parseFloat(o[4]),d={x:(l-s/2)*a.width,y:(c-u/2)*a.height,width:s*a.width,height:u*a.height};return vt.createLabelRect(r,d)}},{key:"validateYOLOAnnotationComponents",value:function(e,t){var n=function(e){var t=Number(e);return!isNaN(t)&&0<=t&&t<=1};return[5===e.length,function(e){var n=parseInt(e);return!isNaN(n)&&0<=n&&n<t}(e[0]),n(e[1]),n(e[2]),n(e[3]),n(e[4])].every(Boolean)}}]),e}(),la={updateActivePopupType:tt,updateLabels:Ye},ca=Object(xe.b)((function(e){return{}}),la)((function(e){var t=e.updateActivePopupType,n=e.updateLabels,a=Object(o.useState)([]),r=Object(L.a)(a,2),l=r[0],c=r[1],u=Object(o.useState)(!1),d=Object(L.a)(u,2),b=d[0],h=d[1],g=Object($n.a)({accept:Pn.TEXT,multiple:!1,onDrop:function(e){1===e.length&&ra.loadLabelsList(e[0],f,O)}}),m=g.acceptedFiles,p=g.getRootProps,j=g.getInputProps,f=function(e){c(e),h(!1)},O=function(){h(!0)};return Object(y.jsx)(Qn,{title:"Load file with labels description",renderContent:function(){return Object(y.jsxs)("div",{className:"LoadLabelsPopupContent",children:[Object(y.jsx)("div",{className:"Message",children:"Load a text file with a list of labels you are planning to use. The names of each label should be separated by new line. If you don't have a prepared file, no problem. You can create your own list now."}),Object(y.jsx)("div",Object(s.a)(Object(s.a)({},p({className:"DropZone"})),{},{children:b?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("input",Object(s.a)({},j())),Object(y.jsx)("img",{draggable:!1,alt:"upload",src:"/ico/box-opened.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Loading of labels file was unsuccessful"}),Object(y.jsx)("p",{className:"extraBold",children:"Try again"})]}):0===m.length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("input",Object(s.a)({},j())),Object(y.jsx)("img",{draggable:!1,alt:"upload",src:"/ico/box-opened.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Drop labels file"}),Object(y.jsx)("p",{children:"or"}),Object(y.jsx)("p",{className:"extraBold",children:"Click here to select it"})]}):1===l.length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{draggable:!1,alt:"uploaded",src:"/ico/box-closed.png"}),Object(y.jsx)("p",{className:"extraBold",children:"only 1 label found"})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{draggable:!1,alt:"uploaded",src:"/ico/box-closed.png"}),Object(y.jsxs)("p",{className:"extraBold",children:[l.length," labels found"]})]})}))]})},acceptLabel:"Start project",onAccept:function(){l.length>0&&n(l)},disableAcceptButton:0===l.length,rejectLabel:"Create labels list",onReject:function(){t(i.INSERT_LABEL_NAMES)}})})),sa=(n(1292),n(1293),function(e){var t=e.color,n=e.onClick;return Object(y.jsx)("div",{className:"ColorSelectorView",style:{backgroundColor:t},onClick:n,children:Object(y.jsx)("img",{draggable:!1,alt:"refresh",src:"/ico/refresh.png"})})}),ua=n(1401),da=n(43);!function(e){e.ERROR="ERROR",e.SUCCESS="SUCCESS",e.MESSAGE="MESSAGE",e.WARNING="WARNING"}(ea||(ea={}));var ba,ha,ga=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"createErrorNotification",value:function(e){return{id:Object(Ot.a)(),type:ea.ERROR,header:e.header,description:e.description}}},{key:"createMessageNotification",value:function(e){return{id:Object(Ot.a)(),type:ea.MESSAGE,header:e.header,description:e.description}}},{key:"createWarningNotification",value:function(e){return{id:Object(Ot.a)(),type:ea.WARNING,header:e.header,description:e.description}}}]),e}(),ma=n(23);!function(e){e[e.EMPTY_LABEL_NAME_ERROR=0]="EMPTY_LABEL_NAME_ERROR",e[e.NON_UNIQUE_LABEL_NAMES_ERROR=1]="NON_UNIQUE_LABEL_NAMES_ERROR"}(ba||(ba={}));var pa,ja=(ha={},Object(ma.a)(ha,ba.EMPTY_LABEL_NAME_ERROR,{header:"Empty label name",description:"Looks like you didn't assign name to one of your labels. Unfortunately it is mandatory for every label to have unique name value. Insert correct name or delete empty label and try again."}),Object(ma.a)(ha,ba.NON_UNIQUE_LABEL_NAMES_ERROR,{header:"Non unique label names",description:"Looks like not all your label names are unique. Unique names are necessary to guarantee correct data export when you complete your work. Make your names unique and try again."}),ha),fa=Object(da.a)({root:{"& .MuiInputBase-root":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:hover:before":{borderBottomColor:"white"},"& label.Mui-focused":{color:Ie.SECONDARY_COLOR},"& .MuiInput-underline:after":{borderBottomColor:Ie.SECONDARY_COLOR}}})(ua.a),Oa={updateActivePopupTypeAction:tt,updateLabelNamesAction:Ye,updatePerClassColorationStatusAction:function(e){return{type:ke.UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS,payload:{enablePerClassColoration:e}}},submitNewNotificationAction:function(e){return{type:ke.SUBMIT_NEW_NOTIFICATION,payload:{notification:e}}}},va=Object(xe.b)((function(e){return{projectType:e.general.projectData.type,enablePerClassColoration:e.general.enablePerClassColoration}}),Oa)((function(e){var t=e.updateActivePopupTypeAction,n=e.updateLabelNamesAction,a=e.updatePerClassColorationStatusAction,r=e.submitNewNotificationAction,l=e.isUpdate,c=e.projectType,u=e.enablePerClassColoration,d=Object(o.useState)(bt.getLabelNames()),b=Object(L.a)(d,2),h=b[0],g=b[1],m=function(e){return function(){0===Object(Ne.filter)(h,(function(e){return""===e.name})).length?Object(Ne.uniq)(h.map((function(e){return e.name}))).length===h.length?e():r(ga.createErrorNotification(ja[ba.NON_UNIQUE_LABEL_NAMES_ERROR])):r(ga.createErrorNotification(ja[ba.EMPTY_LABEL_NAME_ERROR]))}},p=function(){var e=[].concat(Object(_e.a)(h),[vt.createLabelName("")]);g(e)},j=function(){return m(p)()},f=function(){a(!u)},O=function(e){"Enter"===e.key&&j()},v=h.map((function(e){return Object(y.jsxs)("div",{className:"LabelEntry",children:[Object(y.jsx)(fa,{id:"key",autoComplete:"off",autoFocus:!0,type:"text",margin:"dense",label:"Insert label",onKeyUp:O,value:e.name,onChange:function(t){return x(e.id,t.target.value)},style:{width:280},InputLabelProps:{shrink:!0}}),c===Pt.OBJECT_DETECTION&&u&&Object(y.jsx)(sa,{color:e.color,onClick:function(){return function(e){var t=h.map((function(t){return t.id===e?Object(s.a)(Object(s.a)({},t),{},{color:Object(Ne.sample)(Ie.LABEL_COLORS_PALETTE)}):t}));g(t)}(e.id)}}),Object(y.jsx)(Kt,{image:"/ico/trash.png",imageAlt:"remove_label",buttonSize:{width:30,height:30},onClick:function(){return function(e){var t=Object(Ne.reject)(h,{id:e});g(t)}(e.id)}})]},e.id)})),x=function(e,t){var n=h.map((function(n){return n.id===e?Object(s.a)(Object(s.a)({},n),{},{name:t}):n}));g(n)},I=function(){var e=Object(Ne.reject)(h,(function(e){return 0===e.name.length}));h.length>0&&n(e),t(null)},C=function(){var e=Object(Ne.reject)(h,(function(e){return 0===e.name.length})),a=vt.labelNamesIdsDiff(bt.getLabelNames(),e);Vt.removeLabelNames(a),n(e),t(null)};return Object(y.jsx)(Qn,{title:l?"Edit labels":"Create labels",renderContent:function(){return Object(y.jsxs)("div",{className:"InsertLabelNamesPopup",children:[Object(y.jsxs)("div",{className:"LeftContainer",children:[Object(y.jsx)(Kt,{image:"/ico/plus.png",imageAlt:"plus",buttonSize:{width:40,height:40},padding:25,onClick:j,externalClassName:"monochrome"}),h.length>0&&Object(y.jsx)(Kt,{image:u?"/ico/colors-on.png":"/ico/colors-off.png",imageAlt:"per-class-coloration",buttonSize:{width:40,height:40},padding:15,onClick:f,isActive:u,externalClassName:u?"":"monochrome"})]}),Object(y.jsxs)("div",{className:"RightContainer",children:[Object(y.jsx)("div",{className:"Message",children:l?"You can now edit the label names you use to describe the objects in the photos. Use the + button to add a new empty text field.":"Before you start, you can create a list of labels you plan to assign to objects in your project. You can also choose to skip that part for now and define label names as you go."}),Object(y.jsx)("div",{className:"LabelsContainer",children:0!==Object.keys(h).length?Object(y.jsx)(Ae.a,{children:Object(y.jsx)("div",{className:"InsertLabelNamesPopupContent",children:v})}):Object(y.jsxs)("div",{className:"EmptyList",onClick:p,children:[Object(y.jsx)("img",{draggable:!1,alt:"upload",src:"/ico/type-writer.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Your label list is empty"})]})})]})]})},acceptLabel:l?"Accept":"Start project",onAccept:l?function(){return m(C)()}:function(){return m(I)()},rejectLabel:l?"Cancel":"Load labels from file",onReject:l?function(){t(null)}:function(){t(i.LOAD_LABEL_NAMES)}})})),xa=(n(1294),{updateActiveLabelNameId:Fe,updateLabelNames:Ye,updateProjectData:it,updateActiveImageIndex:Be,updateImageData:We,updateFirstLabelCreatedFlag:Ze}),ya=Object(xe.b)((function(e){return{}}),xa)((function(e){var t=e.updateActiveLabelNameId,n=e.updateLabelNames,a=e.updateActiveImageIndex,i=e.updateImageData,o=e.updateFirstLabelCreatedFlag,r=e.updateProjectData;return Object(y.jsx)(Qn,{title:"Exit project",renderContent:function(){return Object(y.jsx)("div",{className:"ExitProjectPopupContent",children:Object(y.jsx)("div",{className:"Message",children:"Are you sure you want to leave the editor? You will permanently lose all your progress."})})},acceptLabel:"Exit",onAccept:function(){t(null),n([]),r({type:null,name:"my-project-name"}),a(null),i([]),o(!1),Ht.close()},rejectLabel:"Back",onReject:function(){Ht.close()}})})),Ia=(n(1295),function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"createImageDataFromFileData",value:function(e){return{id:Object(Ot.a)(),fileData:e,loadStatus:!1,labelRects:[],labelPoints:[],labelLines:[],labelPolygons:[],labelNameIds:[],isVisitedByObjectDetector:!1,isVisitedByPoseDetector:!1}}},{key:"cleanAnnotations",value:function(e){return Object(s.a)(Object(s.a)({},e),{},{labelRects:[],labelPoints:[],labelLines:[],labelPolygons:[],labelNameIds:[]})}},{key:"arrange",value:function(e,t){return e.sort((function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)}))}},{key:"loadMissingImages",value:function(e){return new Promise((function(t,n){var a=e.filter((function(e){return!e.loadStatus})),i=a.map((function(e){return e.fileData}));Ke.loadImages(i).then((function(e){Me.storeImages(a.map((function(e){return e.id})),e),t()})).catch((function(e){return n(e)}))}))}}]),e}()),Ca={addImageData:Ge},Aa=Object(xe.b)((function(e){return{}}),Ca)((function(e){var t=e.addImageData,n=Object($n.a)({accept:Pn.IMAGE}),a=n.acceptedFiles,i=n.getRootProps,o=n.getInputProps;return Object(y.jsx)(Qn,{title:"Load more images",renderContent:function(){return Object(y.jsx)("div",{className:"LoadMoreImagesPopupContent",children:Object(y.jsx)("div",Object(s.a)(Object(s.a)({},i({className:"DropZone"})),{},{children:0===a.length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("input",Object(s.a)({},o())),Object(y.jsx)("img",{draggable:!1,alt:"upload",src:"/ico/box-opened.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Add new images"}),Object(y.jsx)("p",{children:"or"}),Object(y.jsx)("p",{className:"extraBold",children:"Click here to select them"})]}):1===a.length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{draggable:!1,alt:"uploaded",src:"/ico/box-closed.png"}),Object(y.jsx)("p",{className:"extraBold",children:"1 new image loaded"})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{draggable:!1,alt:"uploaded",src:"/ico/box-closed.png"},1),Object(y.jsxs)("p",{className:"extraBold",children:[a.length," new images loaded"]},2)]})}))})},acceptLabel:"Load",disableAcceptButton:a.length<1,onAccept:function(){a.length>0&&(t(a.map((function(e){return Ia.createImageDataFromFileData(e)}))),Ht.close())},rejectLabel:"Cancel",onReject:function(){Ht.close()}})}));n(1296);!function(e){e.OBJECT_DETECTION="OBJECT_DETECTION",e.POSE_DETECTION="POSE_DETECTION"}(pa||(pa={}));var Pa,Ea,La=[{model:pa.OBJECT_DETECTION,name:"COCO SSD - object detection using rectangles",flag:!1},{model:pa.POSE_DETECTION,name:"POSE-NET - pose estimation using points",flag:!1}],Ta=function(){var e=Object(o.useState)(!1),t=Object(L.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)(La),r=Object(L.a)(i,2),l=r[0],c=r[1],u=function(){var e=Object(Ne.findLast)(l,{flag:!0});return e?e.model:null},d=function(){return l.map((function(e){return Object(y.jsxs)("div",{className:"OptionsItem",onClick:function(){return function(e){var t=l.map((function(t){return t.model===e?Object(s.a)(Object(s.a)({},t),{},{flag:!t.flag}):Object(s.a)(Object(s.a)({},t),{},{flag:!1})}));c(t)}(e.model)},children:[e.flag?Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-checked.png",alt:"checked"}):Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-unchecked.png",alt:"unchecked"}),e.name]},e.model)}))};return Object(y.jsx)(Qn,{title:"Say hello to AI",renderContent:function(){return Object(y.jsxs)("div",{className:"LoadModelPopupContent",children:[Object(y.jsx)("div",{className:"Message",children:"To speed up your work, you can use our AI, which will try to mark objects on your images. Don't worry, your photos are still safe. To take care of your privacy, we decided not to send your images to the server, but instead send our AI to you. When accepting, make sure that you have a fast and stable connection - it may take a few minutes to load the model."}),Object(y.jsx)("div",{className:"Companion",children:n?Object(y.jsx)(Re.ClipLoader,{size:40,color:qe.getLeadingColor(),loading:!0}):Object(y.jsx)("div",{className:"Options",children:d()})})]})},acceptLabel:"Use model!",onAccept:function(){switch(a(!0),u()){case pa.POSE_DETECTION:An.loadModel((function(){Ht.close()}));break;case pa.OBJECT_DETECTION:yn.loadModel((function(){Ht.close()}))}},disableAcceptButton:n||!u(),rejectLabel:"I'm going on my own",onReject:function(){Ht.close()},disableRejectButton:n})},wa=(n(1297),function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"Given predicate results in more than one value being matched.")).name="ArrayUtilAmbiguousMatchError",e}return Object(V.a)(n)}(Object(ta.a)(Error))),Sa=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"Given array is empty.")).name="EmptyArrayError",e}return Object(V.a)(n)}(Object(ta.a)(Error)),Ra=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"Index can not be negative.")).name="NegativeIndexError",e}return Object(V.a)(n)}(Object(ta.a)(Error)),Da=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"partition",value:function(e,t){return e.reduce((function(e,n){return t(n)?e.pass.push(n):e.fail.push(n),e}),{pass:[],fail:[]})}},{key:"match",value:function(e,t,n){return e.reduce((function(e,a){var i=t.filter((function(e){return n(a,e)}));if(1===i.length)e.push([a,i[0]]);else if(i.length>1)throw new wa;return e}),[])}},{key:"unzip",value:function(e){return e.reduce((function(e,t){return e[0].push(t[0]),e[1].push(t[1]),e}),[[],[]])}},{key:"getByInfiniteIndex",value:function(e,t){if(0===e.length)throw new Sa;if(t<0)throw new Ra;return e[t%e.length]}}]),e}(),ka={updateLabelNames:Ye,updateSuggestedLabelList:xn,updateRejectedSuggestedLabelList:function(e){return{type:ke.UPDATE_REJECTED_SUGGESTED_LABEL_LIST,payload:{labelList:e}}}},_a=Object(xe.b)((function(e){return{}}),ka)((function(e){var t=e.updateLabelNames,n=e.updateSuggestedLabelList,a=e.updateRejectedSuggestedLabelList,i=Object(o.useState)(!1),r=Object(L.a)(i,2),l=r[0],c=r[1],u=Object(o.useState)(Je.getSuggestedLabelList().map((function(e){return{name:e,flag:!1}}))),d=Object(L.a)(u,2),b=d[0],h=d[1],g=function(){return b.reduce((function(e,t){return t.flag&&e.push(t.name),e}),[])},m=function(){return b.reduce((function(e,t){return t.flag||e.push(t.name),e}),[])},p=function(){return b.map((function(e){return e.name}))},j=function(){return b.map((function(e,t){return Object(y.jsxs)("div",{className:"OptionsItem",onClick:function(){return function(e){var t=b.map((function(t,n){return e===n?Object(s.a)(Object(s.a)({},t),{},{flag:!t.flag}):t}));h(t);var n=t.reduce((function(e,t){return e&&t.flag}),!0);c(n)}(t)},children:[e.flag?Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-checked.png",alt:"checked"}):Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-unchecked.png",alt:"unchecked"}),e.name]},t)}))};return Object(y.jsx)(Qn,{title:"New classes found",renderContent:function(){return Object(y.jsxs)("div",{className:"SuggestLabelNamesPopupContent",children:[Object(y.jsx)("div",{className:"Message",children:"We found objects of classes that are not yet included in the list of labels. Select the names you would like to add. This will help to speed up the labeling process."}),Object(y.jsx)("div",{className:"AllToggle",children:Object(y.jsxs)("div",{className:"OptionsItem",onClick:function(){return l?(c(!1),void h(b.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{flag:!1})})))):(c(!0),void h(b.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{flag:!0})}))))},children:[l?Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-checked.png",alt:"checked"}):Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-unchecked.png",alt:"unchecked"}),l?"Deselect all":"Select all"]})}),Object(y.jsx)("div",{className:"LabelNamesContainer",children:Object(y.jsx)(Ae.a,{autoHeight:!0,children:Object(y.jsx)("div",{className:"LabelNamesContent",children:j()})})})]})},acceptLabel:"Accept",onAccept:function(){t(g().reduce((function(e,t,n){return e.push({name:t,id:Object(Ot.a)(),color:Da.getByInfiniteIndex(Ie.LABEL_COLORS_PALETTE,n)}),e}),bt.getLabelNames())),a(Je.getRejectedSuggestedLabelList().concat(m())),n([]),Ht.close()},rejectLabel:"Reject",onReject:function(){a(Je.getRejectedSuggestedLabelList().concat(p())),n([]),Ht.close()}})})),Na=(n(1298),n(1299),Object(xe.b)((function(e){return{projectType:e.general.projectData.type}}),{})((function(e){var t=e.title,n=e.activeLabelType,a=e.projectType,i=e.onLabelTypeChange,r=e.acceptLabel,l=e.onAccept,c=e.skipAcceptButton,s=e.disableAcceptButton,u=e.rejectLabel,d=e.onReject,b=e.renderInternalContent,h=Object(o.useState)(n),g=Object(L.a)(h,2),m=g[0],p=g[1];return Object(y.jsx)(Qn,{title:t,renderContent:function(){return Object(y.jsxs)("div",{className:"GenericLabelTypePopupContent",children:[Object(y.jsx)("div",{className:"LeftContainer",children:Xt.filter((function(e){return e.projectType===a})).map((function(e){return Object(y.jsx)(Kt,{image:e.imageSrc,imageAlt:e.imageAlt,buttonSize:{width:40,height:40},padding:20,onClick:function(){p(e.labelType),i(e.labelType)},isActive:m===e.labelType})}))}),Object(y.jsx)("div",{className:"RightContainer",children:b(m)})]})},acceptLabel:r,onAccept:function(){return l(m)},skipAcceptButton:c,disableAcceptButton:s,rejectLabel:u,onReject:function(){return d(m)}})})));!function(e){e.YOLO="YOLO",e.COCO="COCO",e.CSV="CSV",e.JSON="JSON",e.VOC="VOC",e.VGG="VGG"}(Pa||(Pa={}));var Ma=(Ea={},Object(ma.a)(Ea,ye.RECT,[{type:Pa.COCO,label:"Single file in COCO JSON format."},{type:Pa.YOLO,label:"Multiple files in YOLO format along with labels names definition - labels.txt file."}]),Object(ma.a)(Ea,ye.POINT,[]),Object(ma.a)(Ea,ye.LINE,[]),Object(ma.a)(Ea,ye.POLYGON,[{type:Pa.COCO,label:"Single file in COCO JSON format."}]),Object(ma.a)(Ea,ye.IMAGE_RECOGNITION,[]),Ea),Ba=(n(1300),function(){return Object(y.jsxs)("div",{className:"FeatureInProgress",children:[Object(y.jsx)("img",{draggable:!1,alt:"take_off",src:"/ico/take-off.png"}),Object(y.jsxs)("p",{className:"extraBold",children:["new feature ",Object(y.jsx)("br",{})," coming soon..."]})]})}),Fa=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).name="COCOAnnotationsLoadingError",a}return Object(V.a)(n)}(Object(ta.a)(Error)),Ua=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(e){var a;return Object(U.a)(this,n),(a=t.call(this,e)).name="COCOFormatValidationError",a}return Object(V.a)(n)}(Fa),Va=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"Unexpected error occurred during reading annotations from file")).name="COCOAnnotationReadingError",e}return Object(V.a)(n)}(Fa),za=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"COCO annotation file need to be in JSON format")).name="COCOAnnotationDeserializationError",e}return Object(V.a)(n)}(Fa),Ha=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(U.a)(this,n),(e=t.call(this,"COCO annotation requires single file but multiple were given")).name="COCOAnnotationFileCountError",e}return Object(V.a)(n)}(Fa),Ga=function(){function e(t){Object(U.a)(this,e),this.labelType=void 0,this.labelType=t}return Object(V.a)(e,[{key:"import",value:function(e,t,n){throw new Error("Method not implemented.")}}]),e}(),Wa=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"bbox2rect",value:function(e){return{x:e[0],y:e[1],width:e[2],height:e[3]}}},{key:"segmentation2vertices",value:function(e){return e.map((function(e){return Object(Ne.chunk)(e,2).map((function(e){return{x:e[0],y:e[1]}}))}))}}]),e}(),Ya=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n,[{key:"import",value:function(e,t,a){var i=this;e.length>1&&a(new Ha);var o=new FileReader;o.readAsText(e[0]),o.onloadend=function(e){try{var o=bt.getImagesData(),r=n.deserialize(e.target.result),l=i.applyLabels(o,r),c=l.imagesData,s=l.labelNames;t(c,s)}catch(u){a(u)}},o.onerror=function(){return a(new Va)}}},{key:"applyLabels",value:function(e,t){n.validateCocoFormat(t);var a,i=t.images,o=t.categories,r=t.annotations,l=n.mapCOCOCategories(o),c=e.map((function(e){return Ia.cleanAnnotations(e)})),s=n.partitionImageData(c,i),u=n.mapImageData(s.pass,i),d=Object(D.a)(r);try{for(d.s();!(a=d.n()).done;){var b=a.value;if(u[b.image_id]&&1!==b.iscrowd&&(this.labelType.includes(ye.RECT)&&u[b.image_id].labelRects.push(vt.createLabelRect(l[b.category_id].id,Wa.bbox2rect(b.bbox))),this.labelType.includes(ye.POLYGON))){var h,g=Wa.segmentation2vertices(b.segmentation),m=Object(D.a)(g);try{for(m.s();!(h=m.n()).done;){var p=h.value;u[b.image_id].labelPolygons.push(vt.createLabelPolygon(l[b.category_id].id,p))}}catch(f){m.e(f)}finally{m.f()}}}}catch(f){d.e(f)}finally{d.f()}var j=Object.values(u).concat(s.fail);return{imagesData:Ia.arrange(j,e.map((function(e){return e.id}))),labelNames:Object.values(l)}}}],[{key:"deserialize",value:function(e){try{return JSON.parse(e)}catch(t){throw new za}}},{key:"partitionImageData",value:function(e,t){var n=t.map((function(e){return e.file_name}));return Da.partition(e,(function(e){return n.includes(e.fileData.name)}))}},{key:"mapCOCOCategories",value:function(e){return e.reduce((function(e,t,n){return e[t.id]={id:Object(Ot.a)(),name:t.name,color:Da.getByInfiniteIndex(Ie.LABEL_COLORS_PALETTE,n)},e}),{})}},{key:"mapImageData",value:function(e,t){var n=t.reduce((function(e,t){return e[t.file_name]=t.id,e}),{});return e.reduce((function(e,t){return e[n[t.fileData.name]]=t,e}),{})}},{key:"validateCocoFormat",value:function(e){var t=n.requiredKeys.filter((function(t){return!e.hasOwnProperty(t)}));if(0!==t.length)throw new Ua("Uploaded file does not contain all required keys: ".concat(t))}}]),n}(Ga);Ya.requiredKeys=["images","annotations","categories"];var Za,Xa=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(V.a)(n,[{key:"import",value:function(e,t,a){try{var i=bt.getImagesData().map((function(e){return Ia.cleanAnnotations(e)})),o=n.filterFilesData(e,i),r=o.labelNameFile,l=o.annotationFiles,c=n.matchImagesWithAnnotations(i,l),s=Object(L.a)(c,2),u=s[0],d=s[1],b=Ke.readFile(r).then((function(e){return ra.parseLabelsNamesFromString(e)})),h=Ia.loadMissingImages(u),g=Ke.readFiles(d);Promise.all([b,h,g]).then((function(e){var a=Object(L.a)(e,3),o=a[0],r=a[2],l=Object(Ne.zip)(u,r).map((function(e){return n.applyAnnotations(e[0],e[1],o)}));t(n.injectImageDataWithAnnotations(i,l),o)})).catch((function(e){return a(e)}))}catch(m){a(m)}}}],[{key:"filterFilesData",value:function(e,t){var a=Da.partition(e,(function(e){return e.name===n.labelsFileName}));if(1!==a.pass.length)throw new aa;var i=t.map((function(e){return e.fileData.name})).map((function(e){return Ke.extractFileName(e)})),o=Da.partition(e,(function(e){return i.includes(Ke.extractFileName(e.name))}));return{labelNameFile:a.pass[0],annotationFiles:o.pass}}},{key:"matchImagesWithAnnotations",value:function(e,t){return Da.unzip(Da.match(e,t,(function(e,t){return Ke.extractFileName(e.fileData.name)===Ke.extractFileName(t.name)})))}},{key:"applyAnnotations",value:function(e,t,n){var a=Me.getById(e.id);return e.labelRects=ra.parseYOLOAnnotationsFromString(t,n,{width:a.width,height:a.height},e.fileData.name),e}},{key:"injectImageDataWithAnnotations",value:function(e,t){return e.map((function(e){var n=Object(Ne.find)(t,{id:e.id});return n||e}))}}]),n}(Ga);Xa.labelsFileName="labels.txt";var Ka,Ja=(Za={},Object(ma.a)(Za,Pa.COCO,Ya),Object(ma.a)(Za,Pa.CSV,void 0),Object(ma.a)(Za,Pa.JSON,void 0),Object(ma.a)(Za,Pa.VGG,void 0),Object(ma.a)(Za,Pa.VOC,void 0),Object(ma.a)(Za,Pa.YOLO,Xa),Za),qa={updateImageDataAction:We,updateLabelNamesAction:Ye,updateActiveLabelTypeAction:ze},Qa=Object(xe.b)((function(e){return{activeLabelType:e.labels.activeLabelType}}),qa)((function(e){var t=e.activeLabelType,n=e.updateImageDataAction,a=e.updateLabelNamesAction,i=e.updateActiveLabelTypeAction,r=function(e){var t=Ma[e];return 1===t.length?t[0].type:null},l=Object(o.useState)(t),c=Object(L.a)(l,2),u=c[0],d=c[1],b=Object(o.useState)(r(t)),h=Object(L.a)(b,2),g=h[0],m=h[1],p=Object(o.useState)([]),j=Object(L.a)(p,2),f=j[0],O=j[1],v=Object(o.useState)([]),x=Object(L.a)(v,2),I=x[0],C=x[1],A=Object(o.useState)(null),P=Object(L.a)(A,2),E=P[0],T=P[1],w=Object($n.a)({accept:[Pn.JSON,Pn.TEXT],multiple:!0,onDrop:function(e){new Ja[g]([u]).import(e,D,k)}}),S=w.getRootProps,R=w.getInputProps,D=function(e,t){O(t),C(e),T(null)},k=function(e){O([]),C([]),T(e)},_=function(e){return e.map((function(e){return Object(y.jsxs)("div",{className:"OptionsItem",onClick:function(){return t=e.type,void m(t);var t},children:[e.type===g?Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-checked.png",alt:"checked"}):Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-unchecked.png",alt:"unchecked"}),e.label]},e.type)}))};return Object(y.jsx)(Na,{activeLabelType:u,title:"Import ".concat(u.toLowerCase()," annotations"),onLabelTypeChange:function(e){d(e),m(r(e)),O([]),C([]),T(null)},acceptLabel:"Import",onAccept:function(e){0!==f.length&&0!==I.length&&(n(I),a(f),i(e),Ht.close())},skipAcceptButton:0===Ma[u].length,disableAcceptButton:0===I.length||0===f.length||!!E,rejectLabel:"Cancel",onReject:function(e){Ht.close()},renderInternalContent:function(e){return g||0===Ma[e].length?0===Ma[e].length?Object(y.jsx)(Ba,{}):Object(y.jsx)("div",Object(s.a)(Object(s.a)({},S({className:"DropZone"})),{},{children:E?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("input",Object(s.a)({},R())),Object(y.jsx)("img",{draggable:!1,alt:"upload",src:"/ico/box-opened.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Annotation import was unsuccessful"}),E.message,Object(y.jsx)("p",{className:"extraBold",children:"Try again"})]}):0!==I.length&&0!==f.length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{draggable:!1,alt:"uploaded",src:"/ico/box-closed.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Annotation ready for import"}),"After import you will lose all your current annotations"]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("input",Object(s.a)({},R())),Object(y.jsx)("img",{draggable:!1,alt:"upload",src:"/ico/box-opened.png"}),Object(y.jsx)("p",{className:"extraBold",children:"Drop ".concat(g," annotations")}),Object(y.jsx)("p",{children:"or"}),Object(y.jsx)("p",{className:"extraBold",children:"Click here to select them"})]})})):[Object(y.jsx)("div",{className:"Message",children:"Select file format you would like to use to import labels."}),Object(y.jsx)("div",{className:"Options",children:_(Ma[e])})]}})})),$a=(n(1301),n(620)),ei=n.n($a),ti=n(420),ni=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"sanitize",value:function(e){return e.replace("<","&lt;").replace(">","&gt;").replace("&","&amp;").replace("'","&#39;").replace("/","&#x2F;")}}]),e}(),ai=n(876),ii=n.n(ai),oi=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"getExportFileName",value:function(){var e=mt.getProjectName(),t=ii()().format("YYYY-MM-DD-hh-mm-ss");return"labels_".concat(e,"_").concat(t)}},{key:"saveAs",value:function(e,t){var n=new Blob([e],{type:"text/plain;charset=utf-8"});try{Object(ti.saveAs)(n,t)}catch(a){throw new Error(a)}}}]),e}(),ri=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"export",value:function(t){switch(t){case Pa.YOLO:e.exportAsYOLO();break;case Pa.VOC:e.exportAsVOC();break;case Pa.CSV:e.exportAsCSV();break;default:return}}},{key:"exportAsYOLO",value:function(){var t=new ei.a;bt.getImagesData().forEach((function(n){var a=e.wrapRectLabelsIntoYOLO(n);if(a){var i=n.fileData.name.replace(/\.[^/.]+$/,".txt");try{t.file(i,a)}catch(o){throw new Error(o)}}}));try{t.generateAsync({type:"blob"}).then((function(e){Object(ti.saveAs)(e,"".concat(oi.getExportFileName(),".zip"))}))}catch(n){throw new Error(n)}}},{key:"wrapRectLabelIntoYOLO",value:function(e,t,n){var a=function(e){return Ee.snapValueToRange(e,0,1).toFixed(6)},i=Object(Ne.findIndex)(t,{id:e.labelId}).toString(),o=Le.getCenter(e.rect),r=Le.getSize(e.rect),l=[o.x/n.width,o.y/n.height,r.width/n.width,r.height/n.height].map((function(e){return parseFloat(a(e))})),c=Object(L.a)(l,4),s=c[0],u=c[1],d=c[2],b=c[3];s+d/2>1&&(d=2*(1-s)),s-d/2<0&&(d=2*s),u+b/2>1&&(b=2*(1-u)),u-b/2<0&&(b=2*u);var h=[s,u,d,b].map((function(e){return a(e)}));return[i].concat(Object(_e.a)(h)).join(" ")}},{key:"wrapRectLabelsIntoYOLO",value:function(t){if(0===t.labelRects.length||!t.loadStatus)return null;var n=bt.getLabelNames(),a=Me.getById(t.id),i={width:a.width,height:a.height};return t.labelRects.map((function(t){return e.wrapRectLabelIntoYOLO(t,n,i)})).join("\n")}},{key:"exportAsVOC",value:function(){var t=new ei.a;bt.getImagesData().forEach((function(n){var a=e.wrapImageIntoVOC(n);if(a){var i=n.fileData.name.replace(/\.[^/.]+$/,".xml");try{t.file(i,a)}catch(o){throw new Error(o)}}}));try{t.generateAsync({type:"blob"}).then((function(e){Object(ti.saveAs)(e,"".concat(oi.getExportFileName(),".zip"))}))}catch(n){throw new Error(n)}}},{key:"wrapRectLabelsIntoVOC",value:function(e){if(0===e.labelRects.length||!e.loadStatus)return null;var t=bt.getLabelNames();return e.labelRects.map((function(e){var n=Object(Ne.findLast)(t,{id:e.labelId});return(n?["\t<object>","\t\t<name>".concat(n.name,"</name>"),"\t\t<pose>Unspecified</pose>","\t\t<truncated>0</truncated>","\t\t<difficult>0</difficult>","\t\t<bndbox>","\t\t\t<xmin>".concat(Math.round(e.rect.x),"</xmin>"),"\t\t\t<ymin>".concat(Math.round(e.rect.y),"</ymin>"),"\t\t\t<xmax>".concat(Math.round(e.rect.x+e.rect.width),"</xmax>"),"\t\t\t<ymax>".concat(Math.round(e.rect.y+e.rect.height),"</ymax>"),"\t\t</bndbox>","\t</object>"]:[]).join("\n")})).join("\n")}},{key:"wrapImageIntoVOC",value:function(t){var n=e.wrapRectLabelsIntoVOC(t),a=ni.sanitize(mt.getProjectName());if(n){var i=Me.getById(t.id);return["<annotation>","\t<folder>".concat(a,"</folder>"),"\t<filename>".concat(t.fileData.name,"</filename>"),"\t<path>/".concat(a,"/").concat(t.fileData.name,"</path>"),"\t<source>","\t\t<database>Unspecified</database>","\t</source>","\t<size>","\t\t<width>".concat(i.width,"</width>"),"\t\t<height>".concat(i.height,"</height>"),"\t\t<depth>3</depth>","\t</size>",n,"</annotation>"].join("\n")}return null}},{key:"exportAsCSV",value:function(){var t=bt.getImagesData().map((function(t){return e.wrapRectLabelsIntoCSV(t)})).filter((function(e){return!!e})).join("\n"),n="".concat(oi.getExportFileName(),".csv");oi.saveAs(t,n)}},{key:"wrapRectLabelsIntoCSV",value:function(e){if(0===e.labelRects.length||!e.loadStatus)return null;var t=Me.getById(e.id),n=bt.getLabelNames();return e.labelRects.map((function(a){var i=Object(Ne.findLast)(n,{id:a.labelId});return(i?[i.name,Math.round(a.rect.x).toString(),Math.round(a.rect.y).toString(),Math.round(a.rect.width).toString(),Math.round(a.rect.height).toString(),e.fileData.name,t.width.toString(),t.height.toString()]:[]).join(",")})).join("\n")}}]),e}(),li=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"export",value:function(t){t===Pa.CSV&&e.exportAsCSV()}},{key:"exportAsCSV",value:function(){var t=bt.getImagesData().map((function(t){return e.wrapRectLabelsIntoCSV(t)})).filter((function(e){return!!e})).join("\n"),n="".concat(oi.getExportFileName(),".csv");oi.saveAs(t,n)}},{key:"wrapRectLabelsIntoCSV",value:function(e){if(0===e.labelPoints.length||!e.loadStatus)return null;var t=Me.getById(e.id),n=bt.getLabelNames();return e.labelPoints.map((function(a){var i=Object(Ne.findLast)(n,{id:a.labelId});return(i?[i.name,Math.round(a.point.x).toString(),Math.round(a.point.y).toString(),e.fileData.name,t.width.toString(),t.height.toString()]:[]).join(",")})).join("\n")}}]),e}(),ci=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"export",value:function(){var t=bt.getImagesData(),n=bt.getLabelNames(),a=JSON.stringify(e.mapImagesDataToVGGObject(t,n)),i="".concat(oi.getExportFileName(),".json");oi.saveAs(a,i)}},{key:"mapImagesDataToVGGObject",value:function(t,n){return t.reduce((function(t,a){var i=e.mapImageDataToVGGFileData(a,n);return i&&(t[a.fileData.name]=i),t}),{})}},{key:"mapImageDataToVGGFileData",value:function(t,n){var a=e.mapImageDataToVGG(t,n);return a?{fileref:"",size:t.fileData.size,filename:t.fileData.name,base64_img_data:"",file_attributes:{},regions:a}:null}},{key:"mapImageDataToVGG",value:function(t,n){if(!t.loadStatus||!t.labelPolygons||!t.labelPolygons.length||!n||!n.length)return null;var a=e.getValidPolygonLabels(t);return a.length?a.reduce((function(t,a,i){var o=Object(Ne.findLast)(n,{id:a.labelId});return o&&(t[i.toString()]={shape_attributes:e.mapPolygonToVGG(a.vertices),region_attributes:{label:o.name}}),t}),{}):null}},{key:"getValidPolygonLabels",value:function(e){return e.labelPolygons.filter((function(e){return null!==e.labelId&&!!e.vertices.length}))}},{key:"mapPolygonToVGG",value:function(e){return e&&e.length?{name:"polygon",all_points_x:e.map((function(e){return e.x})).concat(e[0].x),all_points_y:e.map((function(e){return e.y})).concat(e[0].y)}:null}}]),e}(),si=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"export",value:function(){var t=bt.getImagesData(),n=bt.getLabelNames(),a=mt.getProjectName(),i=e.mapImagesDataToCOCOObject(t,n,a),o=JSON.stringify(i),r="".concat(oi.getExportFileName(),".json");oi.saveAs(o,r)}},{key:"mapImagesDataToCOCOObject",value:function(t,n,a){return{info:e.getInfoComponent(a),images:e.getImagesComponent(t),annotations:e.getAnnotationsComponent(t,n),categories:e.getCategoriesComponent(n)}}},{key:"getInfoComponent",value:function(e){return{description:e}}},{key:"getCategoriesComponent",value:function(e){return e.map((function(e,t){return{id:t+1,name:e.name}}))}},{key:"getImagesComponent",value:function(e){return e.filter((function(e){return e.loadStatus})).filter((function(e){return 0!==e.labelPolygons.length})).map((function(e,t){var n=Me.getById(e.id);return{id:t+1,width:n.width,height:n.height,file_name:e.fileData.name}}))}},{key:"getAnnotationsComponent",value:function(t,n){var a=e.mapLabelsData(n),i=0,o=t.filter((function(e){return e.loadStatus})).filter((function(e){return 0!==e.labelPolygons.length})).map((function(t,n){return t.labelPolygons.map((function(t){return{id:i++,iscrowd:0,image_id:n+1,category_id:a[t.labelId],segmentation:e.getCOCOSegmentation(t.vertices),bbox:e.getCOCOBbox(t.vertices),area:e.getCOCOArea(t.vertices)}}))}));return Object(Ne.flatten)(o)}},{key:"mapLabelsData",value:function(e){return e.reduce((function(e,t,n){return e[t.id]=n+1,e}),{})}},{key:"getCOCOSegmentation",value:function(e){var t=e.map((function(e){return[e.x,e.y]}));return[Object(Ne.flatten)(t)]}},{key:"getCOCOBbox",value:function(e){var t,n=e[0].x,a=e[0].x,i=e[0].y,o=e[0].y,r=Object(D.a)(e);try{for(r.s();!(t=r.n()).done;){var l=t.value;n>l.x&&(n=l.x),a<l.x&&(a=l.x),i>l.y&&(i=l.y),o<l.y&&(o=l.y)}}catch(c){r.e(c)}finally{r.f()}return[n,i,a-n,o-i]}},{key:"getCOCOArea",value:function(e){for(var t=0,n=e.length-1,a=0;a<e.length;a++)t+=(e[n].x+e[a].x)*(e[n].y-e[a].y),n=a;return Math.abs(t/2)}}]),e}(),ui=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"export",value:function(e){switch(e){case Pa.VGG:ci.export();break;case Pa.COCO:si.export();break;default:return}}}]),e}(),di=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"export",value:function(t){t===Pa.CSV&&e.exportAsCSV()}},{key:"exportAsCSV",value:function(){var t=bt.getImagesData().map((function(t){return e.wrapLineLabelsIntoCSV(t)})).filter((function(e){return!!e})).join("\n"),n="".concat(oi.getExportFileName(),".csv");oi.saveAs(t,n)}},{key:"wrapLineLabelsIntoCSV",value:function(e){if(0===e.labelLines.length||!e.loadStatus)return null;var t=Me.getById(e.id),n=bt.getLabelNames();return e.labelLines.map((function(a){var i=Object(Ne.findLast)(n,{id:a.labelId});return(i?[i.name,Math.round(a.line.start.x).toString(),Math.round(a.line.start.y).toString(),Math.round(a.line.end.x).toString(),Math.round(a.line.end.y).toString(),e.fileData.name,t.width.toString(),t.height.toString()]:[]).join(",")})).join("\n")}}]),e}(),bi=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"export",value:function(t){switch(t){case Pa.CSV:e.exportAsCSV();break;case Pa.JSON:e.exportAsJSON();break;default:return}}},{key:"exportAsCSV",value:function(){var t=bt.getImagesData().filter((function(e){return e.labelNameIds.length>0})).map((function(t){return e.wrapLabelNamesIntoCSV(t)})).join("\n"),n="".concat(oi.getExportFileName(),".csv");oi.saveAs(t,n)}},{key:"exportAsJSON",value:function(){var t=bt.getImagesData().filter((function(e){return e.labelNameIds.length>0})).map((function(t){return{image:t.fileData.name,annotations:e.wrapLabelNamesIntoJSON(t)}})),n=JSON.stringify(t),a="".concat(oi.getExportFileName(),".json");oi.saveAs(n,a)}},{key:"wrapLabelNamesIntoCSV",value:function(e){if(0===e.labelNameIds.length||!e.loadStatus)return null;var t=bt.getLabelNames(),n=e.labelNameIds.map((function(e){return Object(Ne.findLast)(t,{id:e}).name}));return(0!==n.length?[e.fileData.name,'"['.concat(n.toString(),']"')]:[]).join(",")}},{key:"wrapLabelNamesIntoJSON",value:function(e){if(0===e.labelNameIds.length||!e.loadStatus)return[];var t=bt.getLabelNames();return e.labelNameIds.map((function(e){return Object(Ne.findLast)(t,{id:e}).name}))}}]),e}(),hi=(Ka={},Object(ma.a)(Ka,ye.RECT,[{type:Pa.YOLO,label:"A .zip package containing files in YOLO format."},{type:Pa.VOC,label:"A .zip package containing files in VOC XML format."},{type:Pa.CSV,label:"Single CSV file."}]),Object(ma.a)(Ka,ye.POINT,[{type:Pa.CSV,label:"Single CSV file."}]),Object(ma.a)(Ka,ye.LINE,[{type:Pa.CSV,label:"Single CSV file."}]),Object(ma.a)(Ka,ye.POLYGON,[{type:Pa.VGG,label:"Single file in VGG JSON format."},{type:Pa.COCO,label:"Single file in COCO JSON format."}]),Object(ma.a)(Ka,ye.IMAGE_RECOGNITION,[{type:Pa.CSV,label:"Single CSV file."},{type:Pa.JSON,label:"Single JSON file."}]),Ka),gi=Object(xe.b)((function(e){return{activeLabelType:e.labels.activeLabelType}}),{})((function(e){var t=e.activeLabelType,n=Object(o.useState)(t),a=Object(L.a)(n,2),i=a[0],r=a[1],l=Object(o.useState)(null),c=Object(L.a)(l,2),s=c[0],u=c[1],d=function(e){return e.map((function(e){return Object(y.jsxs)("div",{className:"OptionsItem",onClick:function(){return function(e){u(e)}(e.type)},children:[e.type===s?Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-checked.png",alt:"checked"}):Object(y.jsx)("img",{draggable:!1,src:"/ico/checkbox-unchecked.png",alt:"unchecked"}),e.label]},e.type)}))};return Object(y.jsx)(Na,{activeLabelType:i,title:"Export ".concat(i.toLowerCase()," annotations"),onLabelTypeChange:function(e){r(e),u(null)},acceptLabel:"Export",onAccept:function(e){switch(e){case ye.RECT:ri.export(s);break;case ye.POINT:li.export(s);break;case ye.LINE:di.export(s);break;case ye.POLYGON:ui.export(s);break;case ye.IMAGE_RECOGNITION:bi.export(s)}Ht.close()},disableAcceptButton:!s,rejectLabel:"Cancel",onReject:function(e){Ht.close()},renderInternalContent:function(e){return[Object(y.jsx)("div",{className:"Message",children:"Select label type and the file format you would like to use to export labels."}),Object(y.jsx)("div",{className:"Options",children:d(hi[e])})]}})})),mi=Object(xe.b)((function(e){return{activePopupType:e.general.activePopupType}}))((function(e){var t=e.activePopupType;return t&&Object(y.jsx)("div",{className:"PopupView",children:function(){switch(t){case i.LOAD_LABEL_NAMES:return Object(y.jsx)(ca,{});case i.EXPORT_ANNOTATIONS:return Object(y.jsx)(gi,{});case i.IMPORT_ANNOTATIONS:return Object(y.jsx)(Qa,{});case i.INSERT_LABEL_NAMES:return Object(y.jsx)(va,{isUpdate:!1});case i.UPDATE_LABEL:return Object(y.jsx)(va,{isUpdate:!0});case i.EXIT_PROJECT:return Object(y.jsx)(ya,{});case i.IMPORT_IMAGES:return Object(y.jsx)(Aa,{});case i.LOAD_AI_MODEL:return Object(y.jsx)(Ta,{});case i.SUGGEST_LABEL_NAMES:return Object(y.jsx)(_a,{});case i.LOADER:return Object(y.jsx)(Re.ClipLoader,{size:50,color:qe.getLeadingColor(),loading:!0});default:return null}}()})})),pi={updateActiveImageIndexAction:Be,addImageDataAction:Ge,updateProjectDataAction:it,updateActivePopupTypeAction:tt,updateImageDataAction:We,updateLabelNamesAction:Ye,updateActiveLabelTypeAction:ze,updateActiveLabelNameId:Fe,updateLabelNames:Ye,updateProjectData:it,updateActiveImageIndex:Be,updateImageData:We,updateFirstLabelCreatedFlag:Ze},ji=Object(xe.b)((function(e){return{projectType:e.general.projectData.type,windowSize:e.general.windowSize,ObjectDetectorLoaded:e.ai.isObjectDetectorLoaded,PoseDetectionLoaded:e.ai.isPoseDetectorLoaded,projectData:e.general.projectData,activeLabelType:e.labels.activeLabelType}}),pi)((function(e){var t=Object(o.useState)(!1),n=Object(L.a)(t,2),a=(n[0],n[1]),i=Object(o.useState)(!1),r=Object(L.a)(i,2),l=r[0],c=r[1],u=Pa.YOLO,d=ye.RECT;return Object(o.useEffect)((function(){var t;console.log("******************* MOUNTED");var n=function(t,n){e.updateImageDataAction(t),e.updateLabelNamesAction(n),e.updateActiveLabelTypeAction(d),console.log("import success"),a(!0)},i=function(e){console.log(e)};function o(){return o=Object(fe.a)(ve.a.mark((function a(){var o,r,l,b;return ve.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,F.a.get(e.imageUri,{responseType:"blob"});case 2:o=a.sent,r=o.data,t=new File([r],"image.png"),console.log(t.size),l=new File(e.labelsData,"labels.txt"),b=new File(e.annotationData,"annotation.txt"),e.updateLabelNames([]),e.updateImageData([]),e.updateFirstLabelCreatedFlag(!1),e.updateProjectDataAction(Object(s.a)(Object(s.a)({},e.projectData),{},{type:Pt.OBJECT_DETECTION})),e.updateActiveImageIndexAction(0),e.addImageDataAction([Ia.createImageDataFromFileData(t)]),c(!0),new Ja[u]([d]).import([l,b],n,i);case 17:case"end":return a.stop()}}),a)}))),o.apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){console.log("******************* UNMOUNTED"),!1}}),[]),Object(y.jsxs)("div",{className:Se()("App",{AI:e.ObjectDetectorLoaded||e.PoseDetectionLoaded}),draggable:!1,children:[l&&Object(y.jsx)(Jn,{}),Object(y.jsx)(mi,{})]})})),fi=(n(1302),function(e){return e.current.endsWith(e.src)?Object(y.jsx)("img",{src:e.src,width:e.width,height:e.height,loading:"lazy",onClick:e.onClick,style:{border:"5px solid red"}}):Object(y.jsx)("img",{src:e.src,width:e.width,height:e.height,loading:"lazy",onClick:e.onClick})}),Oi=function(){var e=Object(o.useState)([]),t=Object(L.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)(""),r=Object(L.a)(i,2),l=r[0],c=r[1],s=Object(o.useState)(""),u=Object(L.a)(s,2),d=u[0],b=u[1],h=Object(o.useState)([]),g=Object(L.a)(h,2),m=g[0],p=g[1],j=Object(o.useState)([[]]),f=Object(L.a)(j,2),O=f[0],v=f[1],x=Object(o.useState)(!1),I=Object(L.a)(x,2),A=I[0],P=I[1],E=function(e){var t=e.currentTarget.src,n=t.substring(t.lastIndexOf("/")+1);c(t),b(n),p([])};Object(o.useEffect)((function(){F.a.get("/samples").then((function(e){var t,n=[],i=Object(D.a)(e.data);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(o)}}catch(r){i.e(r)}finally{i.f()}a(n),console.log(n)}),(function(e){console.log(e)}))}),[]);var T=function(){F.a.get("/inference/sample/"+d).then((function(e){var t,n=[],a=[],i=Object(D.a)(e.data);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(o.label);var r=o.bbox.toString().split(",");a.push(r)}}catch(l){i.e(l)}finally{i.f()}p(n),v(a)}),(function(e){console.log(e)}))};if(A){var w=[];O.forEach((function(e){w.push(e+"\r")}));var S=[];return["squat","aluminothermic weld (atw)","tri metal weld (tmw)","fishplate joint (fj)","grinding marks","head check error","insulated rail joint (irj)","flash butt weld (fbw)","corrugation","rail head anomaly"].forEach((function(e){S.push(e+"\r")})),Object(y.jsxs)(C.Container,{title:"Image annotation",children:[Object(y.jsx)(ji,{imageUri:l,labelsData:S,annotationData:w}),Object(y.jsx)(C.FormField,{controlId:"button",children:Object(y.jsx)(C.Button,{variant:"primary",onClick:function(){return P(!1)},children:"Close"})})]})}return""===d?Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(C.Container,{title:"Select image file from sample list",children:Object(y.jsx)(pe.a,{cols:12,rowHeight:128,gap:10,variant:"quilted",style:{height:"550px"},children:n.map((function(e,t){return Object(y.jsx)(je.a,{rows:2,children:Object(y.jsx)(fi,{src:e,width:128,height:256,current:l,onClick:E})},e)}))})}),Object(y.jsx)(C.Container,{title:"Start inference",children:Object(y.jsx)(C.FormField,{controlId:"button",children:Object(y.jsx)(C.Button,{variant:"primary",onClick:T,children:"Inference"})})})]}):Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(C.Container,{title:"Select image file from sample list",children:Object(y.jsx)(pe.a,{cols:12,rowHeight:128,gap:10,variant:"quilted",style:{height:"550px"},children:n.map((function(e,t){return Object(y.jsx)(je.a,{rows:2,children:Object(y.jsx)(fi,{src:e,width:128,height:256,current:l,onClick:E})},e)}))})}),Object(y.jsxs)(C.Container,{title:"Start inference",children:[Object(y.jsx)(C.FormField,{controlId:"button",children:Object(y.jsx)(X,{src:l,label:m,bbox:O})}),Object(y.jsxs)(C.Inline,{children:[Object(y.jsx)(C.FormField,{controlId:"button",children:Object(y.jsx)(C.Button,{variant:"primary",onClick:T,children:"Inference"})}),Object(y.jsx)(C.FormField,{controlId:"button",children:Object(y.jsx)(C.Button,{onClick:function(){P(!0)},children:"Annotate"})})]})]})]})},vi=function(e){var t=Object(o.useState)("2"),n=Object(L.a)(t,2),a=n[0],i=n[1],r=function(e,t){i(t||"")};return"1"===a?Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(C.Heading,{variant:"h1",children:e.name}),Object(y.jsx)(C.Container,{title:"Demo type",children:Object(y.jsx)(R.a,{onChange:r,items:[Object(y.jsx)(w.a,{value:"0",checked:!1,children:"Batch transform"}),Object(y.jsx)(w.a,{value:"1",checked:!0,children:"Realtime inference with uploaded image"}),Object(y.jsx)(w.a,{value:"2",checked:!1,children:"Realtime inference with sample image"})]})}),Object(y.jsx)($,{})]}):"0"===a?Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(C.Heading,{variant:"h1",children:e.name}),Object(y.jsx)(C.Container,{title:"Demo type",children:Object(y.jsx)(R.a,{onChange:r,items:[Object(y.jsx)(w.a,{value:"0",checked:!0,children:"Batch transform"}),Object(y.jsx)(w.a,{value:"1",checked:!1,children:"Realtime inference with uploaded image"}),Object(y.jsx)(w.a,{value:"2",checked:!1,children:"Realtime inference with sample image"})]})}),Object(y.jsx)(me,{})]}):Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(C.Heading,{variant:"h1",children:e.name}),Object(y.jsx)(C.Container,{title:"Demo type",children:Object(y.jsx)(R.a,{onChange:r,items:[Object(y.jsx)(w.a,{value:"0",checked:!1,children:"Batch transform"}),Object(y.jsx)(w.a,{value:"1",checked:!1,children:"Realtime inference with uploaded image"}),Object(y.jsx)(w.a,{value:"2",checked:!0,children:"Realtime inference with sample image"})]})}),Object(y.jsx)(Oi,{})]})},xi=n(160),yi=n.n(xi),Ii=n(88),Ci=n.n(Ii),Ai=n(142),Pi=n.n(Ai),Ei=[{id:"name",width:200,Header:"Name",accessor:"name"},{id:"creation_time",width:200,Header:"Creation time",accessor:"creation_time"},{id:"duration",width:200,Header:"Duration",accessor:"duration"},{id:"status",width:200,Header:"Status",accessor:"status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.status){case"completed":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Completed"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});case"info":return Object(y.jsx)(Ci.a,{statusType:"info",children:"In progress"});default:return null}return null}}],Li=[{name:"training-job-1",creation_time:"Aug 26, 2021 03:01 UTC",duration:"3 hours",status:"completed"}],Ti=function(e){var t=r.a.useCallback((function(e){return e.name}),[]),n=Object(d.useHistory)(),a=Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{onClick:function(){return alert("Add button clicked")},children:"Sample code"}),Object(y.jsx)(Pi.a,{content:"Action",items:[{text:"Clone"},{text:"Create model"},{text:"Stop",disabled:!0},{text:"Add/Edit tags"}]}),Object(y.jsx)(Q.a,{variant:"primary",onClick:function(){n.push("/form/"+e.name+"/trainingjob")},children:"Create"})]});return Object(y.jsx)(yi.a,{actionGroup:a,tableTitle:"Training jobs",multiSelect:!1,columnDefinitions:Ei,items:Li,onSelectionChange:console.log,getRowId:t})},wi=[{id:"name",width:100,Header:"Name",accessor:"name"},{id:"creation_time",width:200,Header:"Creation time",accessor:"creation_time"},{id:"training_job",width:400,Header:"Training job",accessor:"training_job"}],Si=[{name:"model-1",creation_time:"Aug 26, 2021 03:01 UTC",training_job:"training-job-1"}],Ri=function(e){var t=r.a.useCallback((function(e){return e.name}),[]),n=Object(d.useHistory)(),a=Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{onClick:function(){return alert("Add button clicked")},children:"Sample code"}),Object(y.jsx)(Pi.a,{content:"Action",items:[{text:"Clone"},{text:"Create endpoint"},{text:"Add/Edit tags"}]}),Object(y.jsx)(Q.a,{variant:"primary",onClick:function(){n.push("/form/"+e.name+"/model")},children:"Create"})]});return Object(y.jsx)(yi.a,{actionGroup:a,tableTitle:"Models",multiSelect:!1,columnDefinitions:wi,items:Si,onSelectionChange:console.log,getRowId:t})},Di=[{id:"name",width:100,Header:"Name",accessor:"name"},{id:"model",width:400,Header:"Container image",accessor:"model"},{id:"creation_time",width:200,Header:"Creation time",accessor:"creation_time"},{id:"status",width:400,Header:"Model artificate",accessor:"status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.status){case"completed":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"In service"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});case"info":return Object(y.jsx)(Ci.a,{statusType:"info",children:"In progress"});default:return null}return null}},{id:"last_update",width:400,Header:"Last updated",accessor:"last_updated"}],ki=[{name:"endpoint-1",model:"model-1",creation_time:"Aug 26, 2021 03:01 UTC",status:"completed",last_updated:"Aug 26, 2021 03:01 UTC"}],_i=function(e){var t=r.a.useCallback((function(e){return e.name}),[]),n=Object(d.useHistory)(),a=Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{onClick:function(){return alert("Add button clicked")},children:"Sample code"}),Object(y.jsx)(Pi.a,{content:"Action",items:[{text:"Clone"},{text:"Create rest api"},{text:"Stop",disabled:!0},{text:"Add/Edit tags"}]}),Object(y.jsx)(Q.a,{variant:"primary",onClick:function(){n.push("/form/"+e.name+"/endpoint")},children:"Create"})]});return Object(y.jsx)(yi.a,{actionGroup:a,tableTitle:"Models",multiSelect:!1,columnDefinitions:Di,items:ki,onSelectionChange:console.log,getRowId:t})},Ni=[{id:"name",width:100,Header:"Name",accessor:"name"},{id:"endpoint",width:100,Header:"Endpoint",accessor:"endpoint"},{id:"creation_time",width:200,Header:"Creation time",accessor:"creation_time"},{id:"api",width:150,Header:"Api gateway",accessor:"api"},{id:"path",width:100,Header:"Api path",accessor:"path"},{id:"uri",width:400,Header:"Api uri",accessor:"uri"}],Mi=[{name:"model-1",endpoint:"endpoint-1",creation_time:"Aug 26, 2021 03:01 UTC",api:"spot-bot-api",path:"/image",uri:"https://9tary5tnu5.execute-api.ap-east-1.amazonaws.com/Prod/image"}],Bi=function(e){var t=r.a.useCallback((function(e){return e.name}),[]),n=Object(d.useHistory)(),a=Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{onClick:function(){return alert("Add button clicked")},children:"Sample code"}),Object(y.jsx)(Pi.a,{content:"Action",items:[{text:"Clone"},{text:"Delete"},{text:"Add/Edit tags"}]}),Object(y.jsx)(Q.a,{variant:"primary",onClick:function(){n.push("/form/"+e.name+"/restapi")},children:"Create"})]});return Object(y.jsx)(yi.a,{actionGroup:a,tableTitle:"Models",multiSelect:!1,columnDefinitions:Ni,items:Mi,onSelectionChange:console.log,getRowId:t})},Fi=[{id:"name",width:200,Header:"Name",accessor:"name"},{id:"model",width:200,Header:"Model",accessor:"model"},{id:"version",width:200,Header:"Version",accessor:"version"},{id:"version_created",width:200,Header:"Version created",accessor:"version_created"}],Ui=[{name:"component-model-1",model:"model-1",version:"1.0.0",version_created:"Aug 26, 2021 03:01 UTC"}],Vi=function(e){var t=r.a.useCallback((function(e){return e.name}),[]),n=Object(d.useHistory)(),a=Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{onClick:function(){return alert("Add button clicked")},children:"Sample code"}),Object(y.jsx)(Pi.a,{content:"Action",items:[{text:"Clone"},{text:"Create endpoint"},{text:"Add/Edit tags"}]}),Object(y.jsx)(Q.a,{variant:"primary",onClick:function(){n.push("/form/"+e.name+"/component")},children:"Create"})]});return Object(y.jsx)(yi.a,{actionGroup:a,tableTitle:"Greengrass components",multiSelect:!1,columnDefinitions:Fi,items:Ui,onSelectionChange:console.log,getRowId:t})},zi=[{id:"name",width:300,Header:"Name",accessor:"name"},{id:"target_name",width:200,Header:"Target name",accessor:"target_name"},{id:"target_type",width:100,Header:"Target type",accessor:"target_type"},{id:"status",width:100,Header:"Model artificate",accessor:"status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.status){case"active":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Active"});case"completed":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Completed"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});case"canceled":return Object(y.jsx)(Ci.a,{statusType:"info",children:"Canceled"});default:return null}return null}},{id:"deployment_created",width:200,Header:"Deployment created",accessor:"deployment_created"}],Hi=[{name:"Deployment for GreengrassQuickStartGroup",target_name:"GreengrassQuickStartGroup",target_type:"Thing group",status:"active",deployment_created:"Aug 26, 2021 03:01 UTC"}],Gi=function(e){var t=r.a.useCallback((function(e){return e.name}),[]),n=Object(d.useHistory)(),a=Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{onClick:function(){return alert("Add button clicked")},children:"Sample code"}),Object(y.jsx)(Pi.a,{content:"Action",items:[{text:"Clone"},{text:"Create rest api"},{text:"Stop",disabled:!0},{text:"Add/Edit tags"}]}),Object(y.jsx)(Q.a,{variant:"primary",onClick:function(){n.push("/form/"+e.name+"/deployment")},children:"Create"})]});return Object(y.jsx)(yi.a,{actionGroup:a,tableTitle:"Greengrass deployments",multiSelect:!1,columnDefinitions:zi,items:Hi,onSelectionChange:console.log,getRowId:t})},Wi=[{id:"name",width:100,Header:"Name",accessor:"name"},{id:"training_job_status",width:130,Header:"Training job",accessor:"training_job_status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.training_job_status){case"completed":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Completed"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});case"info":return Object(y.jsx)(Ci.a,{statusType:"info",children:"In progress"});default:return null}return null}},{id:"model_status",width:80,Header:"Model",accessor:"model_status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.model_status){case"active":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Active"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});default:return null}return null}},{id:"endpoint_status",width:100,Header:"Endpoint",accessor:"endpoint_status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.endpoint_status){case"completed":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Completed"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});case"info":return Object(y.jsx)(Ci.a,{statusType:"info",children:"In progress"});default:return null}return null}},{id:"restapi_status",width:100,Header:"Rest api",accessor:"restapi_status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.restapi_status){case"active":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Active"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});default:return null}return null}},{id:"component_status",width:100,Header:"Greengrass component",accessor:"component_status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.component_status){case"active":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Active"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});default:return null}return null}},{id:"deployment_status",width:100,Header:"Greengrass deployment",accessor:"deployment_status",Cell:function(e){var t=e.row;if(t&&t.original)switch(t.original.deployment_status){case"completed":return Object(y.jsx)(Ci.a,{statusType:"positive",children:"Completed"});case"error":return Object(y.jsx)(Ci.a,{statusType:"negative",children:"Error"});case"info":return Object(y.jsx)(Ci.a,{statusType:"info",children:"In progress"});default:return null}return null}},{id:"creation_time",width:150,Header:"Creation time",accessor:"creation_time"},{id:"last_update",width:150,Header:"Last updated",accessor:"last_updated"}],Yi=[{name:"training-job-1",training_job_status:"completed",model_status:"active",endpoint_status:"completed",restapi_status:"active",component_status:"active",deployment_status:"completed",creation_time:"Aug 26, 2021 03:01 UTC",last_updated:"Aug 26, 2021 03:01 UTC"}],Zi=function(e){var t=r.a.useCallback((function(e){return e.name}),[]),n=Object(d.useHistory)(),a=Object(y.jsxs)(ue.a,{children:[Object(y.jsx)(Q.a,{onClick:function(){return alert("Add button clicked")},children:"Sample code"}),Object(y.jsx)(Pi.a,{content:"Action",items:[{text:"Clone"},{text:"Create model"},{text:"Stop",disabled:!0},{text:"Add/Edit tags"}]}),Object(y.jsx)(Q.a,{variant:"primary",onClick:function(){n.push("/form/"+e.name+"/pipeline")},children:"Create"})]});return Object(y.jsx)(yi.a,{actionGroup:a,tableTitle:"Pipeline",multiSelect:!1,columnDefinitions:Wi,items:Yi,onSelectionChange:console.log,getRowId:t})},Xi=function(e){var t=Object(d.useParams)().name,n=Object(d.useHistory)(),a=[{label:"Demo",id:"demo",content:Object(y.jsx)(vi,{name:t})},{label:"ML pipelines",id:"pipeline",content:Object(y.jsx)(Zi,{name:t})},{label:"Training jobs",id:"trainingjob",content:Object(y.jsx)(Ti,{name:t})},{label:"Models",id:"model",content:Object(y.jsx)(Ri,{name:t})},{label:"Endpoints",id:"endpoint",content:Object(y.jsx)(_i,{name:t})},{label:"Rest apis",id:"restapi",content:Object(y.jsx)(Bi,{name:t})},{label:"Greengrass components",id:"component",content:Object(y.jsx)(Vi,{name:t})},{label:"Greengrass deployments",id:"deployment",content:Object(y.jsx)(Gi,{name:t})}];return Object(y.jsx)(E.a,{tabs:a,variant:"container",activeId:e.activeId,onChange:function(e){n.push("/case/"+t+"/"+e)}})},Ki=function(){return Object(y.jsxs)(C.Stack,{children:[Object(y.jsxs)(C.Container,{title:"About Yolov5",children:[Object(y.jsx)(C.Text,{children:"YOLOv5 \ud83d\ude80 is a family of object detection architectures and models pretrained on the COCO dataset, and represents Ultralytics open-source research into future vision AI methods, incorporating lessons learned and best practices evolved over thousands of hours of research and development."}),Object(y.jsx)("img",{src:"/yolov5.jpg",width:"1000"})]}),Object(y.jsx)(C.Container,{title:"Yolov5 project",children:Object(y.jsxs)(C.Text,{children:["Check out ",Object(y.jsx)(C.Link,{href:"https://github.com/ultralytics/yolov5",children:" Yolov5 "})," for source code and full documentation on training, testing and deployment."]})}),Object(y.jsx)(C.Container,{title:"Yolov5 SageMaker",children:Object(y.jsxs)(C.Text,{children:["See the ",Object(y.jsx)(C.Link,{href:"https://github.com/whn09/yolov5_sagemaker",children:" Yolov5 SageMaker"})," on Yolov5 training, testing and deployment on AWS SageMaker."]})})]})},Ji=function(){return Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(C.Container,{title:"About PPE",children:Object(y.jsx)(C.Text,{children:'Personal protective equipment, commonly referred to as "PPE", is equipment worn to minimize exposure to hazards that cause serious workplace injuries and illnesses. These injuries and illnesses may result from contact with chemical, radiological, physical, electrical, mechanical, or other workplace hazards. Personal protective equipment may include items such as gloves, safety glasses and shoes, earplugs or muffs, hard hats, respirators, or coveralls, vests and full body suits.'})}),Object(y.jsx)(C.Container,{title:"AWS PPE detection solution",children:Object(y.jsx)(C.Text,{children:"A suite of PPE Detector hardware + AI + 3rd party service solutions. It aims to transform the existing physical assets of manufacturing enterprises into smart assets. For example, there are many IP camera system. These cameras are primarily used to record video capabilities in fixed physical areas and do not have the ability to actively monitor, for example, whether workers are wearing safety helmets correctly. Using the out-of-the-box AI kit, you can connect these IP cameras to the kit, and the AI model in the kit can identify the worker's helmet wearing in the video in real time. Once sent If you violate the rules (without wearing a helmet), an alarm message will be automatically sent to the manager's corporate WeChat, and picture evidence will be provided.                "})}),Object(y.jsx)(C.Container,{title:"Architecture diagram",children:Object(y.jsx)("img",{src:"/ppe.png",width:"1000"})}),Object(y.jsx)(C.Container,{title:"Reference Website",children:Object(y.jsxs)(C.Text,{children:["Check out ",Object(y.jsx)(C.Link,{href:"https://cn.spot-bot.examples.pro",children:" PPE Detection "})," for demostration."]})})]})},qi=[{label:"Standard",options:[{label:"ml.m5.large",value:"ml.m5.large"},{label:"ml.m5.xlarge",value:"ml.m5.xlarge"},{label:"ml.m5.2xlarge",value:"ml.m5.2xlarge"},{label:"ml.m5.4xlarge",value:"ml.m5.4xlarge"},{label:"ml.m5.12xlarge",value:"ml.m5.12xlarge"},{label:"ml.m5.24xlarge",value:"ml.m5.24xlarge"},{label:"ml.m4.xlarge",value:"ml.m4.xlarge"},{label:"ml.m4.2xlarge",value:"ml.m4.2xlarge"},{label:"ml.m4.4xlarge",value:"ml.m4.4xlarge"},{label:"ml.m4.10large",value:"ml.m4.10large"},{label:"ml.m4.16xlarge",value:"ml.m4.16xlarge"}]},{label:"Compute optimized",options:[{label:"ml.c5.xlarge",value:"ml.c5.xlarge"},{label:"ml.c5.2xlarge",value:"ml.c5.2xlarge"},{label:"ml.c5.4xlarge",value:"ml.c5.4xlarge"},{label:"ml.c5.9xlarge",value:"ml.c5.9xlarge"},{label:"ml.c5.18xlarge",value:"ml.c5.18xlarge"},{label:"ml.c4.1xlarge",value:"ml.c4.xlarge"},{label:"ml.c4.2xlarge",value:"ml.c4.2xlarge"},{label:"ml.c4.4xlarge",value:"ml.c4.4xlarge"},{label:"ml.c4.8xlarge",value:"ml.c4.8xlarge"},{label:"ml.c5n.xlarge",value:"ml.c5n.xlarge"},{label:"ml.c5n.2xlarge",value:"ml.c5n.2xlarge"},{label:"ml.c5n.4xlarge",value:"ml.c5n.4xlarge"},{label:"ml.c5n.9xlarge",value:"ml.c5n.9xlarge"},{label:"ml.c5n.18xlarge",value:"ml.c5n.18xlarge"}]},{label:"Accelerated computing",options:[{label:"ml.p2.xlarge",value:"ml.p2.xlarge"},{label:"ml.p2.8xlarge",value:"ml.p2.8xlarge"},{label:"ml.p2.16xlarge",value:"ml.p2.16xlarge"},{label:"ml.p3.2xlarge",value:"ml.p3.2xlarge"},{label:"ml.p3.8xlarge",value:"ml.p3.8xlarge"},{label:"ml.p3.16xlarge",value:"ml.p3.16xlarge"},{label:"ml.p3dn.24xlarge",value:"ml.p3dn.24xlarge"},{label:"ml.p4dn.xlarge",value:"ml.p4dn.xlarge"},{label:"ml.p4dn.2xlarge",value:"ml.p4dn.2xlarge"},{label:"ml.p4dn.4xlarge",value:"ml.p4dn.4xlarge"},{label:"ml.p4dn.8xlarge",value:"ml.p4dn.8xlarge"},{label:"ml.p4dn.12xlarge",value:"ml.p4dn.12xlarge"},{label:"ml.p4dn.16xlarge",value:"ml.p4dn.16xlarge"},{label:"ml.p4d.24xlarge",value:"ml.p4d.24xlarge"},{label:"ml.g5.xlarge",value:"ml.g5.xlarge"},{label:"ml.g5.2xlarge",value:"ml.g5.2xlarge"},{label:"ml.g5.4xlarge",value:"ml.g5.4xlarge"},{label:"ml.g5.8xlarge",value:"ml.g5.8xlarge"},{label:"ml.g5.12xlarge",value:"ml.g5.12xlarge"},{label:"ml.g5.16xlarge",value:"ml.g5.16xlarge"},{label:"ml.g5.24xlarge",value:"ml.g5.24xlarge"},{label:"ml.g5.48xlarge",value:"ml.g5.48xlarge"}]}],Qi=function(e){var t,n=Object(d.useHistory)(),a=Object(d.useParams)().name,i=r.a.useState(""),o=Object(L.a)(i,2),l=(o[0],o[1]),c=function(e,t){"instance"===e&&l(t)},s=function(){},u=function(){return t?"":Object(y.jsx)(ae.a,{header:"Job settings",children:Object(y.jsx)(J.a,{label:"job name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})})},b=function(){return t?"":Object(y.jsxs)(ae.a,{header:"Tags - optional",children:[Object(y.jsxs)(C.Inline,{children:[Object(y.jsx)(J.a,{label:"Key",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Value",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})}),Object(y.jsx)(J.a,{label:"Operation",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(C.Button,{onClick:s,children:"Remove"})})})]}),Object(y.jsx)(C.Button,{variant:"link",children:"Add tag"})]})},h=function(){return Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(ae.a,{header:"Provide container ECR path",children:Object(y.jsx)(J.a,{label:"Container",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})}),Object(y.jsxs)(ae.a,{header:"Resource configuration",children:[Object(y.jsx)(J.a,{label:"Instance type",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"instance",options:qi,onChange:c})}),Object(y.jsx)(J.a,{label:"Instance count",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"1"})}),Object(y.jsx)(J.a,{label:"Additional storage volume per instance (GB)",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"30"})})]}),Object(y.jsxs)(ae.a,{header:"Input data configuration",children:[Object(y.jsx)(J.a,{label:"Input data s3uri",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Images prefix",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"images"})}),Object(y.jsx)(J.a,{label:"Lables prefix",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"labels"})}),Object(y.jsx)(J.a,{label:"Weights prefix",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"weights"})}),Object(y.jsx)(J.a,{label:"Cfg prefix",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"cfg"})})]}),Object(y.jsx)(ae.a,{header:"Output data configuration",children:Object(y.jsx)(J.a,{label:"Output data s3uri",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})})]})};return(t=void 0!==e.wizard&&e.wizard)?Object(y.jsxs)(C.Stack,{children:[u(),h(),b()]}):Object(y.jsxs)(C.Form,{header:"Create training job",description:"When you create a training job, Amazon SageMaker sets up the distributed compute cluster, performs the training, and deletes the cluster when training has completed. The resulting model artifacts are stored in the location you specified when you created the training job.",actions:Object(y.jsxs)("div",{children:[Object(y.jsx)(C.Button,{variant:"link",onClick:function(){n.push("/case/"+a+"/trainingjob")},children:"Cancel"}),Object(y.jsx)(C.Button,{variant:"primary",onClick:function(){n.push("/case/"+a+"/trainingjob")},children:"Submit"})]}),children:[u(),h(),b()]})},$i=function(e){var t,n=Object(d.useHistory)(),a=Object(d.useParams)().name,i=function(){},o=function(){return t?"":Object(y.jsx)(ae.a,{header:"Model settings",children:Object(y.jsx)(J.a,{label:"Model name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})})},r=function(){return t?"":Object(y.jsxs)(ae.a,{header:"Tags - optional",children:[Object(y.jsxs)(C.Inline,{children:[Object(y.jsx)(J.a,{label:"Key",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Value",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})}),Object(y.jsx)(J.a,{label:"Operation",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(C.Button,{onClick:i,children:"Remove"})})})]}),Object(y.jsx)(C.Button,{variant:"link",children:"Add tag"})]})},l=function(){return Object(y.jsxs)(ae.a,{header:"Container definition",children:[Object(y.jsx)(J.a,{controlId:"formFieldId1",children:Object(y.jsx)(R.a,{items:[Object(y.jsx)(w.a,{value:"single",description:"Use this to host a single model in this container.",checked:!0,children:"Use a single model"}),Object(y.jsx)(w.a,{value:"multiple",description:"Use this to host multiple models in this container.",disabled:!0,children:"Use multiple models"})]})}),Object(y.jsx)(J.a,{label:"Location of inference code image",description:"Type the registry path where the inference code image is stored in Amazon ECR. ",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Location of model artifacts",description:"Type the URL where model artifacts are stored in S3.",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})]})};return(t=void 0!==e.wizard&&e.wizard)?Object(y.jsxs)(C.Stack,{children:[o(),l(),r()]}):Object(y.jsxs)(C.Form,{header:"Create model",description:"To deploy a model to Amazon SageMaker, first create the model by providing the location of the model artifacts and inference code.",actions:Object(y.jsxs)("div",{children:[Object(y.jsx)(C.Button,{variant:"link",onClick:function(){n.push("/case/"+a+"/model")},children:"Cancel"}),Object(y.jsx)(C.Button,{variant:"primary",onClick:function(){n.push("/case/"+a+"/model")},children:"Submit"})]}),children:[o(),l(),r()]})},eo=[{label:"model-1",value:"model-1"}],to=[{label:"Standard",options:[{label:"ml.m5.large",value:"ml.m5.large"},{label:"ml.m5.xlarge",value:"ml.m5.xlarge"},{label:"ml.m5.2xlarge",value:"ml.m5.2xlarge"},{label:"ml.m5.4xlarge",value:"ml.m5.4xlarge"},{label:"ml.m5.12xlarge",value:"ml.m5.12xlarge"},{label:"ml.m5.24xlarge",value:"ml.m5.24xlarge"},{label:"ml.m4.xlarge",value:"ml.m4.xlarge"},{label:"ml.m4.2xlarge",value:"ml.m4.2xlarge"},{label:"ml.m4.4xlarge",value:"ml.m4.4xlarge"},{label:"ml.m4.10large",value:"ml.m4.10large"},{label:"ml.m4.16xlarge",value:"ml.m4.16xlarge"}]},{label:"Compute optimized",options:[{label:"ml.c5.xlarge",value:"ml.c5.xlarge"},{label:"ml.c5.2xlarge",value:"ml.c5.2xlarge"},{label:"ml.c5.4xlarge",value:"ml.c5.4xlarge"},{label:"ml.c5.9xlarge",value:"ml.c5.9xlarge"},{label:"ml.c5.18xlarge",value:"ml.c5.18xlarge"},{label:"ml.c4.1xlarge",value:"ml.c4.xlarge"},{label:"ml.c4.2xlarge",value:"ml.c4.2xlarge"},{label:"ml.c4.4xlarge",value:"ml.c4.4xlarge"},{label:"ml.c4.8xlarge",value:"ml.c4.8xlarge"},{label:"ml.c5n.xlarge",value:"ml.c5n.xlarge"},{label:"ml.c5n.2xlarge",value:"ml.c5n.2xlarge"},{label:"ml.c5n.4xlarge",value:"ml.c5n.4xlarge"},{label:"ml.c5n.9xlarge",value:"ml.c5n.9xlarge"},{label:"ml.c5n.18xlarge",value:"ml.c5n.18xlarge"}]},{label:"Accelerated computing",options:[{label:"ml.p2.xlarge",value:"ml.p2.xlarge"},{label:"ml.p2.8xlarge",value:"ml.p2.8xlarge"},{label:"ml.p2.16xlarge",value:"ml.p2.16xlarge"},{label:"ml.p3.2xlarge",value:"ml.p3.2xlarge"},{label:"ml.p3.8xlarge",value:"ml.p3.8xlarge"},{label:"ml.p3.16xlarge",value:"ml.p3.16xlarge"},{label:"ml.p3dn.24xlarge",value:"ml.p3dn.24xlarge"},{label:"ml.p4dn.xlarge",value:"ml.p4dn.xlarge"},{label:"ml.p4dn.2xlarge",value:"ml.p4dn.2xlarge"},{label:"ml.p4dn.4xlarge",value:"ml.p4dn.4xlarge"},{label:"ml.p4dn.8xlarge",value:"ml.p4dn.8xlarge"},{label:"ml.p4dn.12xlarge",value:"ml.p4dn.12xlarge"},{label:"ml.p4dn.16xlarge",value:"ml.p4dn.16xlarge"},{label:"ml.p4d.24xlarge",value:"ml.p4d.24xlarge"},{label:"ml.g5.xlarge",value:"ml.g5.xlarge"},{label:"ml.g5.2xlarge",value:"ml.g5.2xlarge"},{label:"ml.g5.4xlarge",value:"ml.g5.4xlarge"},{label:"ml.g5.8xlarge",value:"ml.g5.8xlarge"},{label:"ml.g5.12xlarge",value:"ml.g5.12xlarge"},{label:"ml.g5.16xlarge",value:"ml.g5.16xlarge"},{label:"ml.g5.24xlarge",value:"ml.g5.24xlarge"},{label:"ml.g5.48xlarge",value:"ml.g5.48xlarge"}]}],no=[{label:"none",value:"none"},{label:"ml.eia1.medium",value:"ml.eia1.medium"},{label:"ml.eia1.large",value:"ml.eia1.large"},{label:"ml.eia1.xlarge",value:"ml.eia1.xlarge"},{label:"ml.eia2.medium",value:"ml.eia2.medium"},{label:"ml.eia2.large",value:"ml.eia2.large"},{label:"ml.eia2.xlarge",value:"ml.eia2.xlarge"}],ao=function(e){var t,n=Object(d.useHistory)(),a=Object(d.useParams)().name,i=r.a.useState(""),o=Object(L.a)(i,2),l=(o[0],o[1]),c=r.a.useState(""),s=Object(L.a)(c,2),u=(s[0],s[1]),b=r.a.useState(""),h=Object(L.a)(b,2),g=(h[0],h[1]),m=function(e,t){"model"===e&&l(t),"instance"===e&&u(t),"elastic"===e&&g(t)},p=function(){},j=function(){return t?Object(y.jsx)(ae.a,{header:"Endpoint setting",children:Object(y.jsx)(J.a,{label:"Type of endpoint",controlId:"formFieldId1",children:Object(y.jsx)(C.RadioGroup,{items:[Object(y.jsx)(C.RadioButton,{value:"provisioned",description:"Use this to host a single model in this container.",children:"Provisioned"}),Object(y.jsx)(C.RadioButton,{value:"serverless",description:"Use this to host multiple models in this container.",children:"Serverless (In Preview)"})]})})}):Object(y.jsxs)(ae.a,{header:"Endpoint setting",children:[Object(y.jsx)(J.a,{label:"Endpooint name",description:"Your application uses this name to access this endpoint.",controlId:"formFieldId1",hintText:"Maximum of 63 alphanumeric characters. Can include hyphens (-), but not spaces. Must be unique within your account in an AWS Region.",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Type of endpoint",controlId:"formFieldId1",children:Object(y.jsx)(C.RadioGroup,{items:[Object(y.jsx)(C.RadioButton,{value:"provisioned",description:"Use this to host a single model in this container.",children:"Provisioned"}),Object(y.jsx)(C.RadioButton,{value:"serverless",description:"Use this to host multiple models in this container.",children:"Serverless (In Preview)"})]})})]})},f=function(){return t?"":Object(y.jsxs)(ae.a,{header:"Tags - optional",children:[Object(y.jsxs)(C.Inline,{children:[Object(y.jsx)(J.a,{label:"Key",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Value",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})}),Object(y.jsx)(J.a,{label:"Operation",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(C.Button,{onClick:p,children:"Remove"})})})]}),Object(y.jsx)(C.Button,{variant:"link",children:"Add tag"})]})},O=function(){return Object(y.jsxs)(ae.a,{header:"Production variants",children:[Object(y.jsx)(J.a,{label:"Model name",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"model",options:eo,onChange:m})}),Object(y.jsx)(J.a,{label:"Instance type",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"model",options:to,onChange:m})}),Object(y.jsx)(J.a,{label:"Elastic Inference",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"elastic",options:no,onChange:m})}),Object(y.jsx)(J.a,{label:"Initial instance count",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"1"})}),Object(y.jsx)(J.a,{label:"Initial instance weight",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"1"})})]})};return(t=void 0!==e.wizard&&e.wizard)?Object(y.jsxs)(C.Stack,{children:[j(),O(),f()]}):Object(y.jsxs)(C.Form,{header:"Create endpoint",description:"To deploy models to Amazon SageMaker, first create an endpoint. Specify which models to deploy, and the relative traffic weighting and hardware requirements for each. ",actions:Object(y.jsxs)("div",{children:[Object(y.jsx)(C.Button,{variant:"link",onClick:function(){n.push("/case/"+a+"/endpoint")},children:"Cancel"}),Object(y.jsx)(C.Button,{variant:"primary",onClick:function(){n.push("/case/"+a+"/endpoint")},children:"Submit"})]}),children:[j(),O(),f()]})},io=[{label:"endpoint-1",value:"endpoint-1"}],oo=[{label:"api-1",value:"api-1"}],ro=function(e){var t,n=r.a.useState(""),a=Object(L.a)(n,2),i=(a[0],a[1]),l=r.a.useState(""),c=Object(L.a)(l,2),s=(c[0],c[1]),u=function(e,t){"endpoint"===e&&i(t),"api"===e&&s(t)},b=Object(o.useState)("1"),h=Object(L.a)(b,2),g=h[0],m=h[1],p=function(e,t){m(t||"")},j=Object(d.useHistory)(),f=Object(d.useParams)().name,O=function(){},v=function(){return"1"===g?Object(y.jsxs)(ae.a,{header:"Rest API setting",children:[Object(y.jsx)(J.a,{label:"API Gateway",controlId:"formFieldId1",children:Object(y.jsx)(C.RadioGroup,{onChange:p,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:!1,children:"Create new Rest API"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:!0,children:"Select existing Rest API"})]})}),Object(y.jsx)(J.a,{controlId:"formField1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"api",options:oo,onChange:u})}),Object(y.jsx)(J.a,{label:"API path",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"/yolov5"})})]}):Object(y.jsxs)(ae.a,{header:"Rest API setting",children:[Object(y.jsx)(J.a,{label:"API Gateway",controlId:"formFieldId1",children:Object(y.jsx)(C.RadioGroup,{onChange:p,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:!0,children:"Create new Rest API"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:!1,children:"Select existing Rest API"})]})}),Object(y.jsx)(J.a,{controlId:"formField1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"API path",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1",value:"/yolov5"})})]})},x=function(){return t?"":Object(y.jsxs)(ae.a,{header:"Tags - optional",children:[Object(y.jsxs)(C.Inline,{children:[Object(y.jsx)(J.a,{label:"Key",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Value",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})}),Object(y.jsx)(J.a,{label:"Operation",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(C.Button,{onClick:O,children:"Remove"})})})]}),Object(y.jsx)(C.Button,{variant:"link",children:"Add tag"})]})},I=function(){return Object(y.jsx)(ae.a,{header:"Production variants",children:Object(y.jsx)(J.a,{label:"Endpoint name",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"endpoint",options:io,onChange:u})})})};return(t=void 0!==e.wizard&&e.wizard)?Object(y.jsxs)(C.Stack,{children:[v(),I(),x()]}):Object(y.jsxs)(C.Form,{header:"Create restapi",actions:Object(y.jsxs)("div",{children:[Object(y.jsx)(C.Button,{variant:"link",onClick:function(){j.push("/case/"+f+"/restapi")},children:"Cancel"}),Object(y.jsx)(C.Button,{variant:"primary",onClick:function(){j.push("/case/"+f+"/restapi")},children:"Submit"})]}),children:[v(),I(),x()]})},lo=[{label:"model-1",value:"model-1"}],co=function(e){var t,n=Object(d.useHistory)(),a=Object(d.useParams)().name,i=r.a.useState(""),o=Object(L.a)(i,2),l=(o[0],o[1]),c=function(e,t){"model"===e&&l(t)},s=function(){return t?"":Object(y.jsx)(ae.a,{header:"Greengrass component setting",children:Object(y.jsx)(J.a,{label:"Component name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})})},u=function(){t||(ae.a,C.Inline,J.a,oe.a,J.a,C.Inline,oe.a,J.a,C.Inline,C.Button,C.Button)},b=function(){return Object(y.jsx)(ae.a,{header:"Production variants",children:Object(y.jsx)(J.a,{label:"Model name",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"model",options:lo,onChange:c})})})};return(t=void 0!==e.wizard&&e.wizard)?Object(y.jsxs)(C.Stack,{children:[s(),b(),u()]}):Object(y.jsxs)(C.Form,{header:"Create Greengrass component",actions:Object(y.jsxs)("div",{children:[Object(y.jsx)(C.Button,{variant:"link",onClick:function(){n.push("/case/"+a+"/component")},children:"Cancel"}),Object(y.jsx)(C.Button,{variant:"primary",onClick:function(){n.push("/case/"+a+"/component")},children:"Submit"})]}),children:[s(),b(),u()]})},so=[{label:"GreengrassQuickStartGroup",value:"GreengrassQuickStartGroup"}],uo=[{label:"com.example.yolov5",value:"com.example.yolov5"}],bo=[{label:"1.0.0",value:"1.0.0"}],ho=function(e){var t,n=Object(d.useHistory)(),a=Object(d.useParams)().name,i=r.a.useState("1"),o=Object(L.a)(i,2),l=o[0],c=o[1],s=r.a.useState(""),u=Object(L.a)(s,2),b=(u[0],u[1]),h=function(e,t){"target"===e&&b(t)},g=function(){},m=function(e,t){c(t||"")},p=function(){return t?"":Object(y.jsx)(ae.a,{header:"Greengrass deployment setting",children:Object(y.jsx)(J.a,{label:"Deployment name",description:"A friendly name lets you identify this deployment. If you leave it blank, the deployment displays its ID instead of a name.",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})})},j=function(){return"1"===l?Object(y.jsxs)(ae.a,{header:"Deployment target",description:"You can deploy to a single Greengrass core device or a group of core devices.",children:[Object(y.jsx)(J.a,{label:"Target type",controlId:"formFieldId1",children:Object(y.jsx)(C.RadioGroup,{onChange:m,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:!1,children:"Core device"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:!0,children:"Thing group"})]})}),Object(y.jsx)(J.a,{label:"Target name",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"target",options:so,onChange:h})})]}):Object(y.jsxs)(ae.a,{header:"Deployment target",description:"You can deploy to a single Greengrass core device or a group of core devices.",children:[Object(y.jsx)(J.a,{label:"Target type",controlId:"formFieldId1",children:Object(y.jsx)(C.RadioGroup,{onChange:m,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:!0,children:"Core device"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:!1,children:"Thing group"})]})}),Object(y.jsx)(J.a,{label:"Target name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})]})},f=function(){return t?"":Object(y.jsxs)(ae.a,{header:"Tags - optional",children:[Object(y.jsxs)(C.Inline,{children:[Object(y.jsx)(J.a,{label:"Key",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Value",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})})}),Object(y.jsx)(J.a,{label:"Operation",controlId:"formFieldId1",children:Object(y.jsx)(C.Inline,{children:Object(y.jsx)(C.Button,{onClick:g,children:"Remove"})})})]}),Object(y.jsx)(C.Button,{variant:"link",children:"Add tag"})]})},O=function(){return Object(y.jsxs)(ae.a,{header:"Production variants",children:[Object(y.jsx)(J.a,{label:"Component name",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"component",options:uo,onChange:h})}),Object(y.jsx)(J.a,{label:"Component version",controlId:"formFieldId1",children:Object(y.jsx)(ce,{placeholder:"Choose an option",name:"version",options:bo,onChange:h})})]})};return(t=void 0!==e.wizard&&e.wizard)?Object(y.jsxs)(C.Stack,{children:[p(),j(),O(),f()]}):Object(y.jsxs)(C.Form,{header:"Create Greengrass deployment",actions:Object(y.jsxs)("div",{children:[Object(y.jsx)(C.Button,{variant:"link",onClick:function(){n.push("/case/"+a+"/deployment")},children:"Cancel"}),Object(y.jsx)(C.Button,{variant:"primary",onClick:function(){n.push("/case/"+a+"/deployment")},children:"Submit"})]}),children:[p(),j(),O(),f()]})},go=n(324),mo=n.n(go),po=function(e){var t=Object(o.useState)("0"),n=Object(L.a)(t,2),a=n[0],i=n[1],r=function(e,t){i(t||"")},l=Object(d.useHistory)(),c=Object(d.useParams)().name,s=function(){l.push("/case/"+c+"/pipeline")},b=function(){l.push("/case/"+c+"/pipeline")},h=[{title:"Pipeline",content:Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(J.a,{label:"Pipeline name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Pipeline type",controlId:"formFieldId2",children:Object(y.jsx)(C.RadioGroup,{onChange:r,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:"0"===a,children:"Both trining and inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:"1"===a,children:"Both training and inference and deploy only in cloud"}),Object(y.jsx)(C.RadioButton,{value:"2",checked:"2"===a,children:"Only inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"3",checked:"3"===a,children:"Only inference and deploy only in cloud"})]})})]})},{title:"Training job",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(Qi,{wizard:!0})})},{title:"Model",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)($i,{wizard:!0})})},{title:"Endpoint",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ao,{wizard:!0})})},{title:"Rest API",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ro,{wizard:!0})})},{title:"Greengrass component",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(co,{wizard:!0})})},{title:"Greengrass deployment",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ho,{wizard:!0})})}],g=[{title:"Pipeline",content:Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(J.a,{label:"Pipeline name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Pipeline type",controlId:"formFieldId2",children:Object(y.jsx)(C.RadioGroup,{onChange:r,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:"0"===a,children:"Both trining and inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:"1"===a,children:"Both training and inference and deploy only in cloud"}),Object(y.jsx)(C.RadioButton,{value:"2",checked:"2"===a,children:"Only inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"3",checked:"3"===a,children:"Only inference and deploy only in cloud"})]})})]})},{title:"Pipeline",content:Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(J.a,{label:"Pipeline name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Pipeline type",controlId:"formFieldId2",children:Object(y.jsx)(C.RadioGroup,{onChange:r,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:"0"===a,children:"Both trining and inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:"1"===a,children:"Both training and inference and deploy only in cloud"}),Object(y.jsx)(C.RadioButton,{value:"2",checked:"2"===a,children:"Only inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"3",checked:"3"===a,children:"Only inference and deploy only in cloud"})]})})]})},{title:"Training job",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(Qi,{wizard:!0})})},{title:"Model",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)($i,{wizard:!0})})},{title:"Endpoint",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ao,{wizard:!0})})},{title:"Rest API",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ro,{wizard:!0})})}],m=[{title:"Pipeline",content:Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(J.a,{label:"Pipeline name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Pipeline type",controlId:"formFieldId2",children:Object(y.jsx)(C.RadioGroup,{onChange:r,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:"0"===a,children:"Both trining and inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:"1"===a,children:"Both training and inference and deploy only in cloud"}),Object(y.jsx)(C.RadioButton,{value:"2",checked:"2"===a,children:"Only inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"3",checked:"3"===a,children:"Only inference and deploy only in cloud"})]})})]})},{title:"Model",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)($i,{wizard:!0})})},{title:"Endpoint",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ao,{wizard:!0})})},{title:"Rest API",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ro,{wizard:!0})})},{title:"Greengrass component",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(co,{wizard:!0})})},{title:"Greengrass deployment",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ho,{wizard:!0})})}],p=[{title:"Pipeline",content:Object(y.jsxs)(C.Stack,{children:[Object(y.jsx)(J.a,{label:"Pipeline name",controlId:"formFieldId1",children:Object(y.jsx)(oe.a,{type:"text",controlId:"formFieldId1"})}),Object(y.jsx)(J.a,{label:"Pipeline type",controlId:"formFieldId2",children:Object(y.jsx)(C.RadioGroup,{onChange:r,items:[Object(y.jsx)(C.RadioButton,{value:"0",checked:"0"===a,children:"Both trining and inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"1",checked:"1"===a,children:"Both training and inference and deploy only in cloud"}),Object(y.jsx)(C.RadioButton,{value:"2",checked:"2"===a,children:"Only inference and deploy in both cloud and edge"}),Object(y.jsx)(C.RadioButton,{value:"3",checked:"3"===a,children:"Only inference and deploy only in cloud"})]})})]})},{title:"Model",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)($i,{wizard:!0})})},{title:"Endpoint",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ao,{wizard:!0})})},{title:"Rest API",content:Object(y.jsx)(C.Stack,{children:Object(y.jsx)(ro,{wizard:!0})})}];return"0"===a?Object(y.jsx)(u.BrowserRouter,{children:Object(y.jsx)(M.a,{children:Object(y.jsx)(mo.a,{steps:h,onSubmitButtonClick:s,onCancelButtonClick:b})})}):"1"===a?Object(y.jsx)(u.BrowserRouter,{children:Object(y.jsx)(M.a,{children:Object(y.jsx)(mo.a,{steps:g,onSubmitButtonClick:s,onCancelButtonClick:b})})}):"2"===a?Object(y.jsx)(u.BrowserRouter,{children:Object(y.jsx)(M.a,{children:Object(y.jsx)(mo.a,{steps:m,onSubmitButtonClick:s,onCancelButtonClick:b})})}):Object(y.jsx)(u.BrowserRouter,{children:Object(y.jsx)(M.a,{children:Object(y.jsx)(mo.a,{steps:p,onSubmitButtonClick:s,onCancelButtonClick:b})})})},jo=function(e,t){return Object(y.jsx)(I,{children:Object(y.jsx)(e,Object(s.a)({},t))})},fo=function(){return Object(y.jsx)(h.a,{children:Object(y.jsx)(u.BrowserRouter,{children:Object(y.jsxs)(d.Switch,{children:[Object(y.jsx)(d.Route,{exact:!0,path:"/form/:name/trainingjob",children:jo(Qi)}),Object(y.jsx)(d.Route,{exact:!0,path:"/form/:name/model",children:jo($i)}),Object(y.jsx)(d.Route,{exact:!0,path:"/form/:name/endpoint",children:jo(ao)}),Object(y.jsx)(d.Route,{exact:!0,path:"/form/:name/restapi",children:jo(ro)}),Object(y.jsx)(d.Route,{exact:!0,path:"/form/:name/component",children:jo(co)}),Object(y.jsx)(d.Route,{exact:!0,path:"/form/:name/deployment",children:jo(ho)}),Object(y.jsx)(d.Route,{exact:!0,path:"/form/:name/pipeline",children:jo(po)}),Object(y.jsx)(d.Route,{exact:!0,path:"/scenarios/ppe",children:jo(Ji)}),Object(y.jsx)(d.Route,{exact:!0,path:"/model/yolov5",children:jo(Ki)}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/demo",children:jo(Xi,{activeId:"demo"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/pipeline",children:jo(Xi,{activeId:"pipeline"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/trainingjob",children:jo(Xi,{activeId:"trainingjob"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/model",children:jo(Xi,{activeId:"model"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/endpoint",children:jo(Xi,{activeId:"endpoint"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/restapi",children:jo(Xi,{activeId:"restapi"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/component",children:jo(Xi,{activeId:"component"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/deployment",children:jo(Xi,{activeId:"deployment"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/case/:name/pipeline",children:jo(Xi,{activeId:"pipeline"})}),Object(y.jsx)(d.Route,{exact:!0,path:"/",children:jo(A)})]})})})},Oo=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1410)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),o(e),r(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vo=n(543),xo={activeImageIndex:null,activeLabelNameId:null,activeLabelType:null,activeLabelId:null,highlightedLabelId:null,imagesData:[],firstLabelCreatedFlag:!1,labels:[]};var yo={windowSize:null,activePopupType:null,customCursorStyle:rt.DEFAULT,activeContext:null,preventCustomCursor:!1,imageDragMode:!1,crossHairVisible:!0,enablePerClassColoration:!0,projectData:{type:null,name:"my-project-name"},zoom:At.MIN_ZOOM};var Io={suggestedLabelList:[],rejectedSuggestedLabelList:[],isObjectDetectorLoaded:!1,isPoseDetectorLoaded:!1,isAIDisabled:!1};var Co={queue:[]};var Ao=Object(vo.a)({general:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke.UPDATE_WINDOW_SIZE:return Object(s.a)(Object(s.a)({},e),{},{windowSize:t.payload.windowSize});case ke.UPDATE_ACTIVE_POPUP_TYPE:return Object(s.a)(Object(s.a)({},e),{},{activePopupType:t.payload.activePopupType});case ke.UPDATE_CUSTOM_CURSOR_STYLE:return Object(s.a)(Object(s.a)({},e),{},{customCursorStyle:t.payload.customCursorStyle});case ke.UPDATE_CONTEXT:return Object(s.a)(Object(s.a)({},e),{},{activeContext:t.payload.activeContext});case ke.UPDATE_PREVENT_CUSTOM_CURSOR_STATUS:return Object(s.a)(Object(s.a)({},e),{},{preventCustomCursor:t.payload.preventCustomCursor});case ke.UPDATE_IMAGE_DRAG_MODE_STATUS:return Object(s.a)(Object(s.a)({},e),{},{imageDragMode:t.payload.imageDragMode});case ke.UPDATE_CROSS_HAIR_VISIBLE_STATUS:return Object(s.a)(Object(s.a)({},e),{},{crossHairVisible:t.payload.crossHairVisible});case ke.UPDATE_PROJECT_DATA:return Object(s.a)(Object(s.a)({},e),{},{projectData:t.payload.projectData});case ke.UPDATE_ZOOM:return Object(s.a)(Object(s.a)({},e),{},{zoom:t.payload.zoom});case ke.UPDATE_ENABLE_PER_CLASS_COLORATION_STATUS:return Object(s.a)(Object(s.a)({},e),{},{enablePerClassColoration:t.payload.enablePerClassColoration});default:return e}},labels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke.UPDATE_ACTIVE_IMAGE_INDEX:return Object(s.a)(Object(s.a)({},e),{},{activeImageIndex:t.payload.activeImageIndex});case ke.UPDATE_ACTIVE_LABEL_NAME_ID:return Object(s.a)(Object(s.a)({},e),{},{activeLabelNameId:t.payload.activeLabelNameId});case ke.UPDATE_ACTIVE_LABEL_ID:return Object(s.a)(Object(s.a)({},e),{},{activeLabelId:t.payload.activeLabelId});case ke.UPDATE_HIGHLIGHTED_LABEL_ID:return Object(s.a)(Object(s.a)({},e),{},{highlightedLabelId:t.payload.highlightedLabelId});case ke.UPDATE_ACTIVE_LABEL_TYPE:return Object(s.a)(Object(s.a)({},e),{},{activeLabelType:t.payload.activeLabelType});case ke.UPDATE_IMAGE_DATA_BY_ID:return Object(s.a)(Object(s.a)({},e),{},{imagesData:e.imagesData.map((function(e){return e.id===t.payload.id?t.payload.newImageData:e}))});case ke.ADD_IMAGES_DATA:return Object(s.a)(Object(s.a)({},e),{},{imagesData:e.imagesData.concat(t.payload.imageData)});case ke.UPDATE_IMAGES_DATA:return Object(s.a)(Object(s.a)({},e),{},{imagesData:t.payload.imageData});case ke.UPDATE_LABEL_NAMES:return Object(s.a)(Object(s.a)({},e),{},{labels:t.payload.labels});case ke.UPDATE_FIRST_LABEL_CREATED_FLAG:return Object(s.a)(Object(s.a)({},e),{},{firstLabelCreatedFlag:t.payload.firstLabelCreatedFlag});default:return e}},ai:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Io,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke.UPDATE_SUGGESTED_LABEL_LIST:return Object(s.a)(Object(s.a)({},e),{},{suggestedLabelList:t.payload.labelList});case ke.UPDATE_REJECTED_SUGGESTED_LABEL_LIST:return Object(s.a)(Object(s.a)({},e),{},{rejectedSuggestedLabelList:t.payload.labelList});case ke.UPDATE_OBJECT_DETECTOR_STATUS:return Object(s.a)(Object(s.a)({},e),{},{isObjectDetectorLoaded:t.payload.isObjectDetectorLoaded});case ke.UPDATE_POSE_DETECTOR_STATUS:return Object(s.a)(Object(s.a)({},e),{},{isPoseDetectorLoaded:t.payload.isPoseDetectorLoaded});case ke.UPDATE_DISABLED_AI_FLAG:return Object(s.a)(Object(s.a)({},e),{},{isAIDisabled:t.payload.isAIDisabled});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Co,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke.SUBMIT_NEW_NOTIFICATION:return Object(s.a)(Object(s.a)({},e),{},{queue:[].concat(Object(_e.a)(e.queue),[t.payload.notification])});case ke.DELETE_NOTIFICATION_BY_ID:return Object(s.a)(Object(s.a)({},e),{},{queue:e.queue.filter((function(e){return e.id!==t.payload.id}))});default:return e}}});var Po=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"isDev",value:function(){return!1}},{key:"isProd",value:function(){return!0}}]),e}(),Eo=function(){function e(){Object(U.a)(this,e)}return Object(V.a)(e,null,[{key:"inti",value:function(){e.handleResize(),e.detectDeviceParams(),e.handleAccidentalPageExit(),window.addEventListener(dt.RESIZE,e.handleResize),window.addEventListener(dt.MOUSE_WHEEL,e.disableGenericScrollZoom,{passive:!1}),window.addEventListener(dt.KEY_DOWN,e.disableUnwantedKeyBoardBehaviour),window.addEventListener(dt.KEY_PRESS,e.disableUnwantedKeyBoardBehaviour),Wt.init()}}]),e}();Eo.handleAccidentalPageExit=function(){window.onbeforeunload=function(e){null!=mt.getProjectType()&&Po.isProd()&&(e.preventDefault(),e.returnValue="")}},Eo.handleResize=function(){var e;Lo.dispatch((e={width:window.innerWidth,height:window.innerHeight},{type:ke.UPDATE_WINDOW_SIZE,payload:{windowSize:e}}))},Eo.disableUnwantedKeyBoardBehaviour=function(e){jn.isMac&&e.metaKey&&e.preventDefault(),["=","+","-"].includes(e.key)&&(e.ctrlKey||jn.isMac&&e.metaKey)&&e.preventDefault()},Eo.disableGenericScrollZoom=function(e){(e.ctrlKey||jn.isMac&&e.metaKey)&&e.preventDefault()},Eo.detectDeviceParams=function(){var e=window.navigator.userAgent;jn.mobileDeviceData=Ut.getMobileDeviceData(e),jn.isMac=Ut.isMac(e),jn.isSafari=Ut.isSafari(e),jn.isFirefox=Ut.isFirefox(e)};var Lo=Object(vo.b)(Ao,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Eo.inti(),c.a.render(Object(y.jsxs)(r.a.StrictMode,{children:[Object(y.jsx)(xe.a,{store:Lo,children:Object(y.jsx)(fo,{})}),")"]}),document.getElementById("root")),Oo(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[1305,1,2]]]);
//# sourceMappingURL=main.e5244718.chunk.js.map